[WARNING] Audit logging has been enabled for Account
[WARNING] Audit logging has been enabled for AddConsumableLog
[WARNING] Audit logging has been enabled for Announcement
[WARNING] Audit logging has been enabled for CoachSession
[WARNING] Audit logging has been enabled for Language
[WARNING] Audit logging has been enabled for CmPreference
  [1m[36mSQL (0.5ms)[0m  [1mSHOW TABLES[0m
[WARNING] Audit logging has been enabled for CoachAvailability
[WARNING] Audit logging has been enabled for CoachAvailabilityTemplate
[WARNING] Audit logging has been enabled for CoachRecurringSchedule
[WARNING] Audit logging has been enabled for DelayedJob
[WARNING] Audit logging has been enabled for Event
[WARNING] Audit logging has been enabled for ExcludedCoachesSession
[WARNING] Audit logging has been enabled for LanguageConfiguration
[WARNING] Audit logging has been enabled for LearnerSupportStatus
[WARNING] Audit logging has been enabled for Level
  [1m[35mLevel Load (0.4ms)[0m  SELECT `levels`.* FROM `levels`
[WARNING] Audit logging has been enabled for Link
[WARNING] Audit logging has been enabled for ManagementTeamMember
[WARNING] Audit logging has been enabled for MasterSchedulerBulkData
[WARNING] Audit logging has been enabled for MsDraftData
[WARNING] Audit logging has been enabled for MsErrorMessage
[WARNING] Audit logging has been enabled for Notification
[WARNING] Audit logging has been enabled for NotificationMessageDynamic
[WARNING] Audit logging has been enabled for NotificationRecipient
[WARNING] Audit logging has been enabled for PreferenceSetting
[WARNING] Audit logging has been enabled for Qualification
[WARNING] Audit logging has been enabled for RealTimeLotusData
[WARNING] Audit logging has been enabled for Region
[WARNING] Audit logging has been enabled for Resource
[WARNING] Audit logging has been enabled for RightsExtensionLog
[WARNING] Audit logging has been enabled for Role
[WARNING] Audit logging has been enabled for RolesTask
[WARNING] Audit logging has been enabled for SchedulerMetadata
[WARNING] Audit logging has been enabled for ShownSubstitutions
[WARNING] Audit logging has been enabled for Substitution
[WARNING] Audit logging has been enabled for SupportLanguage
[WARNING] Audit logging has been enabled for SupportWindow
[WARNING] Audit logging has been enabled for SystemNotification
[WARNING] Audit logging has been enabled for Task
[WARNING] Audit logging has been enabled for TaskTracer
[WARNING] Audit logging has been enabled for TempData
[WARNING] Audit logging has been enabled for TriggerEvent
[WARNING] Audit logging has been enabled for UnavailableDespiteTemplate
[WARNING] Audit logging has been enabled for UncapLearnerLog
[WARNING] Audit logging has been enabled for UserLanguage
[WARNING] Audit logging has been enabled for UserUpdateExecutionDetail
[WARNING] Audit logging has been enabled for UserVillage
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mSQL (1.4ms)[0m  describe `accounts`
  [1m[36mAREL (0.5ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'rajkumar@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'rajkumar', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:53', NULL, 1, NULL, '2015-01-13 08:14:53', 'rajkumar', NULL)[0m
Saving a log entry on create for Coach record 1
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mSQL (0.7ms)[0m  describe `audit_log_records`
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:53', '', NULL, 1, '', 'create', '2015-01-13 08:14:53', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 1
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mdescribe `support_languages`[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:53', '2015-01-13 08:14:53')
Saving a log entry on create for SupportLanguage record 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:53', NULL, NULL, 1, '', 'create', '2015-01-13 08:14:53', NULL)[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  describe `languages`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:53', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:53', 'TotaleLanguage', NULL, 'ARA')[0m
Saving a log entry on create for Language record 1
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:53', '', NULL, 1, '', 'create', '2015-01-13 08:14:53', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 1 AND (`qualifications`.coach_id = 1 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 1 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 1 LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 1 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 1 and language_id = 1)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 1 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mdescribe `qualifications`[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (1, '2015-01-13 08:14:53', 10, NULL, 1, '2015-01-13 08:14:53')
Saving a log entry on create for Qualification record 1
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:53', '', NULL, 1, '', 'create', '2015-01-13 08:14:53', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions`[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.4ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.4ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 1 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mdescribe `coach_sessions`[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `coach_sessions` (`coach_showed_up`, `external_village_id`, `session_status`, `coach_id`, `type`, `eschool_session_id`, `topic_id`, `session_start_time`, `session_end_time`, `attendance_count`, `single_number_unit`, `created_at`, `name`, `cancelled`, `reassigned`, `recurring_schedule_id`, `seconds_prior_to_session`, `language_id`, `number_of_seats`, `updated_at`, `cancellation_reason`, `appointment_type_id`, `language_identifier`) VALUES (0, NULL, 1, 1, 'ConfirmedSession', 343, NULL, '2015-01-13 09:00:00', '2015-01-13 09:30:00', NULL, 1, '2015-01-13 08:14:53', NULL, 0, NULL, NULL, NULL, 1, 0, '2015-01-13 08:14:53', NULL, NULL, 'ARA')
Saving a log entry on create for ConfirmedSession record 1
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:53', '', NULL, 1, '', 'create', '2015-01-13 08:14:53', NULL)[0m
  [1m[35mSessionMetadata Load (0.3ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 1 LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  describe `substitutions`
  [1m[36mAREL (0.6ms)[0m  [1mINSERT INTO `substitutions` (`updated_at`, `grabbed_at`, `reason`, `session_type`, `coach_session_id`, `created_at`, `cancelled`, `lang_id`, `was_reassigned`, `grabber_coach_id`, `coach_id`, `grabbed`) VALUES ('2015-01-13 08:14:53', NULL, 'Electricity Outage', 'normal', 1, '2015-01-13 08:14:53', 0, NULL, NULL, NULL, 1, 0)[0m
Saving a log entry on create for Substitution record 1
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:53', '', NULL, 1, '', 'create', '2015-01-13 08:14:53', NULL)
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email243@rosettastone.com' and id != NULL)[0m
  [1m[35mSQL (1.3ms)[0m  describe `accounts`
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email243@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'vramanan', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:53', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:53', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 2
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:53', '', NULL, 2, '', 'create', '2015-01-13 08:14:53', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 2 LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'AUS' OR identifier = 'AUS') ORDER BY languages.id DESC LIMIT 1[0m
  Processing by SubstitutionController#assign_substitute_for_coach as HTML
  Parameters: {"coach_session_id"=>1, "coach_id"=>1, "assigned_coach"=>1}
  [1m[35mCoach Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 1 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 1 LIMIT 1[0m
  [1m[35mSubstitution Load (0.3ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 1) ORDER BY substitutions.id DESC LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 1 LIMIT 1
  [1m[36mAREL (11.9ms)[0m  [1mUPDATE `substitutions` SET `updated_at` = '2015-01-13 08:14:53', `grabbed_at` = '2015-01-13 08:14:53', `was_reassigned` = 1, `grabber_coach_id` = 1, `grabbed` = 1 WHERE `substitutions`.`id` = 1[0m
Saving a log entry on update for Substitution record 1
  [1m[35mAREL (1.3ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:53', 'vramanan', NULL, 1, 'was_reassigned', 'update', '2015-01-13 08:14:53', 1)
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:53', 'vramanan', NULL, 1, 'grabber_coach_id', 'update', '2015-01-13 08:14:53', 1)[0m
  [1m[35mAREL (0.6ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:53', 'vramanan', 0, 1, 'grabbed', 'update', '2015-01-13 08:14:53', 1)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:53', 'vramanan', NULL, 1, 'grabbed_at', 'update', '2015-01-13 08:14:53', '2015-01-13 08:14:53')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.4ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 1 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 1) ORDER BY updated_at DESC LIMIT 1[0m
Saving a log entry on update for ConfirmedSession record 1
  [1m[35mSessionMetadata Load (0.1ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 1 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mTriggerEvent Load (0.2ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'MANUALLY_REASSIGNED' LIMIT 1[0m
  [1m[35mNotification Load (0.4ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 11) LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 1 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 1 LIMIT 1
Completed 200 OK in 72ms (Views: 17.8ms | ActiveRecord: 98.9ms)
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'Check' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'Check') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'Check@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'Check@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'Check', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:53', NULL, 1, NULL, '2015-01-13 08:14:53', 'Check', NULL)[0m
Saving a log entry on create for Coach record 3
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:53', 'vramanan', NULL, 3, '', 'create', '2015-01-13 08:14:53', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 3
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'AUS' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'AUS') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:53', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:53', 'AriaLanguage', NULL, 'AUS')
Saving a log entry on create for Language record 2
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:53', 'vramanan', NULL, 2, '', 'create', '2015-01-13 08:14:53', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 2 AND (`qualifications`.coach_id = 3 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 2 LIMIT 1[0m
  [1m[35mCoachManager Load (6.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 3 LIMIT 1
  [1m[36mCoach Load (0.6ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 3 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 3 and language_id = 2)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 3 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (3, '2015-01-13 08:14:53', 10, NULL, 2, '2015-01-13 08:14:53')
Saving a log entry on create for Qualification record 2
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:53', 'vramanan', NULL, 2, '', 'create', '2015-01-13 08:14:53', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 1 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`updated_at`, `grabbed_at`, `reason`, `session_type`, `coach_session_id`, `created_at`, `cancelled`, `lang_id`, `was_reassigned`, `grabber_coach_id`, `coach_id`, `grabbed`) VALUES ('2015-01-13 08:14:53', NULL, NULL, 'normal', 1, '2015-01-13 08:14:53', 0, NULL, NULL, 1, 1, 1)[0m
Saving a log entry on create for Substitution record 2
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:53', 'vramanan', NULL, 2, '', 'create', '2015-01-13 08:14:53', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#assign_substitute_for_coach as HTML
  Parameters: {"coach_session_id"=>1, "coach_id"=>1, "assigned_coach"=>1}
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 3 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 1 LIMIT 1[0m
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 1) ORDER BY substitutions.id DESC LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 1 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`updated_at`, `grabbed_at`, `reason`, `session_type`, `coach_session_id`, `created_at`, `cancelled`, `lang_id`, `was_reassigned`, `grabber_coach_id`, `coach_id`, `grabbed`) VALUES ('2015-01-13 08:14:53', NULL, NULL, 'normal', 1, '2015-01-13 08:14:53', 0, NULL, 0, NULL, 1, 0)[0m
Saving a log entry on create for Substitution record 3
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:53', 'vramanan', NULL, 3, '', 'create', '2015-01-13 08:14:53', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 1 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 1) AND ((max_unit > 0)))[0m
  [1m[35mSQL (0.5ms)[0m  describe `unavailable_despite_templates`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`start_date`, `end_date`, `comments`, `coach_id`, `unavailability_type`, `coach_session_id`, `ancestry`, `created_at`, `updated_at`, `approval_status`) VALUES ('2015-01-13 09:00:00', '2015-01-13 09:30:00', 'Auto Approved - Coach requested Substitute', 1, 5, 1, NULL, '2015-01-13 08:14:53', '2015-01-13 08:14:53', 1)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 1
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('UnavailableDespiteTemplate', '2015-01-13 08:14:53', 'vramanan', NULL, 1, '', 'create', '2015-01-13 08:14:53', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `substitutions` SET `updated_at` = '2015-01-13 08:14:53', `grabbed_at` = '2015-01-13 08:14:53', `was_reassigned` = 1, `grabber_coach_id` = 3, `grabbed` = 1 WHERE `substitutions`.`id` = 3[0m
Saving a log entry on update for Substitution record 3
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:53', 'vramanan', 0, 3, 'was_reassigned', 'update', '2015-01-13 08:14:53', 1)
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:53', 'vramanan', NULL, 3, 'grabber_coach_id', 'update', '2015-01-13 08:14:53', 3)[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:53', 'vramanan', 0, 3, 'grabbed', 'update', '2015-01-13 08:14:53', 1)
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:53', 'vramanan', NULL, 3, 'grabbed_at', 'update', '2015-01-13 08:14:53', '2015-01-13 08:14:53')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 3 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 1) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = 3, `updated_at` = '2015-01-13 08:14:53' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 1
Saving a log entry on update for ConfirmedSession record 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:53', 'vramanan', 1, 1, 'coach_id', 'update', '2015-01-13 08:14:53', 3)[0m
  [1m[35mSessionMetadata Load (0.1ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 1) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 3 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 1) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `reassigned` = 1, `updated_at` = '2015-01-13 08:14:53' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 1[0m
Saving a log entry on update for ConfirmedSession record 1
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:53', 'vramanan', NULL, 1, 'reassigned', 'update', '2015-01-13 08:14:53', 1)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 1 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  describe `system_notifications`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `system_notifications` (`recipient_type`, `notification_id`, `target_id`, `created_at`, `updated_at`, `status`, `recipient_id`, `raw_message`) VALUES ('Account', NULL, NULL, '2015-01-13 08:14:53', '2015-01-13 08:14:53', 0, 3, 'You have been assigned a <b>Arabic</b> session on <b>January 13, 2015 04:00 AM</b>.')[0m
Saving a log entry on create for SystemNotification record 1
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SystemNotification', '2015-01-13 08:14:53', 'vramanan', NULL, 1, '', 'create', '2015-01-13 08:14:53', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 1 LIMIT 1
  [1m[36mSubstitution Load (0.1ms)[0m  [1mSELECT `substitutions`.* FROM `substitutions` WHERE (coach_id = NULL and coach_session_id = 1 ) ORDER BY id desc LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 1 LIMIT 1
Completed 200 OK in 72ms (Views: 0.5ms | ActiveRecord: 19.0ms)
  [1m[36mSQL (38.5ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email683@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email683@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'vramanan', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:53', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:53', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 4
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:53', 'vramanan', NULL, 4, '', 'create', '2015-01-13 08:14:53', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:53', '2015-01-13 08:14:53')
Saving a log entry on create for SupportLanguage record 2
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:53', NULL, NULL, 2, '', 'create', '2015-01-13 08:14:53', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 4 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'rajkumar@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'rajkumar', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:53', NULL, 1, NULL, '2015-01-13 08:14:53', 'rajkumar', NULL)
Saving a log entry on create for Coach record 5
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:53', 'vramanan', NULL, 5, '', 'create', '2015-01-13 08:14:53', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 5
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:53', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:53', 'ReflexLanguage', NULL, 'KLE')[0m
Saving a log entry on create for Language record 3
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:53', 'vramanan', NULL, 3, '', 'create', '2015-01-13 08:14:53', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 3 AND (`qualifications`.coach_id = 5 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 3 LIMIT 1
  [1m[36mCoachManager Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 5 LIMIT 1[0m
  [1m[35mCoach Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 5 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 5 and language_id = 3)[0m
  [1m[35mCoachManager Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 5 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (5, '2015-01-13 08:14:54', 10, NULL, 3, '2015-01-13 08:14:54')[0m
Saving a log entry on create for Qualification record 3
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:54', 'vramanan', NULL, 3, '', 'create', '2015-01-13 08:14:54', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`coach_showed_up`, `external_village_id`, `session_status`, `coach_id`, `type`, `eschool_session_id`, `topic_id`, `session_start_time`, `session_end_time`, `attendance_count`, `single_number_unit`, `created_at`, `name`, `cancelled`, `reassigned`, `recurring_schedule_id`, `seconds_prior_to_session`, `language_id`, `number_of_seats`, `updated_at`, `cancellation_reason`, `appointment_type_id`, `language_identifier`) VALUES (0, NULL, 1, 18, 'ConfirmedSession', 345698, NULL, '2015-01-13 10:00:00', '2015-01-13 10:30:00', NULL, 1, '2015-01-13 08:14:54', NULL, 0, NULL, NULL, NULL, 3, 0, '2015-01-13 08:14:54', NULL, NULL, 'KLE')[0m
Saving a log entry on create for ConfirmedSession record 2
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:54', 'vramanan', NULL, 2, '', 'create', '2015-01-13 08:14:54', NULL)
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 2) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 2 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`updated_at`, `grabbed_at`, `reason`, `session_type`, `coach_session_id`, `created_at`, `cancelled`, `lang_id`, `was_reassigned`, `grabber_coach_id`, `coach_id`, `grabbed`) VALUES ('2015-01-13 08:14:54', NULL, 'Electricity Outage', 'normal', 2, '2015-01-13 08:14:54', 0, NULL, NULL, NULL, 5, 0)[0m
Saving a log entry on create for Substitution record 4
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:54', 'vramanan', NULL, 4, '', 'create', '2015-01-13 08:14:54', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#cancel_substitution as HTML
  Parameters: {"sub_id"=>4, "notice"=>true, "reason"=>"Electricity Outage"}
  [1m[35mSubstitution Load (0.3ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE `substitutions`.`id` = 4 LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 2 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 3 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `substitutions` SET `updated_at` = '2015-01-13 08:14:54', `cancelled` = 1 WHERE `substitutions`.`id` = 4
Saving a log entry on update for Substitution record 4
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:54', 'vramanan', 0, 4, 'cancelled', 'update', '2015-01-13 08:14:54', 1)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoach Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 5 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `updated_at` = '2015-01-13 08:14:54', `cancellation_reason` = 'Electricity Outage' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 2[0m
Saving a log entry on update for ConfirmedSession record 2
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:54', 'vramanan', NULL, 2, 'cancellation_reason', 'update', '2015-01-13 08:14:54', 'Electricity Outage')
  [1m[36mSessionMetadata Load (0.1ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 2) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 19ms (Views: 2.6ms | ActiveRecord: 49.6ms)
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'Ven' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'Ven') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'Ven@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'Ven@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'Ven', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:54', NULL, 1, NULL, '2015-01-13 08:14:54', 'Ven', NULL)[0m
Saving a log entry on create for Coach record 6
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:54', 'vramanan', NULL, 6, '', 'create', '2015-01-13 08:14:54', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 6
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:54', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:54', 'TotaleLanguage', NULL, 'ARA')
Saving a log entry on create for Language record 4
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:54', 'vramanan', NULL, 4, '', 'create', '2015-01-13 08:14:54', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 4 AND (`qualifications`.coach_id = 6 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 4 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 6 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 6 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 6 and language_id = 4)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 6 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (6, '2015-01-13 08:14:54', 10, NULL, 4, '2015-01-13 08:14:54')
Saving a log entry on create for Qualification record 4
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:54', 'vramanan', NULL, 4, '', 'create', '2015-01-13 08:14:54', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 6 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`coach_showed_up`, `external_village_id`, `session_status`, `coach_id`, `type`, `eschool_session_id`, `topic_id`, `session_start_time`, `session_end_time`, `attendance_count`, `single_number_unit`, `created_at`, `name`, `cancelled`, `reassigned`, `recurring_schedule_id`, `seconds_prior_to_session`, `language_id`, `number_of_seats`, `updated_at`, `cancellation_reason`, `appointment_type_id`, `language_identifier`) VALUES (0, NULL, 1, 6, 'ConfirmedSession', 989648, NULL, '2015-01-13 10:00:00', '2015-01-13 10:30:00', NULL, 1, '2015-01-13 08:14:54', NULL, 0, NULL, NULL, NULL, 3, 0, '2015-01-13 08:14:54', NULL, NULL, 'KLE')
Saving a log entry on create for ConfirmedSession record 3
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:54', 'vramanan', NULL, 3, '', 'create', '2015-01-13 08:14:54', NULL)[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 3) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 3 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `substitutions` (`updated_at`, `grabbed_at`, `reason`, `session_type`, `coach_session_id`, `created_at`, `cancelled`, `lang_id`, `was_reassigned`, `grabber_coach_id`, `coach_id`, `grabbed`) VALUES ('2015-01-13 08:14:54', NULL, 'Electricity Outage', 'normal', 3, '2015-01-13 08:14:54', 1, NULL, NULL, NULL, 5, 0)
Saving a log entry on create for Substitution record 5
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:54', 'vramanan', NULL, 5, '', 'create', '2015-01-13 08:14:54', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#cancel_substitution as HTML
  Parameters: {"sub_id"=>4, "notice"=>true, "reason"=>"Electricity Outage"}
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 989648 LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`eschool_session_id` = 989648 LIMIT 1
  [1m[36mSubstitution Load (0.2ms)[0m  [1mSELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 3) ORDER BY substitutions.id DESC LIMIT 1[0m
  [1m[35mCoachSession Load (0.1ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 3 LIMIT 1
Completed 500 Internal Server Error in 5ms (Views: 0.4ms | ActiveRecord: 6.8ms)
  [1m[36mSQL (34.7ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'rajkumar@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'rajkumar', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:54', NULL, 1, NULL, '2015-01-13 08:14:54', 'rajkumar', NULL)[0m
Saving a log entry on create for Coach record 7
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:54', 'vramanan', NULL, 7, '', 'create', '2015-01-13 08:14:54', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 7
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:54', '2015-01-13 08:14:54')
Saving a log entry on create for SupportLanguage record 3
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:54', NULL, NULL, 3, '', 'create', '2015-01-13 08:14:54', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:54', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:54', 'ReflexLanguage', NULL, 'KLE')
Saving a log entry on create for Language record 5
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:54', 'vramanan', NULL, 5, '', 'create', '2015-01-13 08:14:54', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 5 AND (`qualifications`.coach_id = 7 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 5 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 7 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 7 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 7 and language_id = 5)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 7 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (7, '2015-01-13 08:14:54', 10, NULL, 5, '2015-01-13 08:14:54')
Saving a log entry on create for Qualification record 5
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:54', 'vramanan', NULL, 5, '', 'create', '2015-01-13 08:14:54', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 7
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 7
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `accounts` SET `updated_at` = '2015-01-13 08:14:54', `created_at` = '2015-01-12 08:14:54' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 7[0m
Saving a log entry on update for Coach record 7
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE (`qualifications`.coach_id = 7 AND (max_unit > 0))[0m
  [1m[35mSupportLanguage Load (0.1ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 7 LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions`
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.4ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `coach_sessions` (`coach_showed_up`, `external_village_id`, `session_status`, `coach_id`, `type`, `eschool_session_id`, `topic_id`, `session_start_time`, `session_end_time`, `attendance_count`, `single_number_unit`, `created_at`, `name`, `cancelled`, `reassigned`, `recurring_schedule_id`, `seconds_prior_to_session`, `language_id`, `number_of_seats`, `updated_at`, `cancellation_reason`, `appointment_type_id`, `language_identifier`) VALUES (0, NULL, 1, 18, 'ConfirmedSession', 345698, NULL, '2015-01-13 10:00:00', '2015-01-13 10:30:00', NULL, 1, '2015-01-13 08:14:54', NULL, 0, NULL, NULL, NULL, 5, 0, '2015-01-13 08:14:54', NULL, NULL, 'KLE')
Saving a log entry on create for ConfirmedSession record 4
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:54', 'vramanan', NULL, 4, '', 'create', '2015-01-13 08:14:54', NULL)[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 4) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 4 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `substitutions` (`updated_at`, `grabbed_at`, `reason`, `session_type`, `coach_session_id`, `created_at`, `cancelled`, `lang_id`, `was_reassigned`, `grabber_coach_id`, `coach_id`, `grabbed`) VALUES ('2015-01-13 08:14:54', NULL, NULL, 'normal', 4, '2015-01-13 08:14:54', 0, NULL, NULL, NULL, 7, 0)
Saving a log entry on create for Substitution record 6
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:54', 'vramanan', NULL, 6, '', 'create', '2015-01-13 08:14:54', NULL)[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#check_sub_policy_violation as JS
  Parameters: {"coach_id"=>7, "start_time"=>Tue Jan 13 08:00:00 UTC 2015}
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 7 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.4ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 7) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 7) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mdescribe `preference_settings`[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `preference_settings` (`substitution_alerts_display_time`, `no_of_home_events`, `notifications_email_type`, `substitution_policy_email`, `no_of_notifications_to_display`, `substitution_alerts_email_sending_schedule`, `no_of_home_substitutions`, `default_language_for_master_scheduler`, `no_of_substitution_alerts_to_display`, `daily_cap`, `session_alerts_display_time`, `substitution_alerts_email`, `coach_not_present_alert`, `no_of_home_announcements`, `notifications_email`, `no_of_learner_dashboard_records`, `created_at`, `account_id`, `mails_sent`, `timeoff_request_email`, `calendar_notices_email`, `notifications_display_time`, `no_of_calendar_notices_to_display`, `substitution_alerts_sms`, `calendar_notices_display_time`, `updated_at`, `substitution_alerts_email_type`, `no_of_home_notifications`, `substitution_policy_email_type`, `notifications_email_sending_schedule`, `timeoff_request_email_type`, `substitution_policy_email_sending_schedule`, `calendar_notices_email_type`, `start_page`, `calendar_notices_email_sending_schedule`) VALUES (86400, 5, 'PER', NULL, NULL, 'IMMEDIATELY', 5, NULL, 5, NULL, 10, NULL, NULL, 5, NULL, NULL, '2015-01-13 08:14:54', 7, 0, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:14:54', 'PER', 5, NULL, 'IMMEDIATELY', NULL, NULL, 'PER', 'CALENDAR', 'IMMEDIATELY')
Saving a log entry on create for PreferenceSetting record 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('PreferenceSetting', '2015-01-13 08:14:54', 'rajkumar', NULL, 1, '', 'create', '2015-01-13 08:14:54', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 7 AND session_start_time < '2015-01-13 08:24:54' AND session_start_time >= '2015-01-13 08:14:54' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 7 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 7 and session_start_time = '1970-01-17 10:45:36' and cancelled is false) LIMIT 1[0m
  [1m[35mSubstitution Load (0.9ms)[0m  Select DISTINCT * from substitutions s join coach_sessions c on s.coach_session_id = c.id join unavailable_despite_templates u where c.type NOT IN ('ExtraSession','Appointment') and s.coach_id = 7 and c.session_start_time >= '1970-01-01 05:00:00' and c.session_start_time < '1970-02-01 04:59:59' and u.coach_session_id = c.id and (s.coach_id != s.grabber_coach_id OR s.grabber_coach_id is null) and u.unavailability_type in (1,5) order by s.created_at, u.created_at desc;
Completed 200 OK in 66ms (Views: 24.4ms | ActiveRecord: 47.4ms)
  [1m[36mSQL (37.0ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email553@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email553@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'vramanan', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:54', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:54', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 8
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:54', 'rajkumar', NULL, 8, '', 'create', '2015-01-13 08:14:54', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:54', '2015-01-13 08:14:54')
Saving a log entry on create for SupportLanguage record 4
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:54', NULL, NULL, 4, '', 'create', '2015-01-13 08:14:54', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 8 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'rajkumar@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'rajkumar', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:54', NULL, 1, NULL, '2015-01-13 08:14:54', 'rajkumar', NULL)
Saving a log entry on create for Coach record 9
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:54', 'rajkumar', NULL, 9, '', 'create', '2015-01-13 08:14:54', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 9
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:54', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:54', 'ReflexLanguage', NULL, 'KLE')[0m
Saving a log entry on create for Language record 6
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:54', 'rajkumar', NULL, 6, '', 'create', '2015-01-13 08:14:54', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 6 AND (`qualifications`.coach_id = 9 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 6 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 9 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 9 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 9 and language_id = 6)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 9 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (9, '2015-01-13 08:14:54', 10, NULL, 6, '2015-01-13 08:14:54')[0m
Saving a log entry on create for Qualification record 6
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:54', 'rajkumar', NULL, 6, '', 'create', '2015-01-13 08:14:54', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'HEB' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (42.7ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email821@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email821@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'test21', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:55', NULL, NULL, 'en-US', 'Coach', NULL, NULL, NULL, '2015-01-13 08:14:55', 'test21', NULL, NULL)[0m
Saving a log entry on create for Account record 10
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:55', 'rajkumar', NULL, 10, '', 'create', '2015-01-13 08:14:55', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.3ms)[0m  [1mUPDATE `accounts` SET `created_at` = '2015-01-12 08:14:55', `updated_at` = '2015-01-13 08:14:55' WHERE `accounts`.`id` = 10[0m
Saving a log entry on update for Account record 10
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:55', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:55', 'TotaleLanguage', NULL, 'ARA')
Saving a log entry on create for Language record 7
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:55', 'rajkumar', NULL, 7, '', 'create', '2015-01-13 08:14:55', NULL)[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachManager Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 10 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 10 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 10 and language_id = 7)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 10 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (10, '2015-01-13 08:14:55', 10, NULL, 7, '2015-01-13 08:14:55')
Saving a log entry on create for Qualification record 7
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:55', 'rajkumar', NULL, 7, '', 'create', '2015-01-13 08:14:55', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:55', '2015-01-13 08:14:55')[0m
Saving a log entry on create for SupportLanguage record 5
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:55', NULL, NULL, 5, '', 'create', '2015-01-13 08:14:55', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 10 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `accounts` SET `updated_at` = '2015-01-13 08:14:55', `created_at` = '2015-01-13 08:14:55' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 10
Saving a log entry on update for Coach record 10
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'rajkumar@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'rajkumar', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:55', NULL, 1, NULL, '2015-01-13 08:14:55', 'rajkumar', NULL)
Saving a log entry on create for Coach record 11
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:55', 'rajkumar', NULL, 11, '', 'create', '2015-01-13 08:14:55', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 11
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:55', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:55', 'ReflexLanguage', NULL, 'KLE')[0m
Saving a log entry on create for Language record 8
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:55', 'rajkumar', NULL, 8, '', 'create', '2015-01-13 08:14:55', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 8 AND (`qualifications`.coach_id = 11 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 8 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 11 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 11 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 11 and language_id = 8)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 11 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (11, '2015-01-13 08:14:55', 10, NULL, 8, '2015-01-13 08:14:55')[0m
Saving a log entry on create for Qualification record 8
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:55', 'rajkumar', NULL, 8, '', 'create', '2015-01-13 08:14:55', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions`
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'HEB' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (31.8ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email185@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email185@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'vramanan', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:55', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:55', 'vramanan', NULL, NULL)
Saving a log entry on create for Account record 12
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:55', 'rajkumar', NULL, 12, '', 'create', '2015-01-13 08:14:55', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:55', '2015-01-13 08:14:55')[0m
Saving a log entry on create for SupportLanguage record 6
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:55', NULL, NULL, 6, '', 'create', '2015-01-13 08:14:55', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 12 LIMIT 1
  Processing by SubstitutionController#substitutions as HTML
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 12) AND ((max_unit is NULL)))[0m
  [1m[35mSubstitution Load (0.6ms)[0m  SELECT `substitutions`.`id` AS t0_r0, `substitutions`.`coach_id` AS t0_r1, `substitutions`.`grabber_coach_id` AS t0_r2, `substitutions`.`grabbed` AS t0_r3, `substitutions`.`lang_id` AS t0_r4, `substitutions`.`coach_session_id` AS t0_r5, `substitutions`.`created_at` AS t0_r6, `substitutions`.`updated_at` AS t0_r7, `substitutions`.`grabbed_at` AS t0_r8, `substitutions`.`cancelled` AS t0_r9, `substitutions`.`was_reassigned` AS t0_r10, `substitutions`.`session_type` AS t0_r11, `substitutions`.`reason` AS t0_r12, `coach_sessions`.`id` AS t1_r0, `coach_sessions`.`eschool_session_id` AS t1_r1, `coach_sessions`.`session_start_time` AS t1_r2, `coach_sessions`.`created_at` AS t1_r3, `coach_sessions`.`updated_at` AS t1_r4, `coach_sessions`.`cancelled` AS t1_r5, `coach_sessions`.`external_village_id` AS t1_r6, `coach_sessions`.`language_identifier` AS t1_r7, `coach_sessions`.`single_number_unit` AS t1_r8, `coach_sessions`.`number_of_seats` AS t1_r9, `coach_sessions`.`attendance_count` AS t1_r10, `coach_sessions`.`coach_showed_up` AS t1_r11, `coach_sessions`.`seconds_prior_to_session` AS t1_r12, `coach_sessions`.`recurring_schedule_id` AS t1_r13, `coach_sessions`.`coach_id` AS t1_r14, `coach_sessions`.`session_status` AS t1_r15, `coach_sessions`.`type` AS t1_r16, `coach_sessions`.`name` AS t1_r17, `coach_sessions`.`session_end_time` AS t1_r18, `coach_sessions`.`language_id` AS t1_r19, `coach_sessions`.`cancellation_reason` AS t1_r20, `coach_sessions`.`topic_id` AS t1_r21, `coach_sessions`.`reassigned` AS t1_r22, `coach_sessions`.`appointment_type_id` AS t1_r23, `accounts`.`id` AS t2_r0, `accounts`.`user_name` AS t2_r1, `accounts`.`full_name` AS t2_r2, `accounts`.`preferred_name` AS t2_r3, `accounts`.`rs_email` AS t2_r4, `accounts`.`personal_email` AS t2_r5, `accounts`.`skype_id` AS t2_r6, `accounts`.`primary_phone` AS t2_r7, `accounts`.`secondary_phone` AS t2_r8, `accounts`.`birth_date` AS t2_r9, `accounts`.`hire_date` AS t2_r10, `accounts`.`bio` AS t2_r11, `accounts`.`manager_notes` AS t2_r12, `accounts`.`active` AS t2_r13, `accounts`.`manager_id` AS t2_r14, `accounts`.`created_at` AS t2_r15, `accounts`.`updated_at` AS t2_r16, `accounts`.`type` AS t2_r17, `accounts`.`region_id` AS t2_r18, `accounts`.`next_session_alert_in` AS t2_r19, `accounts`.`last_logout` AS t2_r20, `accounts`.`country` AS t2_r21, `accounts`.`native_language` AS t2_r22, `accounts`.`other_languages` AS t2_r23, `accounts`.`address` AS t2_r24, `accounts`.`lotus_qualified` AS t2_r25, `accounts`.`next_substitution_alert_in` AS t2_r26, `accounts`.`mobile_phone` AS t2_r27, `accounts`.`sessions_allowed_per_week` AS t2_r28, `accounts`.`is_supervisor` AS t2_r29, `accounts`.`mobile_country_code` AS t2_r30, `accounts`.`aim_id` AS t2_r31, `accounts`.`primary_country_code` AS t2_r32, `accounts`.`photo_file_name` AS t2_r33, `accounts`.`photo_content_type` AS t2_r34, `accounts`.`photo_file_size` AS t2_r35, `accounts`.`photo_file` AS t2_r36, `accounts`.`coach_guid` AS t2_r37, `languages`.`id` AS t3_r0, `languages`.`identifier` AS t3_r1, `languages`.`created_at` AS t3_r2, `languages`.`updated_at` AS t3_r3, `languages`.`last_pushed_week` AS t3_r4, `languages`.`type` AS t3_r5, `languages`.`duration` AS t3_r6, `languages`.`connection_type` AS t3_r7, `languages`.`external_scheduler` AS t3_r8 FROM `substitutions` LEFT OUTER JOIN `coach_sessions` ON `coach_sessions`.`id` = `substitutions`.`coach_session_id` LEFT OUTER JOIN `accounts` ON `accounts`.`id` = `substitutions`.`coach_id` AND `accounts`.`type` = 'Coach' LEFT OUTER JOIN `coach_sessions` `languages_substitutions_join` ON `substitutions`.`coach_session_id` = `languages_substitutions_join`.`id` LEFT OUTER JOIN `languages` ON `languages`.`id` = `languages_substitutions_join`.`language_id` WHERE (coach_sessions.language_identifier IN (NULL) AND coach_sessions.session_start_time >= '2015-01-13 07:31:00' AND coach_sessions.session_start_time < '2015-01-20 08:00:00' AND substitutions.cancelled = 0 AND grabbed = 0) ORDER BY coach_sessions.session_start_time
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-NED-L' OR identifier = 'TMM-NED-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-NED-P' OR identifier = 'TMM-NED-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ENG-L' OR identifier = 'TMM-ENG-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ENG-P' OR identifier = 'TMM-ENG-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-FRA-L' OR identifier = 'TMM-FRA-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-FRA-P' OR identifier = 'TMM-FRA-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-MCH-L' OR identifier = 'TMM-MCH-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-DEU-L' OR identifier = 'TMM-DEU-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-DEU-P' OR identifier = 'TMM-DEU-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ITA-L' OR identifier = 'TMM-ITA-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ITA-P' OR identifier = 'TMM-ITA-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ESP-L' OR identifier = 'TMM-ESP-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ESP-P' OR identifier = 'TMM-ESP-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mAlert Load (0.3ms)[0m  SELECT `alerts`.* FROM `alerts` WHERE (active = 1) ORDER BY alerts.id DESC LIMIT 1
Rendered shared/_editor_authenticate.html.erb (4.6ms)
Rendered shared/_header.html.erb (7.5ms)
Rendered shared/_default_navigation.html.erb (13.9ms)
Rendered shared/_profile_links.html.erb (1.5ms)
Rendered shared/_body_content.html.erb (18.6ms)
Completed 200 OK in 78ms (Views: 57.6ms | ActiveRecord: 135.3ms)
  [1m[36mSQL (35.8ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email624@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email624@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'test21', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:55', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:55', 'test21', NULL, NULL)[0m
Saving a log entry on create for Account record 13
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:55', 'vramanan', NULL, 13, '', 'create', '2015-01-13 08:14:55', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:55', '2015-01-13 08:14:55')
Saving a log entry on create for SupportLanguage record 7
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:55', NULL, NULL, 7, '', 'create', '2015-01-13 08:14:55', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 13 LIMIT 1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'KLE' OR identifier = 'KLE') ORDER BY languages.id DESC LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'rajkumar@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'rajkumar', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:55', NULL, 1, NULL, '2015-01-13 08:14:55', 'rajkumar', NULL)[0m
Saving a log entry on create for Coach record 14
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:55', 'vramanan', NULL, 14, '', 'create', '2015-01-13 08:14:55', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 14
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:55', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:55', 'ReflexLanguage', NULL, 'KLE')
Saving a log entry on create for Language record 9
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:55', 'vramanan', NULL, 9, '', 'create', '2015-01-13 08:14:55', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 9 AND (`qualifications`.coach_id = 14 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 9 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 14 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 14 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 14 and language_id = 9)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 14 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (14, '2015-01-13 08:14:55', 10, NULL, 9, '2015-01-13 08:14:55')
Saving a log entry on create for Qualification record 9
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:55', 'vramanan', NULL, 9, '', 'create', '2015-01-13 08:14:55', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 14 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`coach_showed_up`, `external_village_id`, `session_status`, `coach_id`, `type`, `eschool_session_id`, `topic_id`, `session_start_time`, `session_end_time`, `attendance_count`, `single_number_unit`, `created_at`, `name`, `cancelled`, `reassigned`, `recurring_schedule_id`, `seconds_prior_to_session`, `language_id`, `number_of_seats`, `updated_at`, `cancellation_reason`, `appointment_type_id`, `language_identifier`) VALUES (0, NULL, 1, 14, 'ConfirmedSession', NULL, NULL, '2015-01-13 10:00:00', '2015-01-13 10:30:00', NULL, 1, '2015-01-13 08:14:55', NULL, 0, NULL, NULL, NULL, 9, 0, '2015-01-13 08:14:55', NULL, NULL, 'KLE')
Saving a log entry on create for ConfirmedSession record 5
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:55', 'vramanan', NULL, 5, '', 'create', '2015-01-13 08:14:55', NULL)[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 5) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 14 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 14) AND ((max_unit > 0)))
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`start_date`, `end_date`, `comments`, `coach_id`, `unavailability_type`, `coach_session_id`, `ancestry`, `created_at`, `updated_at`, `approval_status`) VALUES ('2015-01-13 10:00:00', '2015-01-13 10:30:00', 'Auto Approved - Coach requested Substitute', 14, 1, 5, NULL, '2015-01-13 08:14:55', '2015-01-13 08:14:55', 1)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 2
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('UnavailableDespiteTemplate', '2015-01-13 08:14:55', 'vramanan', NULL, 2, '', 'create', '2015-01-13 08:14:55', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 5 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`updated_at`, `grabbed_at`, `reason`, `session_type`, `coach_session_id`, `created_at`, `cancelled`, `lang_id`, `was_reassigned`, `grabber_coach_id`, `coach_id`, `grabbed`) VALUES ('2015-01-13 08:14:55', NULL, NULL, 'normal', 5, '2015-01-13 08:14:55', 0, NULL, 0, NULL, 14, 0)
Saving a log entry on create for Substitution record 7
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:55', 'vramanan', NULL, 7, '', 'create', '2015-01-13 08:14:55', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00' AND id <> 5) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:14:55' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 5
Saving a log entry on update for ConfirmedSession record 5
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:55', 'vramanan', 14, 5, 'coach_id', 'update', '2015-01-13 08:14:55', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 9 OR identifier = 9) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.1ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoach Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '9')[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 9 OR identifier = 9) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoachManager Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '9')
  [1m[36mTriggerEvent Load (0.2ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1[0m
  [1m[35mNotification Load (0.1ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1
  Processing by SubstitutionController#substitutions as HTML
Completed 500 Internal Server Error in 1ms
  [1m[36mSQL (54.1ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email504@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email504@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'vramanan', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:55', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:55', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 15
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:55', 'test21', NULL, 15, '', 'create', '2015-01-13 08:14:55', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.5ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:55', '2015-01-13 08:14:55')
Saving a log entry on create for SupportLanguage record 8
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:55', NULL, NULL, 8, '', 'create', '2015-01-13 08:14:55', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 15 LIMIT 1[0m
  Processing by SubstitutionController#reason_for_sub_request as JS
Rendered shared/_show_reasons.html.erb (0.9ms)
Rendered substitution/_reason_for_sub_request.html.erb (3.4ms)
Completed 200 OK in 14ms (Views: 12.7ms | ActiveRecord: 104.7ms)
  [1m[35mSQL (37.6ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email960@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email960@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'vramanan', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:56', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:56', 'vramanan', NULL, NULL)
Saving a log entry on create for Account record 16
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:56', 'vramanan', NULL, 16, '', 'create', '2015-01-13 08:14:56', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:56', '2015-01-13 08:14:56')[0m
Saving a log entry on create for SupportLanguage record 9
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:56', NULL, NULL, 9, '', 'create', '2015-01-13 08:14:56', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 16 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'TestCoach@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'TestCoach', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:56', NULL, 1, NULL, '2015-01-13 08:14:56', 'TestCoach', NULL)[0m
Saving a log entry on create for Coach record 17
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:56', 'vramanan', NULL, 17, '', 'create', '2015-01-13 08:14:56', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 17
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'TotaleLanguage', NULL, 'ARA')
Saving a log entry on create for Language record 10
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 10, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 10 AND (`qualifications`.coach_id = 17 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 10 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 17 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 17 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 17 and language_id = 10)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 17 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (17, '2015-01-13 08:14:56', 10, NULL, 10, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 10
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 10, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'TotaleLanguage', NULL, 'CHI')
Saving a log entry on create for Language record 11
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 11, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 11 AND (`qualifications`.coach_id = 17 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 11 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 17 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 17 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 17 and language_id = 11)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 17 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (17, '2015-01-13 08:14:56', 10, NULL, 11, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 11
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 11, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'TotaleLanguage', NULL, 'ENG')
Saving a log entry on create for Language record 12
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 12, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 12 AND (`qualifications`.coach_id = 17 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 12 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 17 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 17 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 17 and language_id = 12)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 17 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (17, '2015-01-13 08:14:56', 10, NULL, 12, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 12
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 12, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#request_substitute_for_coach as JS
  Parameters: {"lang_identifier"=>"ARA", "time"=>"2010-09-06 11:00:00", "current_coach_id"=>17}
  [1m[36mCoachSession Load (0.5ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 and coach_id = 17 and session_start_time = '2010-09-06 11:00:00') ORDER BY coach_sessions.id DESC LIMIT 1[0m
Completed 500 Internal Server Error in 4ms (Views: 0.5ms | ActiveRecord: 49.1ms)
  [1m[35mSQL (31.5ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email655@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email655@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'vramanan', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:56', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:56', 'vramanan', NULL, NULL)
Saving a log entry on create for Account record 18
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:56', 'vramanan', NULL, 18, '', 'create', '2015-01-13 08:14:56', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:56', '2015-01-13 08:14:56')[0m
Saving a log entry on create for SupportLanguage record 10
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:56', NULL, NULL, 10, '', 'create', '2015-01-13 08:14:56', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 18 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'TestCoach@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'TestCoach', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:56', NULL, 1, NULL, '2015-01-13 08:14:56', 'TestCoach', NULL)[0m
Saving a log entry on create for Coach record 19
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:56', 'vramanan', NULL, 19, '', 'create', '2015-01-13 08:14:56', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 19
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'TotaleLanguage', NULL, 'ARA')
Saving a log entry on create for Language record 13
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 13, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 13 AND (`qualifications`.coach_id = 19 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 13 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 19 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 19 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 19 and language_id = 13)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 19 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (19, '2015-01-13 08:14:56', 10, NULL, 13, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 13
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 13, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'TotaleLanguage', NULL, 'CHI')
Saving a log entry on create for Language record 14
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 14, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 14 AND (`qualifications`.coach_id = 19 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 14 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 19 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 19 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 19 and language_id = 14)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 19 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (19, '2015-01-13 08:14:56', 10, NULL, 14, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 14
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 14, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'TotaleLanguage', NULL, 'ENG')
Saving a log entry on create for Language record 15
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 15, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 15 AND (`qualifications`.coach_id = 19 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 15 LIMIT 1[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 19 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 19 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 19 and language_id = 15)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 19 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (19, '2015-01-13 08:14:56', 10, NULL, 15, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 15
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 15, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#request_substitute_for_coach as JS
  Parameters: {"lang_identifier"=>"ARA", "time"=>"2010-09-06 11:00:00", "request_from"=>"dashboard", "current_coach_id"=>19}
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 and coach_id = 19 and session_start_time = '2010-09-06 11:00:00') ORDER BY coach_sessions.id DESC LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (Views: 0.4ms | ActiveRecord: 42.8ms)
  [1m[35mSQL (35.0ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email971@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email971@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'vramanan', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:56', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:56', 'vramanan', NULL, NULL)
Saving a log entry on create for Account record 20
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:56', 'vramanan', NULL, 20, '', 'create', '2015-01-13 08:14:56', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:56', '2015-01-13 08:14:56')[0m
Saving a log entry on create for SupportLanguage record 11
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:56', NULL, NULL, 11, '', 'create', '2015-01-13 08:14:56', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 20 LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'TestCoach@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'TestCoach', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:56', NULL, 1, NULL, '2015-01-13 08:14:56', 'TestCoach', NULL)[0m
Saving a log entry on create for Coach record 21
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:56', 'vramanan', NULL, 21, '', 'create', '2015-01-13 08:14:56', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 21
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'TotaleLanguage', NULL, 'ARA')
Saving a log entry on create for Language record 16
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 16, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 16 AND (`qualifications`.coach_id = 21 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 16 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 21 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 21 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 21 and language_id = 16)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 21 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (21, '2015-01-13 08:14:56', 10, NULL, 16, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 16
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 16, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'TotaleLanguage', NULL, 'CHI')
Saving a log entry on create for Language record 17
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 17, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 17 AND (`qualifications`.coach_id = 21 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 17 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 21 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 21 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 21 and language_id = 17)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 21 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (21, '2015-01-13 08:14:56', 10, NULL, 17, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 17
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 17, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'TotaleLanguage', NULL, 'ENG')
Saving a log entry on create for Language record 18
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 18, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 18 AND (`qualifications`.coach_id = 21 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 18 LIMIT 1[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 21 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 21 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 21 and language_id = 18)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 21 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (21, '2015-01-13 08:14:56', 10, NULL, 18, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 18
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 18, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (44.7ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email709@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email709@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'vramanan', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:56', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:56', 'vramanan', NULL, NULL)
Saving a log entry on create for Account record 22
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:56', 'vramanan', NULL, 22, '', 'create', '2015-01-13 08:14:56', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:56', '2015-01-13 08:14:56')[0m
Saving a log entry on create for SupportLanguage record 12
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:56', NULL, NULL, 12, '', 'create', '2015-01-13 08:14:56', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 22 LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'TestCoach@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'TestCoach', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:56', NULL, 1, NULL, '2015-01-13 08:14:56', 'TestCoach', NULL)[0m
Saving a log entry on create for Coach record 23
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:56', 'vramanan', NULL, 23, '', 'create', '2015-01-13 08:14:56', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 23
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'TotaleLanguage', NULL, 'ARA')
Saving a log entry on create for Language record 19
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 19, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 19 AND (`qualifications`.coach_id = 23 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 19 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 23 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 23 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 23 and language_id = 19)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 23 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (23, '2015-01-13 08:14:56', 10, NULL, 19, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 19
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 19, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'TotaleLanguage', NULL, 'CHI')
Saving a log entry on create for Language record 20
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 20, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 20 AND (`qualifications`.coach_id = 23 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 20 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 23 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 23 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 23 and language_id = 20)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 23 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (23, '2015-01-13 08:14:56', 10, NULL, 20, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 20
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 20, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'TotaleLanguage', NULL, 'ENG')
Saving a log entry on create for Language record 21
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 21, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 21 AND (`qualifications`.coach_id = 23 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 21 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 23 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 23 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 23 and language_id = 21)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 23 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (23, '2015-01-13 08:14:56', 10, NULL, 21, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 21
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 21, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (29.1ms)[0m  ROLLBACK
  [1m[36mSQL (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email192@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email192@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'vramanan', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:56', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:56', 'vramanan', NULL, NULL)
Saving a log entry on create for Account record 24
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:56', 'vramanan', NULL, 24, '', 'create', '2015-01-13 08:14:56', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:56', '2015-01-13 08:14:56')[0m
Saving a log entry on create for SupportLanguage record 13
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:56', NULL, NULL, 13, '', 'create', '2015-01-13 08:14:56', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 24 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'rajkumar@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'rajkumar', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:56', NULL, 1, NULL, '2015-01-13 08:14:56', 'rajkumar', NULL)[0m
Saving a log entry on create for Coach record 25
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:56', 'vramanan', NULL, 25, '', 'create', '2015-01-13 08:14:56', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 25
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'ReflexLanguage', NULL, 'KLE')
Saving a log entry on create for Language record 22
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 22, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 22 AND (`qualifications`.coach_id = 25 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 22 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 25 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 25 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 25 and language_id = 22)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 25 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (25, '2015-01-13 08:14:56', 10, NULL, 22, '2015-01-13 08:14:56')
Saving a log entry on create for Qualification record 22
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 22, '', 'create', '2015-01-13 08:14:56', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'HEB' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (48.4ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'rajkumar@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'rajkumar', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:56', NULL, 1, NULL, '2015-01-13 08:14:56', 'rajkumar', NULL)
Saving a log entry on create for Coach record 26
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:56', 'vramanan', NULL, 26, '', 'create', '2015-01-13 08:14:56', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 26
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:56', '2015-01-13 08:14:56')[0m
Saving a log entry on create for SupportLanguage record 14
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:56', NULL, NULL, 14, '', 'create', '2015-01-13 08:14:56', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:56', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:56', 'ReflexLanguage', NULL, 'KLE')[0m
Saving a log entry on create for Language record 23
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:56', 'vramanan', NULL, 23, '', 'create', '2015-01-13 08:14:56', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 23 AND (`qualifications`.coach_id = 26 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 23 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 26 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 26 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 26 and language_id = 23)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 26 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (26, '2015-01-13 08:14:56', 10, NULL, 23, '2015-01-13 08:14:56')[0m
Saving a log entry on create for Qualification record 23
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:56', 'vramanan', NULL, 23, '', 'create', '2015-01-13 08:14:56', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 26
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 26
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `accounts` SET `updated_at` = '2015-01-13 08:14:57', `created_at` = '2015-01-12 08:14:57' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 26
Saving a log entry on update for Coach record 26
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE (`qualifications`.coach_id = 26 AND (max_unit > 0))
  [1m[36mSupportLanguage Load (0.1ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mAccount Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 26 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 26 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`coach_showed_up`, `external_village_id`, `session_status`, `coach_id`, `type`, `eschool_session_id`, `topic_id`, `session_start_time`, `session_end_time`, `attendance_count`, `single_number_unit`, `created_at`, `name`, `cancelled`, `reassigned`, `recurring_schedule_id`, `seconds_prior_to_session`, `language_id`, `number_of_seats`, `updated_at`, `cancellation_reason`, `appointment_type_id`, `language_identifier`) VALUES (0, NULL, 1, 26, 'ConfirmedSession', NULL, NULL, '2015-01-13 12:00:00', '2015-01-13 12:30:00', NULL, 1, '2015-01-13 08:14:57', NULL, 0, NULL, NULL, NULL, 23, 0, '2015-01-13 08:14:57', NULL, NULL, 'KLE')
Saving a log entry on create for ConfirmedSession record 6
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:57', 'vramanan', NULL, 6, '', 'create', '2015-01-13 08:14:57', NULL)[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 6) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 26 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 26) AND ((max_unit > 0)))
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`start_date`, `end_date`, `comments`, `coach_id`, `unavailability_type`, `coach_session_id`, `ancestry`, `created_at`, `updated_at`, `approval_status`) VALUES ('2015-01-13 12:00:00', '2015-01-13 12:30:00', 'Auto Approved - Coach requested Substitute', 26, 1, 6, NULL, '2015-01-13 08:14:57', '2015-01-13 08:14:57', 1)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 3
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('UnavailableDespiteTemplate', '2015-01-13 08:14:57', 'vramanan', NULL, 3, '', 'create', '2015-01-13 08:14:57', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 6 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`updated_at`, `grabbed_at`, `reason`, `session_type`, `coach_session_id`, `created_at`, `cancelled`, `lang_id`, `was_reassigned`, `grabber_coach_id`, `coach_id`, `grabbed`) VALUES ('2015-01-13 08:14:57', NULL, NULL, 'normal', 6, '2015-01-13 08:14:57', 0, NULL, 0, NULL, 26, 0)
Saving a log entry on create for Substitution record 8
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:57', 'vramanan', NULL, 8, '', 'create', '2015-01-13 08:14:57', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND id <> 6) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:14:57' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 6
Saving a log entry on update for ConfirmedSession record 6
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:57', 'vramanan', 26, 6, 'coach_id', 'update', '2015-01-13 08:14:57', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 23 OR identifier = 23) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoach Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '23')[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 23 OR identifier = 23) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoachManager Load (0.6ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '23')
  [1m[36mTriggerEvent Load (0.1ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1[0m
  [1m[35mNotification Load (0.0ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1
  Processing by SubstitutionController#substitutions_alert as HTML
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 26 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.2ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 26) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 26) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `preference_settings` (`substitution_alerts_display_time`, `no_of_home_events`, `notifications_email_type`, `substitution_policy_email`, `no_of_notifications_to_display`, `substitution_alerts_email_sending_schedule`, `no_of_home_substitutions`, `default_language_for_master_scheduler`, `no_of_substitution_alerts_to_display`, `daily_cap`, `session_alerts_display_time`, `substitution_alerts_email`, `coach_not_present_alert`, `no_of_home_announcements`, `notifications_email`, `no_of_learner_dashboard_records`, `created_at`, `account_id`, `mails_sent`, `timeoff_request_email`, `calendar_notices_email`, `notifications_display_time`, `no_of_calendar_notices_to_display`, `substitution_alerts_sms`, `calendar_notices_display_time`, `updated_at`, `substitution_alerts_email_type`, `no_of_home_notifications`, `substitution_policy_email_type`, `notifications_email_sending_schedule`, `timeoff_request_email_type`, `substitution_policy_email_sending_schedule`, `calendar_notices_email_type`, `start_page`, `calendar_notices_email_sending_schedule`) VALUES (86400, 5, 'PER', NULL, NULL, 'IMMEDIATELY', 5, NULL, 5, NULL, 10, NULL, NULL, 5, NULL, NULL, '2015-01-13 08:14:57', 26, 0, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:14:57', 'PER', 5, NULL, 'IMMEDIATELY', NULL, NULL, 'PER', 'CALENDAR', 'IMMEDIATELY')[0m
Saving a log entry on create for PreferenceSetting record 2
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('PreferenceSetting', '2015-01-13 08:14:57', 'rajkumar', NULL, 2, '', 'create', '2015-01-13 08:14:57', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 26 AND session_start_time < '2015-01-13 08:24:57' AND session_start_time >= '2015-01-13 08:14:57' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1
  [1m[36mShownSubstitutions Load (0.1ms)[0m  [1mSELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 26 LIMIT 1[0m
  [1m[35mSubstitution Load (0.6ms)[0m  SELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions, qualifications, languages) on (coach_sessions.id = substitutions.coach_session_id and languages.identifier = coach_sessions.language_identifier and languages.id = qualifications.language_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:14:57' and coach_sessions.session_end_time > '2015-01-13 08:14:57' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL and qualifications.coach_id = 26) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 6 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 23 LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 6)) LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 26 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 26 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00')[0m
  [1m[35mLocalSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 26 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND action != 'create')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 26) AND ((max_unit > 0)))[0m
  [1m[35mCoachRecurringSchedule Load (0.3ms)[0m  SELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 26 and day_index = 2 and start_time = '12:00:00' and recurring_start_date <= '2015-01-13 12:00:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 12:00:00')) ORDER BY recurring_start_date DESC LIMIT 1
  [1m[36mCoachRecurringSchedule Load (0.2ms)[0m  [1mSELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 26 and day_index = 2 and start_time = '11:00:00' and recurring_start_date <= '2015-01-13 11:00:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 11:00:00')) ORDER BY recurring_start_date DESC LIMIT 1[0m
  [1m[35mCoachRecurringSchedule Load (0.2ms)[0m  SELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 26 and day_index = 2 and start_time = '12:30:00' and recurring_start_date <= '2015-01-13 12:30:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 12:30:00')) ORDER BY recurring_start_date DESC LIMIT 1
  [1m[36mCoachRecurringSchedule Load (0.2ms)[0m  [1mSELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 26 and day_index = 2 and start_time = '11:30:00' and recurring_start_date <= '2015-01-13 11:30:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 11:30:00')) ORDER BY recurring_start_date DESC LIMIT 1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 26 AND language_id = 23) ORDER BY qualifications.id DESC LIMIT 1
  [1m[36mCoach Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` INNER JOIN `qualifications` ON `accounts`.id = `qualifications`.coach_id WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND ((`qualifications`.language_id = 23) AND ((max_unit > 0 and active = 1))) ORDER BY trim(full_name)[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`coach_id` = 26 AND `qualifications`.`language_id` = 23 LIMIT 1
Rendered substitution/_substitutions_alert.html.erb (0.9ms)
Completed 200 OK in 44ms (Views: 2.3ms | ActiveRecord: 203.1ms)
  [1m[36mSQL (49.3ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email933@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email933@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'vramanan', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:57', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:57', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 27
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:57', 'rajkumar', NULL, 27, '', 'create', '2015-01-13 08:14:57', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:57', '2015-01-13 08:14:57')
Saving a log entry on create for SupportLanguage record 15
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:57', NULL, NULL, 15, '', 'create', '2015-01-13 08:14:57', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 27 LIMIT 1[0m
  [1m[35mAccount Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'rajkumar@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'rajkumar', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:57', NULL, 1, NULL, '2015-01-13 08:14:57', 'rajkumar', NULL)
Saving a log entry on create for Coach record 28
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:57', 'rajkumar', NULL, 28, '', 'create', '2015-01-13 08:14:57', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 28
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:57', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:57', 'ReflexLanguage', NULL, 'KLE')[0m
Saving a log entry on create for Language record 24
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:57', 'rajkumar', NULL, 24, '', 'create', '2015-01-13 08:14:57', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 24 AND (`qualifications`.coach_id = 28 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 24 LIMIT 1
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 28 LIMIT 1[0m
  [1m[35mCoach Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 28 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 28 and language_id = 24)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 28 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (28, '2015-01-13 08:14:57', 10, NULL, 24, '2015-01-13 08:14:57')[0m
Saving a log entry on create for Qualification record 24
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:57', 'rajkumar', NULL, 24, '', 'create', '2015-01-13 08:14:57', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 28 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`coach_showed_up`, `external_village_id`, `session_status`, `coach_id`, `type`, `eschool_session_id`, `topic_id`, `session_start_time`, `session_end_time`, `attendance_count`, `single_number_unit`, `created_at`, `name`, `cancelled`, `reassigned`, `recurring_schedule_id`, `seconds_prior_to_session`, `language_id`, `number_of_seats`, `updated_at`, `cancellation_reason`, `appointment_type_id`, `language_identifier`) VALUES (0, NULL, 1, 28, 'ConfirmedSession', NULL, NULL, '2015-01-13 09:00:00', '2015-01-13 09:30:00', NULL, 1, '2015-01-13 08:14:57', NULL, 0, NULL, NULL, NULL, 24, 0, '2015-01-13 08:14:57', NULL, NULL, 'KLE')[0m
Saving a log entry on create for ConfirmedSession record 7
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:57', 'rajkumar', NULL, 7, '', 'create', '2015-01-13 08:14:57', NULL)
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 7) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 28 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 28) AND ((max_unit > 0)))[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `unavailable_despite_templates` (`start_date`, `end_date`, `comments`, `coach_id`, `unavailability_type`, `coach_session_id`, `ancestry`, `created_at`, `updated_at`, `approval_status`) VALUES ('2015-01-13 09:00:00', '2015-01-13 09:30:00', 'Auto Approved - Coach requested Substitute', 28, 1, 7, NULL, '2015-01-13 08:14:57', '2015-01-13 08:14:57', 1)
Saving a log entry on create for UnavailableDespiteTemplate record 4
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('UnavailableDespiteTemplate', '2015-01-13 08:14:57', 'rajkumar', NULL, 4, '', 'create', '2015-01-13 08:14:57', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 7 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`updated_at`, `grabbed_at`, `reason`, `session_type`, `coach_session_id`, `created_at`, `cancelled`, `lang_id`, `was_reassigned`, `grabber_coach_id`, `coach_id`, `grabbed`) VALUES ('2015-01-13 08:14:57', NULL, NULL, 'normal', 7, '2015-01-13 08:14:57', 0, NULL, 0, NULL, 28, 0)[0m
Saving a log entry on create for Substitution record 9
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:57', 'rajkumar', NULL, 9, '', 'create', '2015-01-13 08:14:57', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 7) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:14:57' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 7[0m
Saving a log entry on update for ConfirmedSession record 7
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:57', 'rajkumar', 28, 7, 'coach_id', 'update', '2015-01-13 08:14:57', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 24 OR identifier = 24) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.1ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoach Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '24')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 24 OR identifier = 24) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.1ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoachManager Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '24')[0m
  [1m[35mTriggerEvent Load (0.1ms)[0m  SELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1
  [1m[36mNotification Load (0.0ms)[0m  [1mSELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1[0m
  Processing by SubstitutionController#substitutions_alert as HTML
  [1m[35mPreferenceSetting Load (0.3ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 27) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 27) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `preference_settings` (`substitution_alerts_display_time`, `no_of_home_events`, `notifications_email_type`, `substitution_policy_email`, `no_of_notifications_to_display`, `substitution_alerts_email_sending_schedule`, `no_of_home_substitutions`, `default_language_for_master_scheduler`, `no_of_substitution_alerts_to_display`, `daily_cap`, `session_alerts_display_time`, `substitution_alerts_email`, `coach_not_present_alert`, `no_of_home_announcements`, `notifications_email`, `no_of_learner_dashboard_records`, `created_at`, `account_id`, `mails_sent`, `timeoff_request_email`, `calendar_notices_email`, `notifications_display_time`, `no_of_calendar_notices_to_display`, `substitution_alerts_sms`, `calendar_notices_display_time`, `updated_at`, `substitution_alerts_email_type`, `no_of_home_notifications`, `substitution_policy_email_type`, `notifications_email_sending_schedule`, `timeoff_request_email_type`, `substitution_policy_email_sending_schedule`, `calendar_notices_email_type`, `start_page`, `calendar_notices_email_sending_schedule`) VALUES (86400, 5, 'PER', NULL, NULL, 'IMMEDIATELY', 5, NULL, 5, NULL, NULL, NULL, NULL, 5, NULL, NULL, '2015-01-13 08:14:57', 27, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:14:57', 'PER', 5, NULL, 'IMMEDIATELY', NULL, NULL, 'PER', 'CM_MS', 'IMMEDIATELY')[0m
Saving a log entry on create for PreferenceSetting record 3
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('PreferenceSetting', '2015-01-13 08:14:57', 'vramanan', NULL, 3, '', 'create', '2015-01-13 08:14:57', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mShownSubstitutions Load (0.2ms)[0m  SELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 27 LIMIT 1
  [1m[36mSubstitution Load (1.0ms)[0m  [1mSELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions) on (coach_sessions.id = substitutions.coach_session_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:14:57' and coach_sessions.session_end_time > '2015-01-13 08:14:57' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 7 LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 24 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 7)) LIMIT 1
  [1m[36mCmPreference Load (0.2ms)[0m  [1mSELECT `cm_preferences`.* FROM `cm_preferences` WHERE (`cm_preferences`.account_id = 27) LIMIT 1[0m
Rendered shared/_substitutions_alert.html.erb (1.1ms)
Completed 200 OK in 31ms (Views: 12.4ms | ActiveRecord: 63.7ms)
  [1m[35mSQL (53.1ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email842@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email842@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'vramanan', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:57', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:57', 'vramanan', NULL, NULL)
Saving a log entry on create for Account record 29
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:57', 'vramanan', NULL, 29, '', 'create', '2015-01-13 08:14:57', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:57', '2015-01-13 08:14:57')[0m
Saving a log entry on create for SupportLanguage record 16
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:57', NULL, NULL, 16, '', 'create', '2015-01-13 08:14:57', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 29 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `country`, `skype_id`, `native_language`, `photo_file_name`, `photo_file_size`, `rs_email`, `mobile_country_code`, `preferred_name`, `bio`, `aim_id`, `is_supervisor`, `last_logout`, `region_id`, `hire_date`, `type`, `other_languages`, `secondary_phone`, `lotus_qualified`, `full_name`, `personal_email`, `mobile_phone`, `next_session_alert_in`, `primary_phone`, `manager_notes`, `birth_date`, `sessions_allowed_per_week`, `photo_file`, `primary_country_code`, `next_substitution_alert_in`, `updated_at`, `address`, `active`, `photo_content_type`, `created_at`, `user_name`, `coach_guid`) VALUES (NULL, NULL, NULL, 'en-US', NULL, NULL, 'rajkumar@rs.com', '1', 'test', NULL, NULL, 0, NULL, NULL, NULL, 'Coach', NULL, NULL, 1, 'rajkumar', NULL, NULL, NULL, '5402334456', NULL, NULL, 8, NULL, '1', 24, '2015-01-13 08:14:57', NULL, 1, NULL, '2015-01-13 08:14:57', 'rajkumar', NULL)[0m
Saving a log entry on create for Coach record 30
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:57', 'vramanan', NULL, 30, '', 'create', '2015-01-13 08:14:57', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 30
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`created_at`, `duration`, `last_pushed_week`, `external_scheduler`, `updated_at`, `type`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:14:57', 30, '2011-10-27 23:22:54', NULL, '2015-01-13 08:14:57', 'ReflexLanguage', NULL, 'KLE')
Saving a log entry on create for Language record 25
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Language', '2015-01-13 08:14:57', 'vramanan', NULL, 25, '', 'create', '2015-01-13 08:14:57', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 25 AND (`qualifications`.coach_id = 30 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 25 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 30 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 30 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 30 and language_id = 25)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 30 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`coach_id`, `created_at`, `max_unit`, `dialect_id`, `language_id`, `updated_at`) VALUES (30, '2015-01-13 08:14:57', 10, NULL, 25, '2015-01-13 08:14:57')
Saving a log entry on create for Qualification record 25
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Qualification', '2015-01-13 08:14:57', 'vramanan', NULL, 25, '', 'create', '2015-01-13 08:14:57', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 30 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`coach_showed_up`, `external_village_id`, `session_status`, `coach_id`, `type`, `eschool_session_id`, `topic_id`, `session_start_time`, `session_end_time`, `attendance_count`, `single_number_unit`, `created_at`, `name`, `cancelled`, `reassigned`, `recurring_schedule_id`, `seconds_prior_to_session`, `language_id`, `number_of_seats`, `updated_at`, `cancellation_reason`, `appointment_type_id`, `language_identifier`) VALUES (0, NULL, 1, 30, 'ConfirmedSession', NULL, NULL, '2015-01-13 12:00:00', '2015-01-13 12:30:00', NULL, 1, '2015-01-13 08:14:57', NULL, 0, NULL, NULL, NULL, 25, 0, '2015-01-13 08:14:57', NULL, NULL, 'KLE')
Saving a log entry on create for ConfirmedSession record 8
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:57', 'vramanan', NULL, 8, '', 'create', '2015-01-13 08:14:57', NULL)[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 8) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 30 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 30) AND ((max_unit > 0)))
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`start_date`, `end_date`, `comments`, `coach_id`, `unavailability_type`, `coach_session_id`, `ancestry`, `created_at`, `updated_at`, `approval_status`) VALUES ('2015-01-13 12:00:00', '2015-01-13 12:30:00', 'Auto Approved - Coach requested Substitute', 30, 1, 8, NULL, '2015-01-13 08:14:57', '2015-01-13 08:14:57', 1)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 5
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('UnavailableDespiteTemplate', '2015-01-13 08:14:57', 'vramanan', NULL, 5, '', 'create', '2015-01-13 08:14:57', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 8 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `substitutions` (`updated_at`, `grabbed_at`, `reason`, `session_type`, `coach_session_id`, `created_at`, `cancelled`, `lang_id`, `was_reassigned`, `grabber_coach_id`, `coach_id`, `grabbed`) VALUES ('2015-01-13 08:14:57', NULL, NULL, 'normal', 8, '2015-01-13 08:14:57', 0, NULL, 0, NULL, 30, 0)
Saving a log entry on create for Substitution record 10
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Substitution', '2015-01-13 08:14:57', 'vramanan', NULL, 10, '', 'create', '2015-01-13 08:14:57', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND id <> 8) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:14:57' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 8
Saving a log entry on update for ConfirmedSession record 8
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('CoachSession', '2015-01-13 08:14:57', 'vramanan', 30, 8, 'coach_id', 'update', '2015-01-13 08:14:57', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 25 OR identifier = 25) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoach Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '25')[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 25 OR identifier = 25) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoachManager Load (0.6ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '25')
  [1m[36mTriggerEvent Load (0.0ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1[0m
  [1m[35mNotification Load (0.0ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1
  Processing by SubstitutionController#substitutions_alert as HTML
  Parameters: {"closed"=>"false"}
  [1m[36mPreferenceSetting Load (0.3ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 29) LIMIT 1[0m
  [1m[35mPreferenceSetting Load (0.1ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 29) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `preference_settings` (`substitution_alerts_display_time`, `no_of_home_events`, `notifications_email_type`, `substitution_policy_email`, `no_of_notifications_to_display`, `substitution_alerts_email_sending_schedule`, `no_of_home_substitutions`, `default_language_for_master_scheduler`, `no_of_substitution_alerts_to_display`, `daily_cap`, `session_alerts_display_time`, `substitution_alerts_email`, `coach_not_present_alert`, `no_of_home_announcements`, `notifications_email`, `no_of_learner_dashboard_records`, `created_at`, `account_id`, `mails_sent`, `timeoff_request_email`, `calendar_notices_email`, `notifications_display_time`, `no_of_calendar_notices_to_display`, `substitution_alerts_sms`, `calendar_notices_display_time`, `updated_at`, `substitution_alerts_email_type`, `no_of_home_notifications`, `substitution_policy_email_type`, `notifications_email_sending_schedule`, `timeoff_request_email_type`, `substitution_policy_email_sending_schedule`, `calendar_notices_email_type`, `start_page`, `calendar_notices_email_sending_schedule`) VALUES (86400, 5, 'PER', NULL, NULL, 'IMMEDIATELY', 5, NULL, 5, NULL, NULL, NULL, NULL, 5, NULL, NULL, '2015-01-13 08:14:57', 29, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:14:57', 'PER', 5, NULL, 'IMMEDIATELY', NULL, NULL, 'PER', 'CM_MS', 'IMMEDIATELY')
Saving a log entry on create for PreferenceSetting record 4
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('PreferenceSetting', '2015-01-13 08:14:57', 'vramanan', NULL, 4, '', 'create', '2015-01-13 08:14:57', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mShownSubstitutions Load (0.2ms)[0m  [1mSELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 29 LIMIT 1[0m
  [1m[35mSubstitution Load (0.6ms)[0m  SELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions) on (coach_sessions.id = substitutions.coach_session_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:14:57' and coach_sessions.session_end_time > '2015-01-13 08:14:57' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 8 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 25 LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 8)) LIMIT 1[0m
  [1m[35mCmPreference Load (0.2ms)[0m  SELECT `cm_preferences`.* FROM `cm_preferences` WHERE (`cm_preferences`.account_id = 29) LIMIT 1
Rendered shared/_substitutions_alert.html.erb (0.5ms)
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 66.9ms)
  [1m[36mSQL (49.1ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email946@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('rs_email946@rosettastone.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'test21', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:57', NULL, NULL, 'en-US', 'CoachManager', NULL, NULL, NULL, '2015-01-13 08:14:57', 'test21', NULL, NULL)[0m
Saving a log entry on create for Account record 31
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:57', 'vramanan', NULL, 31, '', 'create', '2015-01-13 08:14:57', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:14:57', '2015-01-13 08:14:57')
Saving a log entry on create for SupportLanguage record 17
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('SupportLanguage', '2015-01-13 08:14:57', NULL, NULL, 17, '', 'create', '2015-01-13 08:14:57', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 31 LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test692') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'user_680@factory.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`rs_email`, `skype_id`, `lotus_qualified`, `aim_id`, `birth_date`, `active`, `mobile_country_code`, `manager_notes`, `personal_email`, `mobile_phone`, `next_substitution_alert_in`, `full_name`, `is_supervisor`, `preferred_name`, `country`, `primary_country_code`, `photo_content_type`, `photo_file_name`, `sessions_allowed_per_week`, `next_session_alert_in`, `other_languages`, `bio`, `primary_phone`, `hire_date`, `manager_id`, `created_at`, `photo_file`, `last_logout`, `native_language`, `type`, `address`, `secondary_phone`, `region_id`, `updated_at`, `user_name`, `photo_file_size`, `coach_guid`) VALUES ('user_680@factory.com', NULL, 1, NULL, NULL, 1, '1', NULL, NULL, NULL, 24, 'test', 0, 'test', NULL, '1', NULL, NULL, 8, NULL, NULL, NULL, '5402334456', NULL, NULL, '2015-01-13 08:14:57', NULL, NULL, 'en-US', 'Coach', NULL, NULL, NULL, '2015-01-13 08:14:57', 'test692', NULL, NULL)
Saving a log entry on create for Account record 32
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`loggable_type`, `created_at`, `changed_by`, `previous_value`, `loggable_id`, `attribute_name`, `action`, `timestamp`, `new_value`) VALUES ('Account', '2015-01-13 08:14:57', 'vramanan', NULL, 32, '', 'create', '2015-01-13 08:14:57', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.4ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`eschool_session_id` = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ESP' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (32.0ms)[0m  [1mROLLBACK[0m
[WARNING] Audit logging has been enabled for Account
[WARNING] Audit logging has been enabled for AddConsumableLog
[WARNING] Audit logging has been enabled for Announcement
[WARNING] Audit logging has been enabled for CoachSession
[WARNING] Audit logging has been enabled for Language
[WARNING] Audit logging has been enabled for CmPreference
  [1m[36mSQL (0.4ms)[0m  [1mSHOW TABLES[0m
[WARNING] Audit logging has been enabled for CoachAvailability
[WARNING] Audit logging has been enabled for CoachAvailabilityTemplate
[WARNING] Audit logging has been enabled for CoachRecurringSchedule
[WARNING] Audit logging has been enabled for DelayedJob
[WARNING] Audit logging has been enabled for Event
[WARNING] Audit logging has been enabled for ExcludedCoachesSession
[WARNING] Audit logging has been enabled for LanguageConfiguration
[WARNING] Audit logging has been enabled for LearnerSupportStatus
[WARNING] Audit logging has been enabled for Level
  [1m[35mLevel Load (0.1ms)[0m  SELECT `levels`.* FROM `levels`
[WARNING] Audit logging has been enabled for Link
[WARNING] Audit logging has been enabled for ManagementTeamMember
[WARNING] Audit logging has been enabled for MasterSchedulerBulkData
[WARNING] Audit logging has been enabled for MsDraftData
[WARNING] Audit logging has been enabled for MsErrorMessage
[WARNING] Audit logging has been enabled for Notification
[WARNING] Audit logging has been enabled for NotificationMessageDynamic
[WARNING] Audit logging has been enabled for NotificationRecipient
[WARNING] Audit logging has been enabled for PreferenceSetting
[WARNING] Audit logging has been enabled for Qualification
[WARNING] Audit logging has been enabled for RealTimeLotusData
[WARNING] Audit logging has been enabled for Region
[WARNING] Audit logging has been enabled for Resource
[WARNING] Audit logging has been enabled for RightsExtensionLog
[WARNING] Audit logging has been enabled for Role
[WARNING] Audit logging has been enabled for RolesTask
[WARNING] Audit logging has been enabled for SchedulerMetadata
[WARNING] Audit logging has been enabled for ShownSubstitutions
[WARNING] Audit logging has been enabled for Substitution
[WARNING] Audit logging has been enabled for SupportLanguage
[WARNING] Audit logging has been enabled for SupportWindow
[WARNING] Audit logging has been enabled for SystemNotification
[WARNING] Audit logging has been enabled for Task
[WARNING] Audit logging has been enabled for TaskTracer
[WARNING] Audit logging has been enabled for TempData
[WARNING] Audit logging has been enabled for TriggerEvent
[WARNING] Audit logging has been enabled for UnavailableDespiteTemplate
[WARNING] Audit logging has been enabled for UncapLearnerLog
[WARNING] Audit logging has been enabled for UserLanguage
[WARNING] Audit logging has been enabled for UserUpdateExecutionDetail
[WARNING] Audit logging has been enabled for UserVillage
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'rajkumar', 'Coach', NULL, 8, NULL, NULL, 'rajkumar', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:14', 24, NULL, 'en-US', 'rajkumar@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:14', NULL, NULL, NULL, '1', 1, NULL, NULL)[0m
Saving a log entry on create for Coach record 33
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mSQL (0.4ms)[0m  describe `audit_log_records`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('', 'Account', NULL, 'create', NULL, 33, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 33
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mdescribe `support_languages`[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:14', 'en-US', 'English', '2015-01-13 08:18:14')
Saving a log entry on create for SupportLanguage record 18
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 18, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  describe `languages`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:14', '2015-01-13 08:18:14', 'ARA', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)[0m
Saving a log entry on create for Language record 26
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('', 'Language', NULL, 'create', NULL, 26, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 26 AND (`qualifications`.coach_id = 33 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 26 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 33 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 33 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 33 and language_id = 26)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 33 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mdescribe `qualifications`[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:14', 26, '2015-01-13 08:18:14', 10, NULL, 33)
Saving a log entry on create for Qualification record 26
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('', 'Qualification', NULL, 'create', NULL, 26, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions`[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.4ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 33 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mdescribe `coach_sessions`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`name`, `reassigned`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`, `cancelled`, `session_status`, `attendance_count`, `coach_showed_up`, `updated_at`, `eschool_session_id`, `cancellation_reason`, `single_number_unit`, `recurring_schedule_id`, `number_of_seats`, `external_village_id`, `type`, `session_end_time`, `language_id`, `created_at`, `seconds_prior_to_session`, `language_identifier`) VALUES (NULL, NULL, NULL, NULL, 33, '2015-01-13 09:00:00', 0, 1, NULL, 0, '2015-01-13 08:18:14', 343, NULL, 1, NULL, 0, NULL, 'ConfirmedSession', '2015-01-13 09:30:00', 26, '2015-01-13 08:18:14', NULL, 'ARA')
Saving a log entry on create for ConfirmedSession record 9
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('', 'CoachSession', NULL, 'create', NULL, 9, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 9) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 9 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  describe `substitutions`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `created_at`, `updated_at`, `grabbed`, `grabbed_at`, `coach_session_id`, `session_type`, `was_reassigned`, `lang_id`, `grabber_coach_id`, `coach_id`, `reason`) VALUES (0, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 0, NULL, 9, 'normal', NULL, NULL, NULL, 33, 'Electricity Outage')[0m
Saving a log entry on create for Substitution record 11
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('', 'Substitution', NULL, 'create', NULL, 11, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email901@rosettastone.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email901@rosettastone.com', NULL, 'vramanan', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:14', '2015-01-13 08:18:14', NULL, NULL, 'test', 'vramanan', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 34
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('', 'Account', NULL, 'create', NULL, 34, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.3ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 34 LIMIT 1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'AUS' OR identifier = 'AUS') ORDER BY languages.id DESC LIMIT 1[0m
  Processing by SubstitutionController#assign_substitute_for_coach as HTML
  Parameters: {"assigned_coach"=>33, "coach_session_id"=>9, "coach_id"=>33}
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 33 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 9 LIMIT 1[0m
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 9) ORDER BY substitutions.id DESC LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 9 LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mUPDATE `substitutions` SET `updated_at` = '2015-01-13 08:18:14', `grabbed` = 1, `grabbed_at` = '2015-01-13 08:18:14', `was_reassigned` = 1, `grabber_coach_id` = 33 WHERE `substitutions`.`id` = 11[0m
Saving a log entry on update for Substitution record 11
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', 1, 'update', NULL, 11, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 'was_reassigned')
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', 33, 'update', NULL, 11, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 'grabber_coach_id')[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', 1, 'update', 0, 11, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 'grabbed')
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', '2015-01-13 08:18:14', 'update', NULL, 11, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 'grabbed_at')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 33 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 9) ORDER BY updated_at DESC LIMIT 1[0m
Saving a log entry on update for ConfirmedSession record 9
  [1m[35mSessionMetadata Load (0.1ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 9) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 33 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mTriggerEvent Load (0.2ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'MANUALLY_REASSIGNED' LIMIT 1[0m
  [1m[35mNotification Load (0.1ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 11) LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 9 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 26 LIMIT 1
Completed 200 OK in 50ms (Views: 15.8ms | ActiveRecord: 83.0ms)
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'Check' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'Check') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'Check@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'Check', 'Coach', NULL, 8, NULL, NULL, 'Check', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:14', 24, NULL, 'en-US', 'Check@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:14', NULL, NULL, NULL, '1', 1, NULL, NULL)[0m
Saving a log entry on create for Coach record 35
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 35, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 35
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'AUS' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'AUS') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:14', '2015-01-13 08:18:14', 'AUS', 'AriaLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 27
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 27, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 27 AND (`qualifications`.coach_id = 35 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 27 LIMIT 1[0m
  [1m[35mCoachManager Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 35 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 35 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 35 and language_id = 27)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 35 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:14', 27, '2015-01-13 08:18:14', 10, NULL, 35)
Saving a log entry on create for Qualification record 27
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 27, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 9 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `created_at`, `updated_at`, `grabbed`, `grabbed_at`, `coach_session_id`, `session_type`, `was_reassigned`, `lang_id`, `grabber_coach_id`, `coach_id`, `reason`) VALUES (0, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 1, NULL, 9, 'normal', NULL, NULL, 33, 33, NULL)[0m
Saving a log entry on create for Substitution record 12
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', NULL, 'create', NULL, 12, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#assign_substitute_for_coach as HTML
  Parameters: {"assigned_coach"=>33, "coach_session_id"=>9, "coach_id"=>33}
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 35 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 9 LIMIT 1[0m
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 9) ORDER BY substitutions.id DESC LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 9 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `created_at`, `updated_at`, `grabbed`, `grabbed_at`, `coach_session_id`, `session_type`, `was_reassigned`, `lang_id`, `grabber_coach_id`, `coach_id`, `reason`) VALUES (0, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 0, NULL, 9, 'normal', 0, NULL, NULL, 33, NULL)[0m
Saving a log entry on create for Substitution record 13
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', NULL, 'create', NULL, 13, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 26 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 33 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 33) AND ((max_unit > 0)))[0m
  [1m[35mSQL (0.5ms)[0m  describe `unavailable_despite_templates`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`coach_id`, `created_at`, `updated_at`, `start_date`, `approval_status`, `unavailability_type`, `end_date`, `comments`, `ancestry`, `coach_session_id`) VALUES (33, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '2015-01-13 09:00:00', 1, 5, '2015-01-13 09:30:00', 'Auto Approved - Coach requested Substitute', NULL, 9)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 6
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'UnavailableDespiteTemplate', NULL, 'create', NULL, 6, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `substitutions` SET `updated_at` = '2015-01-13 08:18:14', `grabbed` = 1, `grabbed_at` = '2015-01-13 08:18:14', `was_reassigned` = 1, `grabber_coach_id` = 35 WHERE `substitutions`.`id` = 13[0m
Saving a log entry on update for Substitution record 13
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', 1, 'update', 0, 13, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 'was_reassigned')
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', 35, 'update', NULL, 13, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 'grabber_coach_id')[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', 1, 'update', 0, 13, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 'grabbed')
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', '2015-01-13 08:18:14', 'update', NULL, 13, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 'grabbed_at')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 35 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 9) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = 35, `updated_at` = '2015-01-13 08:18:14' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 9
Saving a log entry on update for ConfirmedSession record 9
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'CoachSession', 35, 'update', 33, 9, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 'coach_id')[0m
  [1m[35mSessionMetadata Load (0.1ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 9) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 35 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 9) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `reassigned` = 1, `updated_at` = '2015-01-13 08:18:14' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 9[0m
Saving a log entry on update for ConfirmedSession record 9
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'CoachSession', 1, 'update', NULL, 9, '2015-01-13 08:18:14', '2015-01-13 08:18:14', 'reassigned')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 33 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  describe `system_notifications`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `system_notifications` (`recipient_type`, `raw_message`, `notification_id`, `created_at`, `target_id`, `status`, `updated_at`, `recipient_id`) VALUES ('Account', 'You have been assigned a <b>Arabic</b> session on <b>January 13, 2015 04:00 AM</b>.', NULL, '2015-01-13 08:18:14', NULL, 0, '2015-01-13 08:18:14', 35)[0m
Saving a log entry on create for SystemNotification record 2
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'SystemNotification', NULL, 'create', NULL, 2, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 9 LIMIT 1
  [1m[36mSubstitution Load (0.1ms)[0m  [1mSELECT `substitutions`.* FROM `substitutions` WHERE (coach_id = NULL and coach_session_id = 9 ) ORDER BY id desc LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 26 LIMIT 1
Completed 200 OK in 73ms (Views: 0.5ms | ActiveRecord: 12.6ms)
  [1m[36mSQL (55.9ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email621@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email621@rosettastone.com', NULL, 'vramanan', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:14', '2015-01-13 08:18:14', NULL, NULL, 'test', 'vramanan', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 36
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 36, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:14', 'en-US', 'English', '2015-01-13 08:18:14')
Saving a log entry on create for SupportLanguage record 19
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 19, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 36 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'rajkumar', 'Coach', NULL, 8, NULL, NULL, 'rajkumar', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:14', 24, NULL, 'en-US', 'rajkumar@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:14', NULL, NULL, NULL, '1', 1, NULL, NULL)
Saving a log entry on create for Coach record 37
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 37, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 37
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:14', '2015-01-13 08:18:14', 'KLE', 'ReflexLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)[0m
Saving a log entry on create for Language record 28
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 28, '2015-01-13 08:18:14', '2015-01-13 08:18:14', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 28 AND (`qualifications`.coach_id = 37 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 28 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 37 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 37 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 37 and language_id = 28)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 37 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:15', 28, '2015-01-13 08:18:15', 10, NULL, 37)[0m
Saving a log entry on create for Qualification record 28
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 28, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`name`, `reassigned`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`, `cancelled`, `session_status`, `attendance_count`, `coach_showed_up`, `updated_at`, `eschool_session_id`, `cancellation_reason`, `single_number_unit`, `recurring_schedule_id`, `number_of_seats`, `external_village_id`, `type`, `session_end_time`, `language_id`, `created_at`, `seconds_prior_to_session`, `language_identifier`) VALUES (NULL, NULL, NULL, NULL, 18, '2015-01-13 10:00:00', 0, 1, NULL, 0, '2015-01-13 08:18:15', 345698, NULL, 1, NULL, 0, NULL, 'ConfirmedSession', '2015-01-13 10:30:00', 28, '2015-01-13 08:18:15', NULL, 'KLE')[0m
Saving a log entry on create for ConfirmedSession record 10
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'CoachSession', NULL, 'create', NULL, 10, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 10) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 10 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `created_at`, `updated_at`, `grabbed`, `grabbed_at`, `coach_session_id`, `session_type`, `was_reassigned`, `lang_id`, `grabber_coach_id`, `coach_id`, `reason`) VALUES (0, '2015-01-13 08:18:15', '2015-01-13 08:18:15', 0, NULL, 10, 'normal', NULL, NULL, NULL, 37, 'Electricity Outage')[0m
Saving a log entry on create for Substitution record 14
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', NULL, 'create', NULL, 14, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#cancel_substitution as HTML
  Parameters: {"notice"=>true, "reason"=>"Electricity Outage", "sub_id"=>14}
  [1m[35mSubstitution Load (0.3ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE `substitutions`.`id` = 14 LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 10 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 28 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `substitutions` SET `cancelled` = 1, `updated_at` = '2015-01-13 08:18:15' WHERE `substitutions`.`id` = 14
Saving a log entry on update for Substitution record 14
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', 1, 'update', 0, 14, '2015-01-13 08:18:15', '2015-01-13 08:18:15', 'cancelled')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 37 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `updated_at` = '2015-01-13 08:18:15', `cancellation_reason` = 'Electricity Outage' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 10[0m
Saving a log entry on update for ConfirmedSession record 10
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'CoachSession', 'Electricity Outage', 'update', NULL, 10, '2015-01-13 08:18:15', '2015-01-13 08:18:15', 'cancellation_reason')
  [1m[36mSessionMetadata Load (0.1ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 10) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 18ms (Views: 2.3ms | ActiveRecord: 66.0ms)
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'Ven' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'Ven') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'Ven@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'Ven', 'Coach', NULL, 8, NULL, NULL, 'Ven', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:15', 24, NULL, 'en-US', 'Ven@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:15', NULL, NULL, NULL, '1', 1, NULL, NULL)[0m
Saving a log entry on create for Coach record 38
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 38, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 38
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:15', '2015-01-13 08:18:15', 'ARA', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 29
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 29, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 29 AND (`qualifications`.coach_id = 38 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 29 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 38 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 38 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 38 and language_id = 29)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 38 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:15', 29, '2015-01-13 08:18:15', 10, NULL, 38)
Saving a log entry on create for Qualification record 29
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 29, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 38 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`name`, `reassigned`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`, `cancelled`, `session_status`, `attendance_count`, `coach_showed_up`, `updated_at`, `eschool_session_id`, `cancellation_reason`, `single_number_unit`, `recurring_schedule_id`, `number_of_seats`, `external_village_id`, `type`, `session_end_time`, `language_id`, `created_at`, `seconds_prior_to_session`, `language_identifier`) VALUES (NULL, NULL, NULL, NULL, 38, '2015-01-13 10:00:00', 0, 1, NULL, 0, '2015-01-13 08:18:15', 989648, NULL, 1, NULL, 0, NULL, 'ConfirmedSession', '2015-01-13 10:30:00', 28, '2015-01-13 08:18:15', NULL, 'KLE')
Saving a log entry on create for ConfirmedSession record 11
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'CoachSession', NULL, 'create', NULL, 11, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 11) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 11 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`cancelled`, `created_at`, `updated_at`, `grabbed`, `grabbed_at`, `coach_session_id`, `session_type`, `was_reassigned`, `lang_id`, `grabber_coach_id`, `coach_id`, `reason`) VALUES (1, '2015-01-13 08:18:15', '2015-01-13 08:18:15', 0, NULL, 11, 'normal', NULL, NULL, NULL, 37, 'Electricity Outage')
Saving a log entry on create for Substitution record 15
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', NULL, 'create', NULL, 15, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#cancel_substitution as HTML
  Parameters: {"notice"=>true, "reason"=>"Electricity Outage", "sub_id"=>14}
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 989648 LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`eschool_session_id` = 989648 LIMIT 1
  [1m[36mSubstitution Load (0.2ms)[0m  [1mSELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 11) ORDER BY substitutions.id DESC LIMIT 1[0m
  [1m[35mCoachSession Load (0.1ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 11 LIMIT 1
Completed 500 Internal Server Error in 5ms (Views: 0.4ms | ActiveRecord: 6.8ms)
  [1m[36mSQL (33.8ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'rajkumar', 'Coach', NULL, 8, NULL, NULL, 'rajkumar', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:15', 24, NULL, 'en-US', 'rajkumar@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:15', NULL, NULL, NULL, '1', 1, NULL, NULL)[0m
Saving a log entry on create for Coach record 39
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 39, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 39
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:15', 'en-US', 'English', '2015-01-13 08:18:15')
Saving a log entry on create for SupportLanguage record 20
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 20, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:15', '2015-01-13 08:18:15', 'KLE', 'ReflexLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 30
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 30, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.4ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 30 AND (`qualifications`.coach_id = 39 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 30 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 39 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 39 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 39 and language_id = 30)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 39 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:15', 30, '2015-01-13 08:18:15', 10, NULL, 39)
Saving a log entry on create for Qualification record 30
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 30, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 39
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 39
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.3ms)[0m  [1mUPDATE `accounts` SET `created_at` = '2015-01-12 08:18:15', `updated_at` = '2015-01-13 08:18:15' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 39[0m
Saving a log entry on update for Coach record 39
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE (`qualifications`.coach_id = 39 AND (max_unit > 0))[0m
  [1m[35mSupportLanguage Load (0.1ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 39 LIMIT 1[0m
  [1m[35mCoachSession Load (0.1ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions`
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.5ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `coach_sessions` (`name`, `reassigned`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`, `cancelled`, `session_status`, `attendance_count`, `coach_showed_up`, `updated_at`, `eschool_session_id`, `cancellation_reason`, `single_number_unit`, `recurring_schedule_id`, `number_of_seats`, `external_village_id`, `type`, `session_end_time`, `language_id`, `created_at`, `seconds_prior_to_session`, `language_identifier`) VALUES (NULL, NULL, NULL, NULL, 18, '2015-01-13 10:00:00', 0, 1, NULL, 0, '2015-01-13 08:18:15', 345698, NULL, 1, NULL, 0, NULL, 'ConfirmedSession', '2015-01-13 10:30:00', 30, '2015-01-13 08:18:15', NULL, 'KLE')
Saving a log entry on create for ConfirmedSession record 12
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'CoachSession', NULL, 'create', NULL, 12, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')[0m
  [1m[35mSessionMetadata Load (0.3ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 12) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 12 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `substitutions` (`cancelled`, `created_at`, `updated_at`, `grabbed`, `grabbed_at`, `coach_session_id`, `session_type`, `was_reassigned`, `lang_id`, `grabber_coach_id`, `coach_id`, `reason`) VALUES (0, '2015-01-13 08:18:15', '2015-01-13 08:18:15', 0, NULL, 12, 'normal', NULL, NULL, NULL, 39, NULL)
Saving a log entry on create for Substitution record 16
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', NULL, 'create', NULL, 16, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#check_sub_policy_violation as JS
  Parameters: {"coach_id"=>39, "start_time"=>Tue Jan 13 08:00:00 UTC 2015}
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 39 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.4ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 39) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 39) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mdescribe `preference_settings`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `preference_settings` (`account_id`, `session_alerts_display_time`, `no_of_notifications_to_display`, `calendar_notices_email`, `no_of_substitution_alerts_to_display`, `daily_cap`, `timeoff_request_email`, `substitution_alerts_sms`, `mails_sent`, `coach_not_present_alert`, `calendar_notices_display_time`, `start_page`, `notifications_display_time`, `no_of_home_substitutions`, `no_of_home_announcements`, `default_language_for_master_scheduler`, `updated_at`, `timeoff_request_email_type`, `calendar_notices_email_type`, `notifications_email`, `no_of_calendar_notices_to_display`, `no_of_home_notifications`, `substitution_policy_email_type`, `created_at`, `substitution_alerts_email_sending_schedule`, `no_of_learner_dashboard_records`, `substitution_alerts_email`, `substitution_policy_email`, `substitution_policy_email_sending_schedule`, `substitution_alerts_display_time`, `notifications_email_sending_schedule`, `no_of_home_events`, `calendar_notices_email_sending_schedule`, `substitution_alerts_email_type`, `notifications_email_type`) VALUES (39, 10, NULL, NULL, 5, NULL, NULL, 1, 0, NULL, NULL, 'CALENDAR', NULL, 5, 5, NULL, '2015-01-13 08:18:15', NULL, 'PER', NULL, NULL, 5, NULL, '2015-01-13 08:18:15', 'IMMEDIATELY', NULL, NULL, NULL, NULL, 86400, 'IMMEDIATELY', 5, 'IMMEDIATELY', 'PER', 'PER')
Saving a log entry on create for PreferenceSetting record 5
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'PreferenceSetting', NULL, 'create', NULL, 5, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 39 AND session_start_time < '2015-01-13 08:28:15' AND session_start_time >= '2015-01-13 08:18:15' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 39 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 39 and session_start_time = '1970-01-17 10:45:36' and cancelled is false) LIMIT 1[0m
  [1m[35mSubstitution Load (0.9ms)[0m  Select DISTINCT * from substitutions s join coach_sessions c on s.coach_session_id = c.id join unavailable_despite_templates u where c.type NOT IN ('ExtraSession','Appointment') and s.coach_id = 39 and c.session_start_time >= '1970-01-01 05:00:00' and c.session_start_time < '1970-02-01 04:59:59' and u.coach_session_id = c.id and (s.coach_id != s.grabber_coach_id OR s.grabber_coach_id is null) and u.unavailability_type in (1,5) order by s.created_at, u.created_at desc;
Completed 200 OK in 67ms (Views: 25.7ms | ActiveRecord: 46.9ms)
  [1m[36mSQL (42.8ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.1ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email103@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email103@rosettastone.com', NULL, 'vramanan', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:15', '2015-01-13 08:18:15', NULL, NULL, 'test', 'vramanan', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 40
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Account', NULL, 'create', NULL, 40, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:15', 'en-US', 'English', '2015-01-13 08:18:15')
Saving a log entry on create for SupportLanguage record 21
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 21, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 40 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'rajkumar', 'Coach', NULL, 8, NULL, NULL, 'rajkumar', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:15', 24, NULL, 'en-US', 'rajkumar@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:15', NULL, NULL, NULL, '1', 1, NULL, NULL)
Saving a log entry on create for Coach record 41
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Account', NULL, 'create', NULL, 41, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 41
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:15', '2015-01-13 08:18:15', 'KLE', 'ReflexLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)[0m
Saving a log entry on create for Language record 31
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Language', NULL, 'create', NULL, 31, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 31 AND (`qualifications`.coach_id = 41 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 31 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 41 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 41 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 41 and language_id = 31)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 41 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:15', 31, '2015-01-13 08:18:15', 10, NULL, 41)[0m
Saving a log entry on create for Qualification record 31
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Qualification', NULL, 'create', NULL, 31, '2015-01-13 08:18:15', '2015-01-13 08:18:15', '')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'HEB' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (32.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email344@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email344@rosettastone.com', NULL, 'test21', '5402334456', NULL, 0, NULL, NULL, 'Coach', '2015-01-13 08:18:16', '2015-01-13 08:18:16', NULL, NULL, 'test', 'test21', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 42
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Account', NULL, 'create', NULL, 42, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `accounts` SET `updated_at` = '2015-01-13 08:18:16', `created_at` = '2015-01-12 08:18:16' WHERE `accounts`.`id` = 42[0m
Saving a log entry on update for Account record 42
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:16', '2015-01-13 08:18:16', 'ARA', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 32
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Language', NULL, 'create', NULL, 32, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 42 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 42 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 42 and language_id = 32)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 42 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:16', 32, '2015-01-13 08:18:16', 10, NULL, 42)
Saving a log entry on create for Qualification record 32
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Qualification', NULL, 'create', NULL, 32, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:16', 'en-US', 'English', '2015-01-13 08:18:16')[0m
Saving a log entry on create for SupportLanguage record 22
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 22, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 42 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.3ms)[0m  UPDATE `accounts` SET `created_at` = '2015-01-13 08:18:16', `updated_at` = '2015-01-13 08:18:16' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 42
Saving a log entry on update for Coach record 42
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'rajkumar', 'Coach', NULL, 8, NULL, NULL, 'rajkumar', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:16', 24, NULL, 'en-US', 'rajkumar@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:16', NULL, NULL, NULL, '1', 1, NULL, NULL)
Saving a log entry on create for Coach record 43
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Account', NULL, 'create', NULL, 43, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 43
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:16', '2015-01-13 08:18:16', 'KLE', 'ReflexLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)[0m
Saving a log entry on create for Language record 33
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Language', NULL, 'create', NULL, 33, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 33 AND (`qualifications`.coach_id = 43 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 33 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 43 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 43 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 43 and language_id = 33)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 43 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:16', 33, '2015-01-13 08:18:16', 10, NULL, 43)[0m
Saving a log entry on create for Qualification record 33
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Qualification', NULL, 'create', NULL, 33, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions`
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`name`, `reassigned`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`, `cancelled`, `session_status`, `attendance_count`, `coach_showed_up`, `updated_at`, `eschool_session_id`, `cancellation_reason`, `single_number_unit`, `recurring_schedule_id`, `number_of_seats`, `external_village_id`, `type`, `session_end_time`, `language_id`, `created_at`, `seconds_prior_to_session`, `language_identifier`) VALUES (NULL, NULL, NULL, NULL, 18, '2015-01-13 10:00:00', 0, 1, NULL, 0, '2015-01-13 08:18:16', 345698, NULL, 1, NULL, 0, NULL, 'ConfirmedSession', '2015-01-13 10:30:00', 33, '2015-01-13 08:18:16', NULL, 'KLE')
Saving a log entry on create for ConfirmedSession record 13
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'CoachSession', NULL, 'create', NULL, 13, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 13) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 13 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `substitutions` (`cancelled`, `created_at`, `updated_at`, `grabbed`, `grabbed_at`, `coach_session_id`, `session_type`, `was_reassigned`, `lang_id`, `grabber_coach_id`, `coach_id`, `reason`) VALUES (0, '2015-01-13 08:18:16', '2015-01-13 08:18:16', 0, NULL, 13, 'normal', NULL, NULL, NULL, 43, 'Electricity Outage')
Saving a log entry on create for Substitution record 17
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Substitution', NULL, 'create', NULL, 17, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 42 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.2ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 42) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 42) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `preference_settings` (`account_id`, `session_alerts_display_time`, `no_of_notifications_to_display`, `calendar_notices_email`, `no_of_substitution_alerts_to_display`, `daily_cap`, `timeoff_request_email`, `substitution_alerts_sms`, `mails_sent`, `coach_not_present_alert`, `calendar_notices_display_time`, `start_page`, `notifications_display_time`, `no_of_home_substitutions`, `no_of_home_announcements`, `default_language_for_master_scheduler`, `updated_at`, `timeoff_request_email_type`, `calendar_notices_email_type`, `notifications_email`, `no_of_calendar_notices_to_display`, `no_of_home_notifications`, `substitution_policy_email_type`, `created_at`, `substitution_alerts_email_sending_schedule`, `no_of_learner_dashboard_records`, `substitution_alerts_email`, `substitution_policy_email`, `substitution_policy_email_sending_schedule`, `substitution_alerts_display_time`, `notifications_email_sending_schedule`, `no_of_home_events`, `calendar_notices_email_sending_schedule`, `substitution_alerts_email_type`, `notifications_email_type`) VALUES (42, 10, NULL, NULL, 5, NULL, NULL, 1, 0, NULL, NULL, 'CALENDAR', NULL, 5, 5, NULL, '2015-01-13 08:18:16', NULL, 'PER', NULL, NULL, 5, NULL, '2015-01-13 08:18:16', 'IMMEDIATELY', NULL, NULL, NULL, NULL, 86400, 'IMMEDIATELY', 5, 'IMMEDIATELY', 'PER', 'PER')[0m
Saving a log entry on create for PreferenceSetting record 6
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('test21', 'PreferenceSetting', NULL, 'create', NULL, 6, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 42 AND session_start_time < '2015-01-13 08:28:16' AND session_start_time >= '2015-01-13 08:18:16' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 33 LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mLocalSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 42 AND language_id = 33) ORDER BY qualifications.id DESC LIMIT 1
Completed 200 OK in 30ms (Views: 0.4ms | ActiveRecord: 97.8ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 42 AND (max_unit > 0))[0m
  [1m[35mCoachSession Load (0.4ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 42 AND session_start_time < '2015-01-13 08:28:16' AND session_start_time >= '2015-01-13 08:18:16' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mLocalSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mLocalSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 42 AND language_id = 33) ORDER BY qualifications.id DESC LIMIT 1[0m
Completed 200 OK in 13ms (Views: 0.4ms | ActiveRecord: 2.2ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 42 AND (max_unit > 0))
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 42 AND session_start_time < '2015-01-13 08:28:16' AND session_start_time >= '2015-01-13 08:18:16' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 42 AND language_id = 33) ORDER BY qualifications.id DESC LIMIT 1
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 1.9ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 42 AND (max_unit > 0))[0m
  [1m[35mCoachSession Load (0.4ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 42 AND session_start_time < '2015-01-13 08:28:16' AND session_start_time >= '2015-01-13 08:18:16' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 42 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 42 AND language_id = 33) ORDER BY qualifications.id DESC LIMIT 1[0m
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 2.0ms)
  [1m[35mSQL (35.7ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email271@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email271@rosettastone.com', NULL, 'vramanan', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:16', '2015-01-13 08:18:16', NULL, NULL, 'test', 'vramanan', NULL, NULL, NULL)
Saving a log entry on create for Account record 44
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('test21', 'Account', NULL, 'create', NULL, 44, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:16', 'en-US', 'English', '2015-01-13 08:18:16')[0m
Saving a log entry on create for SupportLanguage record 23
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 23, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 44 LIMIT 1
  Processing by SubstitutionController#substitutions as HTML
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 44) AND ((max_unit is NULL)))[0m
  [1m[35mSubstitution Load (0.5ms)[0m  SELECT `substitutions`.`id` AS t0_r0, `substitutions`.`coach_id` AS t0_r1, `substitutions`.`grabber_coach_id` AS t0_r2, `substitutions`.`grabbed` AS t0_r3, `substitutions`.`lang_id` AS t0_r4, `substitutions`.`coach_session_id` AS t0_r5, `substitutions`.`created_at` AS t0_r6, `substitutions`.`updated_at` AS t0_r7, `substitutions`.`grabbed_at` AS t0_r8, `substitutions`.`cancelled` AS t0_r9, `substitutions`.`was_reassigned` AS t0_r10, `substitutions`.`session_type` AS t0_r11, `substitutions`.`reason` AS t0_r12, `coach_sessions`.`id` AS t1_r0, `coach_sessions`.`eschool_session_id` AS t1_r1, `coach_sessions`.`session_start_time` AS t1_r2, `coach_sessions`.`created_at` AS t1_r3, `coach_sessions`.`updated_at` AS t1_r4, `coach_sessions`.`cancelled` AS t1_r5, `coach_sessions`.`external_village_id` AS t1_r6, `coach_sessions`.`language_identifier` AS t1_r7, `coach_sessions`.`single_number_unit` AS t1_r8, `coach_sessions`.`number_of_seats` AS t1_r9, `coach_sessions`.`attendance_count` AS t1_r10, `coach_sessions`.`coach_showed_up` AS t1_r11, `coach_sessions`.`seconds_prior_to_session` AS t1_r12, `coach_sessions`.`recurring_schedule_id` AS t1_r13, `coach_sessions`.`coach_id` AS t1_r14, `coach_sessions`.`session_status` AS t1_r15, `coach_sessions`.`type` AS t1_r16, `coach_sessions`.`name` AS t1_r17, `coach_sessions`.`session_end_time` AS t1_r18, `coach_sessions`.`language_id` AS t1_r19, `coach_sessions`.`cancellation_reason` AS t1_r20, `coach_sessions`.`topic_id` AS t1_r21, `coach_sessions`.`reassigned` AS t1_r22, `coach_sessions`.`appointment_type_id` AS t1_r23, `accounts`.`id` AS t2_r0, `accounts`.`user_name` AS t2_r1, `accounts`.`full_name` AS t2_r2, `accounts`.`preferred_name` AS t2_r3, `accounts`.`rs_email` AS t2_r4, `accounts`.`personal_email` AS t2_r5, `accounts`.`skype_id` AS t2_r6, `accounts`.`primary_phone` AS t2_r7, `accounts`.`secondary_phone` AS t2_r8, `accounts`.`birth_date` AS t2_r9, `accounts`.`hire_date` AS t2_r10, `accounts`.`bio` AS t2_r11, `accounts`.`manager_notes` AS t2_r12, `accounts`.`active` AS t2_r13, `accounts`.`manager_id` AS t2_r14, `accounts`.`created_at` AS t2_r15, `accounts`.`updated_at` AS t2_r16, `accounts`.`type` AS t2_r17, `accounts`.`region_id` AS t2_r18, `accounts`.`next_session_alert_in` AS t2_r19, `accounts`.`last_logout` AS t2_r20, `accounts`.`country` AS t2_r21, `accounts`.`native_language` AS t2_r22, `accounts`.`other_languages` AS t2_r23, `accounts`.`address` AS t2_r24, `accounts`.`lotus_qualified` AS t2_r25, `accounts`.`next_substitution_alert_in` AS t2_r26, `accounts`.`mobile_phone` AS t2_r27, `accounts`.`sessions_allowed_per_week` AS t2_r28, `accounts`.`is_supervisor` AS t2_r29, `accounts`.`mobile_country_code` AS t2_r30, `accounts`.`aim_id` AS t2_r31, `accounts`.`primary_country_code` AS t2_r32, `accounts`.`photo_file_name` AS t2_r33, `accounts`.`photo_content_type` AS t2_r34, `accounts`.`photo_file_size` AS t2_r35, `accounts`.`photo_file` AS t2_r36, `accounts`.`coach_guid` AS t2_r37, `languages`.`id` AS t3_r0, `languages`.`identifier` AS t3_r1, `languages`.`created_at` AS t3_r2, `languages`.`updated_at` AS t3_r3, `languages`.`last_pushed_week` AS t3_r4, `languages`.`type` AS t3_r5, `languages`.`duration` AS t3_r6, `languages`.`connection_type` AS t3_r7, `languages`.`external_scheduler` AS t3_r8 FROM `substitutions` LEFT OUTER JOIN `coach_sessions` ON `coach_sessions`.`id` = `substitutions`.`coach_session_id` LEFT OUTER JOIN `accounts` ON `accounts`.`id` = `substitutions`.`coach_id` AND `accounts`.`type` = 'Coach' LEFT OUTER JOIN `coach_sessions` `languages_substitutions_join` ON `substitutions`.`coach_session_id` = `languages_substitutions_join`.`id` LEFT OUTER JOIN `languages` ON `languages`.`id` = `languages_substitutions_join`.`language_id` WHERE (coach_sessions.language_identifier IN (NULL) AND coach_sessions.session_start_time >= '2015-01-13 07:31:00' AND coach_sessions.session_start_time < '2015-01-20 08:00:00' AND substitutions.cancelled = 0 AND grabbed = 0) ORDER BY coach_sessions.session_start_time
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-NED-L' OR identifier = 'TMM-NED-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-NED-P' OR identifier = 'TMM-NED-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ENG-L' OR identifier = 'TMM-ENG-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ENG-P' OR identifier = 'TMM-ENG-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-FRA-L' OR identifier = 'TMM-FRA-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-FRA-P' OR identifier = 'TMM-FRA-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-MCH-L' OR identifier = 'TMM-MCH-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-DEU-L' OR identifier = 'TMM-DEU-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-DEU-P' OR identifier = 'TMM-DEU-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ITA-L' OR identifier = 'TMM-ITA-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ITA-P' OR identifier = 'TMM-ITA-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ESP-L' OR identifier = 'TMM-ESP-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ESP-P' OR identifier = 'TMM-ESP-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mAlert Load (0.1ms)[0m  SELECT `alerts`.* FROM `alerts` WHERE (active = 1) ORDER BY alerts.id DESC LIMIT 1
Rendered shared/_editor_authenticate.html.erb (4.1ms)
Rendered shared/_header.html.erb (6.5ms)
Rendered shared/_default_navigation.html.erb (12.4ms)
Rendered shared/_profile_links.html.erb (1.5ms)
Rendered shared/_body_content.html.erb (16.4ms)
Completed 200 OK in 63ms (Views: 44.1ms | ActiveRecord: 41.8ms)
  [1m[36mSQL (33.5ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email565@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email565@rosettastone.com', NULL, 'test21', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:16', '2015-01-13 08:18:16', NULL, NULL, 'test', 'test21', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 45
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 45, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:16', 'en-US', 'English', '2015-01-13 08:18:16')
Saving a log entry on create for SupportLanguage record 24
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 24, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 45 LIMIT 1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'KLE' OR identifier = 'KLE') ORDER BY languages.id DESC LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'rajkumar', 'Coach', NULL, 8, NULL, NULL, 'rajkumar', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:16', 24, NULL, 'en-US', 'rajkumar@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:16', NULL, NULL, NULL, '1', 1, NULL, NULL)[0m
Saving a log entry on create for Coach record 46
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 46, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 46
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:16', '2015-01-13 08:18:16', 'KLE', 'ReflexLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 34
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 34, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 34 AND (`qualifications`.coach_id = 46 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 34 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 46 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 46 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 46 and language_id = 34)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 46 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:16', 34, '2015-01-13 08:18:16', 10, NULL, 46)
Saving a log entry on create for Qualification record 34
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 34, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 46 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`name`, `reassigned`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`, `cancelled`, `session_status`, `attendance_count`, `coach_showed_up`, `updated_at`, `eschool_session_id`, `cancellation_reason`, `single_number_unit`, `recurring_schedule_id`, `number_of_seats`, `external_village_id`, `type`, `session_end_time`, `language_id`, `created_at`, `seconds_prior_to_session`, `language_identifier`) VALUES (NULL, NULL, NULL, NULL, 46, '2015-01-13 10:00:00', 0, 1, NULL, 0, '2015-01-13 08:18:16', NULL, NULL, 1, NULL, 0, NULL, 'ConfirmedSession', '2015-01-13 10:30:00', 34, '2015-01-13 08:18:16', NULL, 'KLE')
Saving a log entry on create for ConfirmedSession record 14
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'CoachSession', NULL, 'create', NULL, 14, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 14) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 46 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 46) AND ((max_unit > 0)))
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`coach_id`, `created_at`, `updated_at`, `start_date`, `approval_status`, `unavailability_type`, `end_date`, `comments`, `ancestry`, `coach_session_id`) VALUES (46, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '2015-01-13 10:00:00', 1, 1, '2015-01-13 10:30:00', 'Auto Approved - Coach requested Substitute', NULL, 14)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 7
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'UnavailableDespiteTemplate', NULL, 'create', NULL, 7, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 14 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`cancelled`, `created_at`, `updated_at`, `grabbed`, `grabbed_at`, `coach_session_id`, `session_type`, `was_reassigned`, `lang_id`, `grabber_coach_id`, `coach_id`, `reason`) VALUES (0, '2015-01-13 08:18:16', '2015-01-13 08:18:16', 0, NULL, 14, 'normal', 0, NULL, NULL, 46, NULL)
Saving a log entry on create for Substitution record 18
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', NULL, 'create', NULL, 18, '2015-01-13 08:18:16', '2015-01-13 08:18:16', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00' AND id <> 14) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:18:16' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 14
Saving a log entry on update for ConfirmedSession record 14
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'CoachSession', NULL, 'update', 46, 14, '2015-01-13 08:18:16', '2015-01-13 08:18:16', 'coach_id')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 34 OR identifier = 34) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoach Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '34')[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 34 OR identifier = 34) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoachManager Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '34')
  [1m[36mTriggerEvent Load (0.2ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1[0m
  [1m[35mNotification Load (0.1ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1
  Processing by SubstitutionController#substitutions as HTML
Completed 500 Internal Server Error in 1ms
  [1m[36mSQL (37.8ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email591@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email591@rosettastone.com', NULL, 'vramanan', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:17', '2015-01-13 08:18:17', NULL, NULL, 'test', 'vramanan', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 47
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('test21', 'Account', NULL, 'create', NULL, 47, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:17', 'en-US', 'English', '2015-01-13 08:18:17')
Saving a log entry on create for SupportLanguage record 25
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 25, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 47 LIMIT 1[0m
  Processing by SubstitutionController#reason_for_sub_request as JS
Rendered shared/_show_reasons.html.erb (0.9ms)
Rendered substitution/_reason_for_sub_request.html.erb (3.3ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 86.6ms)
  [1m[35mSQL (34.4ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email881@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email881@rosettastone.com', NULL, 'vramanan', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:17', '2015-01-13 08:18:17', NULL, NULL, 'test', 'vramanan', NULL, NULL, NULL)
Saving a log entry on create for Account record 48
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 48, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:17', 'en-US', 'English', '2015-01-13 08:18:17')[0m
Saving a log entry on create for SupportLanguage record 26
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 26, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 48 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'TestCoach', 'Coach', NULL, 8, NULL, NULL, 'TestCoach', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:17', 24, NULL, 'en-US', 'TestCoach@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:17', NULL, NULL, NULL, '1', 1, NULL, NULL)[0m
Saving a log entry on create for Coach record 49
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 49, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 49
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'ARA', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 35
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 35, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 35 AND (`qualifications`.coach_id = 49 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 35 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 49 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 49 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 49 and language_id = 35)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 49 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 35, '2015-01-13 08:18:17', 10, NULL, 49)
Saving a log entry on create for Qualification record 35
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 35, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'CHI', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 36
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 36, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 36 AND (`qualifications`.coach_id = 49 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 36 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 49 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 49 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 49 and language_id = 36)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 49 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 36, '2015-01-13 08:18:17', 10, NULL, 49)
Saving a log entry on create for Qualification record 36
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 36, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'ENG', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 37
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 37, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 37 AND (`qualifications`.coach_id = 49 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 37 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 49 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 49 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 49 and language_id = 37)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 49 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 37, '2015-01-13 08:18:17', 10, NULL, 49)
Saving a log entry on create for Qualification record 37
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 37, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#request_substitute_for_coach as JS
  Parameters: {"lang_identifier"=>"ARA", "current_coach_id"=>49, "time"=>"2010-09-06 11:00:00"}
  [1m[36mCoachSession Load (0.4ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 and coach_id = 49 and session_start_time = '2010-09-06 11:00:00') ORDER BY coach_sessions.id DESC LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (Views: 0.4ms | ActiveRecord: 47.4ms)
  [1m[35mSQL (37.1ms)[0m  ROLLBACK
  [1m[36mSQL (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email463@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email463@rosettastone.com', NULL, 'vramanan', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:17', '2015-01-13 08:18:17', NULL, NULL, 'test', 'vramanan', NULL, NULL, NULL)
Saving a log entry on create for Account record 50
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 50, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.3ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:17', 'en-US', 'English', '2015-01-13 08:18:17')[0m
Saving a log entry on create for SupportLanguage record 27
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 27, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 50 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'TestCoach', 'Coach', NULL, 8, NULL, NULL, 'TestCoach', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:17', 24, NULL, 'en-US', 'TestCoach@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:17', NULL, NULL, NULL, '1', 1, NULL, NULL)[0m
Saving a log entry on create for Coach record 51
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 51, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 51
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'ARA', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 38
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 38, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.4ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 38 AND (`qualifications`.coach_id = 51 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 38 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 51 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 51 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 51 and language_id = 38)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 51 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 38, '2015-01-13 08:18:17', 10, NULL, 51)
Saving a log entry on create for Qualification record 38
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 38, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'CHI', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 39
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 39, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 39 AND (`qualifications`.coach_id = 51 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 39 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 51 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 51 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 51 and language_id = 39)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 51 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 39, '2015-01-13 08:18:17', 10, NULL, 51)
Saving a log entry on create for Qualification record 39
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 39, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'ENG', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 40
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 40, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 40 AND (`qualifications`.coach_id = 51 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 40 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 51 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 51 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 51 and language_id = 40)
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 51 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 40, '2015-01-13 08:18:17', 10, NULL, 51)
Saving a log entry on create for Qualification record 40
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 40, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#request_substitute_for_coach as JS
  Parameters: {"lang_identifier"=>"ARA", "request_from"=>"dashboard", "current_coach_id"=>51, "time"=>"2010-09-06 11:00:00"}
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 and coach_id = 51 and session_start_time = '2010-09-06 11:00:00') ORDER BY coach_sessions.id DESC LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (Views: 0.4ms | ActiveRecord: 51.5ms)
  [1m[35mSQL (40.4ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email241@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email241@rosettastone.com', NULL, 'vramanan', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:17', '2015-01-13 08:18:17', NULL, NULL, 'test', 'vramanan', NULL, NULL, NULL)
Saving a log entry on create for Account record 52
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 52, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:17', 'en-US', 'English', '2015-01-13 08:18:17')[0m
Saving a log entry on create for SupportLanguage record 28
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 28, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 52 LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'TestCoach', 'Coach', NULL, 8, NULL, NULL, 'TestCoach', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:17', 24, NULL, 'en-US', 'TestCoach@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:17', NULL, NULL, NULL, '1', 1, NULL, NULL)[0m
Saving a log entry on create for Coach record 53
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 53, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 53
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'ARA', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 41
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 41, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 41 AND (`qualifications`.coach_id = 53 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 41 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 53 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 53 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 53 and language_id = 41)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 53 LIMIT 1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 41, '2015-01-13 08:18:17', 10, NULL, 53)
Saving a log entry on create for Qualification record 41
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 41, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'CHI', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 42
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 42, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 42 AND (`qualifications`.coach_id = 53 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 42 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 53 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 53 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 53 and language_id = 42)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 53 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 42, '2015-01-13 08:18:17', 10, NULL, 53)
Saving a log entry on create for Qualification record 42
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 42, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'ENG', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 43
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 43, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 43 AND (`qualifications`.coach_id = 53 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 43 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 53 LIMIT 1
  [1m[36mCoach Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 53 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 53 and language_id = 43)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 53 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 43, '2015-01-13 08:18:17', 10, NULL, 53)
Saving a log entry on create for Qualification record 43
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 43, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (38.3ms)[0m  ROLLBACK
  [1m[36mSQL (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email227@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email227@rosettastone.com', NULL, 'vramanan', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:17', '2015-01-13 08:18:17', NULL, NULL, 'test', 'vramanan', NULL, NULL, NULL)
Saving a log entry on create for Account record 54
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 54, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:17', 'en-US', 'English', '2015-01-13 08:18:17')[0m
Saving a log entry on create for SupportLanguage record 29
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 29, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 54 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'TestCoach', 'Coach', NULL, 8, NULL, NULL, 'TestCoach', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:17', 24, NULL, 'en-US', 'TestCoach@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:17', NULL, NULL, NULL, '1', 1, NULL, NULL)[0m
Saving a log entry on create for Coach record 55
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 55, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 55
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'ARA', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 44
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 44, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 44 AND (`qualifications`.coach_id = 55 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 44 LIMIT 1[0m
  [1m[35mCoachManager Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 55 LIMIT 1
  [1m[36mCoach Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 55 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 55 and language_id = 44)
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 55 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 44, '2015-01-13 08:18:17', 10, NULL, 55)
Saving a log entry on create for Qualification record 44
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 44, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'CHI', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 45
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 45, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 45 AND (`qualifications`.coach_id = 55 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 45 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 55 LIMIT 1
  [1m[36mCoach Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 55 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 55 and language_id = 45)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 55 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 45, '2015-01-13 08:18:17', 10, NULL, 55)
Saving a log entry on create for Qualification record 45
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 45, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'ENG', 'TotaleLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 46
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 46, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 46 AND (`qualifications`.coach_id = 55 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 46 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 55 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 55 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 55 and language_id = 46)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 55 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 46, '2015-01-13 08:18:17', 10, NULL, 55)
Saving a log entry on create for Qualification record 46
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 46, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (31.3ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email312@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email312@rosettastone.com', NULL, 'vramanan', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:17', '2015-01-13 08:18:17', NULL, NULL, 'test', 'vramanan', NULL, NULL, NULL)
Saving a log entry on create for Account record 56
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 56, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:17', 'en-US', 'English', '2015-01-13 08:18:17')[0m
Saving a log entry on create for SupportLanguage record 30
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 30, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 56 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'rajkumar', 'Coach', NULL, 8, NULL, NULL, 'rajkumar', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:17', 24, NULL, 'en-US', 'rajkumar@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:17', NULL, NULL, NULL, '1', 1, NULL, NULL)[0m
Saving a log entry on create for Coach record 57
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 57, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 57
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'KLE', 'ReflexLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 47
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 47, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 47 AND (`qualifications`.coach_id = 57 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 47 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 57 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 57 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 57 and language_id = 47)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 57 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 47, '2015-01-13 08:18:17', 10, NULL, 57)
Saving a log entry on create for Qualification record 47
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 47, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'HEB' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (32.3ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.5ms)[0m  INSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'rajkumar', 'Coach', NULL, 8, NULL, NULL, 'rajkumar', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:17', 24, NULL, 'en-US', 'rajkumar@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:17', NULL, NULL, NULL, '1', 1, NULL, NULL)
Saving a log entry on create for Coach record 58
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 58, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 58
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:17', 'en-US', 'English', '2015-01-13 08:18:17')[0m
Saving a log entry on create for SupportLanguage record 31
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 31, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:17', '2015-01-13 08:18:17', 'KLE', 'ReflexLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)[0m
Saving a log entry on create for Language record 48
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 48, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 48 AND (`qualifications`.coach_id = 58 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 48 LIMIT 1
  [1m[36mCoachManager Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 58 LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 58 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 58 and language_id = 48)[0m
  [1m[35mCoachManager Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 58 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:17', 48, '2015-01-13 08:18:17', 10, NULL, 58)[0m
Saving a log entry on create for Qualification record 48
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 48, '2015-01-13 08:18:17', '2015-01-13 08:18:17', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 58
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 58
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.3ms)[0m  UPDATE `accounts` SET `created_at` = '2015-01-12 08:18:17', `updated_at` = '2015-01-13 08:18:17' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 58
Saving a log entry on update for Coach record 58
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE (`qualifications`.coach_id = 58 AND (max_unit > 0))
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 58 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.5ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 58 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `coach_sessions` (`name`, `reassigned`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`, `cancelled`, `session_status`, `attendance_count`, `coach_showed_up`, `updated_at`, `eschool_session_id`, `cancellation_reason`, `single_number_unit`, `recurring_schedule_id`, `number_of_seats`, `external_village_id`, `type`, `session_end_time`, `language_id`, `created_at`, `seconds_prior_to_session`, `language_identifier`) VALUES (NULL, NULL, NULL, NULL, 58, '2015-01-13 12:00:00', 0, 1, NULL, 0, '2015-01-13 08:18:18', NULL, NULL, 1, NULL, 0, NULL, 'ConfirmedSession', '2015-01-13 12:30:00', 48, '2015-01-13 08:18:18', NULL, 'KLE')
Saving a log entry on create for ConfirmedSession record 15
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'CoachSession', NULL, 'create', NULL, 15, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 15) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoach Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 58 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 58) AND ((max_unit > 0)))
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`coach_id`, `created_at`, `updated_at`, `start_date`, `approval_status`, `unavailability_type`, `end_date`, `comments`, `ancestry`, `coach_session_id`) VALUES (58, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '2015-01-13 12:00:00', 1, 1, '2015-01-13 12:30:00', 'Auto Approved - Coach requested Substitute', NULL, 15)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 8
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'UnavailableDespiteTemplate', NULL, 'create', NULL, 8, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 15 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `substitutions` (`cancelled`, `created_at`, `updated_at`, `grabbed`, `grabbed_at`, `coach_session_id`, `session_type`, `was_reassigned`, `lang_id`, `grabber_coach_id`, `coach_id`, `reason`) VALUES (0, '2015-01-13 08:18:18', '2015-01-13 08:18:18', 0, NULL, 15, 'normal', 0, NULL, NULL, 58, NULL)
Saving a log entry on create for Substitution record 19
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', NULL, 'create', NULL, 19, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.6ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND id <> 15) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.3ms)[0m  UPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:18:18' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 15
Saving a log entry on update for ConfirmedSession record 15
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'CoachSession', NULL, 'update', 58, 15, '2015-01-13 08:18:18', '2015-01-13 08:18:18', 'coach_id')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 48 OR identifier = 48) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoach Load (1.0ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '48')[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 48 OR identifier = 48) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.1ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoachManager Load (0.8ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '48')
  [1m[36mTriggerEvent Load (0.1ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1[0m
  [1m[35mNotification Load (0.1ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1
  Processing by SubstitutionController#substitutions_alert as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 58 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.3ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 58) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 58) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `preference_settings` (`account_id`, `session_alerts_display_time`, `no_of_notifications_to_display`, `calendar_notices_email`, `no_of_substitution_alerts_to_display`, `daily_cap`, `timeoff_request_email`, `substitution_alerts_sms`, `mails_sent`, `coach_not_present_alert`, `calendar_notices_display_time`, `start_page`, `notifications_display_time`, `no_of_home_substitutions`, `no_of_home_announcements`, `default_language_for_master_scheduler`, `updated_at`, `timeoff_request_email_type`, `calendar_notices_email_type`, `notifications_email`, `no_of_calendar_notices_to_display`, `no_of_home_notifications`, `substitution_policy_email_type`, `created_at`, `substitution_alerts_email_sending_schedule`, `no_of_learner_dashboard_records`, `substitution_alerts_email`, `substitution_policy_email`, `substitution_policy_email_sending_schedule`, `substitution_alerts_display_time`, `notifications_email_sending_schedule`, `no_of_home_events`, `calendar_notices_email_sending_schedule`, `substitution_alerts_email_type`, `notifications_email_type`) VALUES (58, 10, NULL, NULL, 5, NULL, NULL, 1, 0, NULL, NULL, 'CALENDAR', NULL, 5, 5, NULL, '2015-01-13 08:18:18', NULL, 'PER', NULL, NULL, 5, NULL, '2015-01-13 08:18:18', 'IMMEDIATELY', NULL, NULL, NULL, NULL, 86400, 'IMMEDIATELY', 5, 'IMMEDIATELY', 'PER', 'PER')[0m
Saving a log entry on create for PreferenceSetting record 7
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'PreferenceSetting', NULL, 'create', NULL, 7, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.7ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 58 AND session_start_time < '2015-01-13 08:28:18' AND session_start_time >= '2015-01-13 08:18:18' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1
  [1m[36mShownSubstitutions Load (0.3ms)[0m  [1mSELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 58 LIMIT 1[0m
  [1m[35mSubstitution Load (0.9ms)[0m  SELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions, qualifications, languages) on (coach_sessions.id = substitutions.coach_session_id and languages.identifier = coach_sessions.language_identifier and languages.id = qualifications.language_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:18:18' and coach_sessions.session_end_time > '2015-01-13 08:18:18' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL and qualifications.coach_id = 58) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 15 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 48 LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 15)) LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 58 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 58 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00')[0m
  [1m[35mLocalSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 58 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND action != 'create')
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 58) AND ((max_unit > 0)))[0m
  [1m[35mCoachRecurringSchedule Load (0.4ms)[0m  SELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 58 and day_index = 2 and start_time = '12:00:00' and recurring_start_date <= '2015-01-13 12:00:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 12:00:00')) ORDER BY recurring_start_date DESC LIMIT 1
  [1m[36mCoachRecurringSchedule Load (0.3ms)[0m  [1mSELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 58 and day_index = 2 and start_time = '11:00:00' and recurring_start_date <= '2015-01-13 11:00:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 11:00:00')) ORDER BY recurring_start_date DESC LIMIT 1[0m
  [1m[35mCoachRecurringSchedule Load (0.4ms)[0m  SELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 58 and day_index = 2 and start_time = '12:30:00' and recurring_start_date <= '2015-01-13 12:30:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 12:30:00')) ORDER BY recurring_start_date DESC LIMIT 1
  [1m[36mCoachRecurringSchedule Load (0.4ms)[0m  [1mSELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 58 and day_index = 2 and start_time = '11:30:00' and recurring_start_date <= '2015-01-13 11:30:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 11:30:00')) ORDER BY recurring_start_date DESC LIMIT 1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 58 AND language_id = 48) ORDER BY qualifications.id DESC LIMIT 1
  [1m[36mCoach Load (0.6ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` INNER JOIN `qualifications` ON `accounts`.id = `qualifications`.coach_id WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND ((`qualifications`.language_id = 48) AND ((max_unit > 0 and active = 1))) ORDER BY trim(full_name)[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`coach_id` = 58 AND `qualifications`.`language_id` = 48 LIMIT 1
Rendered substitution/_substitutions_alert.html.erb (1.2ms)
Completed 200 OK in 195ms (Views: 2.7ms | ActiveRecord: 202.9ms)
  [1m[36mSQL (32.4ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.1ms)[0m  BEGIN
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email791@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email791@rosettastone.com', NULL, 'vramanan', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:18', '2015-01-13 08:18:18', NULL, NULL, 'test', 'vramanan', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 59
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Account', NULL, 'create', NULL, 59, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:18', 'en-US', 'English', '2015-01-13 08:18:18')
Saving a log entry on create for SupportLanguage record 32
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 32, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 59 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'rajkumar', 'Coach', NULL, 8, NULL, NULL, 'rajkumar', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:18', 24, NULL, 'en-US', 'rajkumar@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:18', NULL, NULL, NULL, '1', 1, NULL, NULL)
Saving a log entry on create for Coach record 60
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Account', NULL, 'create', NULL, 60, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 60
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:18', '2015-01-13 08:18:18', 'KLE', 'ReflexLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)[0m
Saving a log entry on create for Language record 49
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Language', NULL, 'create', NULL, 49, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 49 AND (`qualifications`.coach_id = 60 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 49 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 60 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 60 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 60 and language_id = 49)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 60 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:18', 49, '2015-01-13 08:18:18', 10, NULL, 60)[0m
Saving a log entry on create for Qualification record 49
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Qualification', NULL, 'create', NULL, 49, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 60 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`name`, `reassigned`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`, `cancelled`, `session_status`, `attendance_count`, `coach_showed_up`, `updated_at`, `eschool_session_id`, `cancellation_reason`, `single_number_unit`, `recurring_schedule_id`, `number_of_seats`, `external_village_id`, `type`, `session_end_time`, `language_id`, `created_at`, `seconds_prior_to_session`, `language_identifier`) VALUES (NULL, NULL, NULL, NULL, 60, '2015-01-13 09:00:00', 0, 1, NULL, 0, '2015-01-13 08:18:18', NULL, NULL, 1, NULL, 0, NULL, 'ConfirmedSession', '2015-01-13 09:30:00', 49, '2015-01-13 08:18:18', NULL, 'KLE')[0m
Saving a log entry on create for ConfirmedSession record 16
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'CoachSession', NULL, 'create', NULL, 16, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')
  [1m[36mSessionMetadata Load (0.3ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 16) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 60 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 60) AND ((max_unit > 0)))[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `unavailable_despite_templates` (`coach_id`, `created_at`, `updated_at`, `start_date`, `approval_status`, `unavailability_type`, `end_date`, `comments`, `ancestry`, `coach_session_id`) VALUES (60, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '2015-01-13 09:00:00', 1, 1, '2015-01-13 09:30:00', 'Auto Approved - Coach requested Substitute', NULL, 16)
Saving a log entry on create for UnavailableDespiteTemplate record 9
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'UnavailableDespiteTemplate', NULL, 'create', NULL, 9, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 16 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `created_at`, `updated_at`, `grabbed`, `grabbed_at`, `coach_session_id`, `session_type`, `was_reassigned`, `lang_id`, `grabber_coach_id`, `coach_id`, `reason`) VALUES (0, '2015-01-13 08:18:18', '2015-01-13 08:18:18', 0, NULL, 16, 'normal', 0, NULL, NULL, 60, NULL)[0m
Saving a log entry on create for Substitution record 20
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'Substitution', NULL, 'create', NULL, 20, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 16) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:18:18' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 16[0m
Saving a log entry on update for ConfirmedSession record 16
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('rajkumar', 'CoachSession', NULL, 'update', 60, 16, '2015-01-13 08:18:18', '2015-01-13 08:18:18', 'coach_id')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 49 OR identifier = 49) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoach Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '49')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 49 OR identifier = 49) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoachManager Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '49')[0m
  [1m[35mTriggerEvent Load (0.1ms)[0m  SELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1
  [1m[36mNotification Load (0.1ms)[0m  [1mSELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1[0m
  Processing by SubstitutionController#substitutions_alert as HTML
  [1m[35mPreferenceSetting Load (0.3ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 59) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 59) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `preference_settings` (`account_id`, `session_alerts_display_time`, `no_of_notifications_to_display`, `calendar_notices_email`, `no_of_substitution_alerts_to_display`, `daily_cap`, `timeoff_request_email`, `substitution_alerts_sms`, `mails_sent`, `coach_not_present_alert`, `calendar_notices_display_time`, `start_page`, `notifications_display_time`, `no_of_home_substitutions`, `no_of_home_announcements`, `default_language_for_master_scheduler`, `updated_at`, `timeoff_request_email_type`, `calendar_notices_email_type`, `notifications_email`, `no_of_calendar_notices_to_display`, `no_of_home_notifications`, `substitution_policy_email_type`, `created_at`, `substitution_alerts_email_sending_schedule`, `no_of_learner_dashboard_records`, `substitution_alerts_email`, `substitution_policy_email`, `substitution_policy_email_sending_schedule`, `substitution_alerts_display_time`, `notifications_email_sending_schedule`, `no_of_home_events`, `calendar_notices_email_sending_schedule`, `substitution_alerts_email_type`, `notifications_email_type`) VALUES (59, NULL, NULL, NULL, 5, NULL, NULL, NULL, 0, NULL, NULL, 'CM_MS', NULL, 5, 5, NULL, '2015-01-13 08:18:18', NULL, 'PER', NULL, NULL, 5, NULL, '2015-01-13 08:18:18', 'IMMEDIATELY', NULL, NULL, NULL, NULL, 86400, 'IMMEDIATELY', 5, 'IMMEDIATELY', 'PER', 'PER')[0m
Saving a log entry on create for PreferenceSetting record 8
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'PreferenceSetting', NULL, 'create', NULL, 8, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mShownSubstitutions Load (0.2ms)[0m  SELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 59 LIMIT 1
  [1m[36mSubstitution Load (0.7ms)[0m  [1mSELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions) on (coach_sessions.id = substitutions.coach_session_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:18:18' and coach_sessions.session_end_time > '2015-01-13 08:18:18' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 16 LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 49 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 16)) LIMIT 1
  [1m[36mCmPreference Load (0.2ms)[0m  [1mSELECT `cm_preferences`.* FROM `cm_preferences` WHERE (`cm_preferences`.account_id = 59) LIMIT 1[0m
Rendered shared/_substitutions_alert.html.erb (1.1ms)
Completed 200 OK in 20ms (Views: 2.4ms | ActiveRecord: 47.8ms)
  [1m[35mSQL (41.2ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email477@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email477@rosettastone.com', NULL, 'vramanan', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:18', '2015-01-13 08:18:18', NULL, NULL, 'test', 'vramanan', NULL, NULL, NULL)
Saving a log entry on create for Account record 61
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 61, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:18', 'en-US', 'English', '2015-01-13 08:18:18')[0m
Saving a log entry on create for SupportLanguage record 33
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 33, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 61 LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`is_supervisor`, `mobile_phone`, `hire_date`, `full_name`, `type`, `manager_notes`, `sessions_allowed_per_week`, `photo_content_type`, `photo_file_size`, `user_name`, `lotus_qualified`, `last_logout`, `address`, `photo_file`, `country`, `photo_file_name`, `next_session_alert_in`, `personal_email`, `created_at`, `next_substitution_alert_in`, `manager_id`, `native_language`, `rs_email`, `secondary_phone`, `primary_phone`, `skype_id`, `region_id`, `preferred_name`, `mobile_country_code`, `updated_at`, `coach_guid`, `birth_date`, `other_languages`, `primary_country_code`, `active`, `aim_id`, `bio`) VALUES (0, NULL, NULL, 'rajkumar', 'Coach', NULL, 8, NULL, NULL, 'rajkumar', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:18:18', 24, NULL, 'en-US', 'rajkumar@rs.com', NULL, '5402334456', NULL, NULL, 'test', '1', '2015-01-13 08:18:18', NULL, NULL, NULL, '1', 1, NULL, NULL)[0m
Saving a log entry on create for Coach record 62
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 62, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 62
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`updated_at`, `created_at`, `identifier`, `type`, `duration`, `connection_type`, `last_pushed_week`, `external_scheduler`) VALUES ('2015-01-13 08:18:18', '2015-01-13 08:18:18', 'KLE', 'ReflexLanguage', 30, NULL, '2011-10-27 23:22:54', NULL)
Saving a log entry on create for Language record 50
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Language', NULL, 'create', NULL, 50, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 50 AND (`qualifications`.coach_id = 62 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 50 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 62 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 62 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 62 and language_id = 50)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 62 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `updated_at`, `max_unit`, `dialect_id`, `coach_id`) VALUES ('2015-01-13 08:18:18', 50, '2015-01-13 08:18:18', 10, NULL, 62)
Saving a log entry on create for Qualification record 50
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Qualification', NULL, 'create', NULL, 50, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 62 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`name`, `reassigned`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`, `cancelled`, `session_status`, `attendance_count`, `coach_showed_up`, `updated_at`, `eschool_session_id`, `cancellation_reason`, `single_number_unit`, `recurring_schedule_id`, `number_of_seats`, `external_village_id`, `type`, `session_end_time`, `language_id`, `created_at`, `seconds_prior_to_session`, `language_identifier`) VALUES (NULL, NULL, NULL, NULL, 62, '2015-01-13 12:00:00', 0, 1, NULL, 0, '2015-01-13 08:18:18', NULL, NULL, 1, NULL, 0, NULL, 'ConfirmedSession', '2015-01-13 12:30:00', 50, '2015-01-13 08:18:18', NULL, 'KLE')
Saving a log entry on create for ConfirmedSession record 17
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'CoachSession', NULL, 'create', NULL, 17, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 17) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 62 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 62) AND ((max_unit > 0)))
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`coach_id`, `created_at`, `updated_at`, `start_date`, `approval_status`, `unavailability_type`, `end_date`, `comments`, `ancestry`, `coach_session_id`) VALUES (62, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '2015-01-13 12:00:00', 1, 1, '2015-01-13 12:30:00', 'Auto Approved - Coach requested Substitute', NULL, 17)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 10
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'UnavailableDespiteTemplate', NULL, 'create', NULL, 10, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 17 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`cancelled`, `created_at`, `updated_at`, `grabbed`, `grabbed_at`, `coach_session_id`, `session_type`, `was_reassigned`, `lang_id`, `grabber_coach_id`, `coach_id`, `reason`) VALUES (0, '2015-01-13 08:18:18', '2015-01-13 08:18:18', 0, NULL, 17, 'normal', 0, NULL, NULL, 62, NULL)
Saving a log entry on create for Substitution record 21
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Substitution', NULL, 'create', NULL, 21, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND id <> 17) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:18:18' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 17
Saving a log entry on update for ConfirmedSession record 17
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'CoachSession', NULL, 'update', 62, 17, '2015-01-13 08:18:18', '2015-01-13 08:18:18', 'coach_id')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 50 OR identifier = 50) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoach Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '50')[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 50 OR identifier = 50) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.1ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoachManager Load (0.6ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '50')
  [1m[36mTriggerEvent Load (0.1ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1[0m
  [1m[35mNotification Load (0.0ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1
  Processing by SubstitutionController#substitutions_alert as HTML
  Parameters: {"closed"=>"false"}
  [1m[36mPreferenceSetting Load (0.3ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 61) LIMIT 1[0m
  [1m[35mPreferenceSetting Load (0.1ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 61) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `preference_settings` (`account_id`, `session_alerts_display_time`, `no_of_notifications_to_display`, `calendar_notices_email`, `no_of_substitution_alerts_to_display`, `daily_cap`, `timeoff_request_email`, `substitution_alerts_sms`, `mails_sent`, `coach_not_present_alert`, `calendar_notices_display_time`, `start_page`, `notifications_display_time`, `no_of_home_substitutions`, `no_of_home_announcements`, `default_language_for_master_scheduler`, `updated_at`, `timeoff_request_email_type`, `calendar_notices_email_type`, `notifications_email`, `no_of_calendar_notices_to_display`, `no_of_home_notifications`, `substitution_policy_email_type`, `created_at`, `substitution_alerts_email_sending_schedule`, `no_of_learner_dashboard_records`, `substitution_alerts_email`, `substitution_policy_email`, `substitution_policy_email_sending_schedule`, `substitution_alerts_display_time`, `notifications_email_sending_schedule`, `no_of_home_events`, `calendar_notices_email_sending_schedule`, `substitution_alerts_email_type`, `notifications_email_type`) VALUES (61, NULL, NULL, NULL, 5, NULL, NULL, NULL, 0, NULL, NULL, 'CM_MS', NULL, 5, 5, NULL, '2015-01-13 08:18:18', NULL, 'PER', NULL, NULL, 5, NULL, '2015-01-13 08:18:18', 'IMMEDIATELY', NULL, NULL, NULL, NULL, 86400, 'IMMEDIATELY', 5, 'IMMEDIATELY', 'PER', 'PER')
Saving a log entry on create for PreferenceSetting record 9
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'PreferenceSetting', NULL, 'create', NULL, 9, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mShownSubstitutions Load (0.2ms)[0m  [1mSELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 61 LIMIT 1[0m
  [1m[35mSubstitution Load (0.6ms)[0m  SELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions) on (coach_sessions.id = substitutions.coach_session_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:18:18' and coach_sessions.session_end_time > '2015-01-13 08:18:18' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 17 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 50 LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 17)) LIMIT 1[0m
  [1m[35mCmPreference Load (0.2ms)[0m  SELECT `cm_preferences`.* FROM `cm_preferences` WHERE (`cm_preferences`.account_id = 61) LIMIT 1
Rendered shared/_substitutions_alert.html.erb (0.5ms)
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 55.0ms)
  [1m[36mSQL (38.8ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email760@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'rs_email760@rosettastone.com', NULL, 'test21', '5402334456', NULL, 0, NULL, NULL, 'CoachManager', '2015-01-13 08:18:18', '2015-01-13 08:18:18', NULL, NULL, 'test', 'test21', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 63
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 63, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`updated_at`, `language_code`, `name`, `created_at`) VALUES ('2015-01-13 08:18:18', 'en-US', 'English', '2015-01-13 08:18:18')
Saving a log entry on create for SupportLanguage record 34
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES (NULL, 'SupportLanguage', NULL, 'create', NULL, 34, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 63 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test990') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'user_678@factory.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`coach_guid`, `personal_email`, `address`, `sessions_allowed_per_week`, `photo_file_name`, `active`, `last_logout`, `mobile_phone`, `manager_id`, `native_language`, `skype_id`, `mobile_country_code`, `photo_content_type`, `lotus_qualified`, `next_substitution_alert_in`, `primary_country_code`, `photo_file_size`, `secondary_phone`, `photo_file`, `rs_email`, `aim_id`, `full_name`, `primary_phone`, `birth_date`, `is_supervisor`, `hire_date`, `country`, `type`, `updated_at`, `created_at`, `region_id`, `other_languages`, `preferred_name`, `user_name`, `manager_notes`, `bio`, `next_session_alert_in`) VALUES (NULL, NULL, NULL, 8, NULL, 1, NULL, NULL, NULL, 'en-US', NULL, '1', NULL, 1, 24, '1', NULL, NULL, NULL, 'user_678@factory.com', NULL, 'test', '5402334456', NULL, 0, NULL, NULL, 'Coach', '2015-01-13 08:18:18', '2015-01-13 08:18:18', NULL, NULL, 'test', 'test990', NULL, NULL, NULL)
Saving a log entry on create for Account record 64
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`changed_by`, `loggable_type`, `new_value`, `action`, `previous_value`, `loggable_id`, `timestamp`, `created_at`, `attribute_name`) VALUES ('vramanan', 'Account', NULL, 'create', NULL, 64, '2015-01-13 08:18:18', '2015-01-13 08:18:18', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`eschool_session_id` = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ESP' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (39.3ms)[0m  [1mROLLBACK[0m
[WARNING] Audit logging has been enabled for Account
[WARNING] Audit logging has been enabled for AddConsumableLog
[WARNING] Audit logging has been enabled for Announcement
[WARNING] Audit logging has been enabled for CoachSession
[WARNING] Audit logging has been enabled for Language
[WARNING] Audit logging has been enabled for CmPreference
  [1m[36mSQL (0.5ms)[0m  [1mSHOW TABLES[0m
[WARNING] Audit logging has been enabled for CoachAvailability
[WARNING] Audit logging has been enabled for CoachAvailabilityTemplate
[WARNING] Audit logging has been enabled for CoachRecurringSchedule
[WARNING] Audit logging has been enabled for DelayedJob
[WARNING] Audit logging has been enabled for Event
[WARNING] Audit logging has been enabled for ExcludedCoachesSession
[WARNING] Audit logging has been enabled for LanguageConfiguration
[WARNING] Audit logging has been enabled for LearnerSupportStatus
[WARNING] Audit logging has been enabled for Level
  [1m[35mLevel Load (0.1ms)[0m  SELECT `levels`.* FROM `levels`
[WARNING] Audit logging has been enabled for Link
[WARNING] Audit logging has been enabled for ManagementTeamMember
[WARNING] Audit logging has been enabled for MasterSchedulerBulkData
[WARNING] Audit logging has been enabled for MsDraftData
[WARNING] Audit logging has been enabled for MsErrorMessage
[WARNING] Audit logging has been enabled for Notification
[WARNING] Audit logging has been enabled for NotificationMessageDynamic
[WARNING] Audit logging has been enabled for NotificationRecipient
[WARNING] Audit logging has been enabled for PreferenceSetting
[WARNING] Audit logging has been enabled for Qualification
[WARNING] Audit logging has been enabled for RealTimeLotusData
[WARNING] Audit logging has been enabled for Region
[WARNING] Audit logging has been enabled for Resource
[WARNING] Audit logging has been enabled for RightsExtensionLog
[WARNING] Audit logging has been enabled for Role
[WARNING] Audit logging has been enabled for RolesTask
[WARNING] Audit logging has been enabled for SchedulerMetadata
[WARNING] Audit logging has been enabled for ShownSubstitutions
[WARNING] Audit logging has been enabled for Substitution
[WARNING] Audit logging has been enabled for SupportLanguage
[WARNING] Audit logging has been enabled for SupportWindow
[WARNING] Audit logging has been enabled for SystemNotification
[WARNING] Audit logging has been enabled for Task
[WARNING] Audit logging has been enabled for TaskTracer
[WARNING] Audit logging has been enabled for TempData
[WARNING] Audit logging has been enabled for TriggerEvent
[WARNING] Audit logging has been enabled for UnavailableDespiteTemplate
[WARNING] Audit logging has been enabled for UncapLearnerLog
[WARNING] Audit logging has been enabled for UserLanguage
[WARNING] Audit logging has been enabled for UserUpdateExecutionDetail
[WARNING] Audit logging has been enabled for UserVillage
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mSQL (1.4ms)[0m  describe `accounts`
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'rajkumar@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'rajkumar', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:17', NULL, NULL, 24, NULL, '1', 8, 'rajkumar', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:17')[0m
Saving a log entry on create for Coach record 65
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mSQL (0.5ms)[0m  describe `audit_log_records`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 65, '2015-01-13 08:19:17', '2015-01-13 08:19:17', NULL, '', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 65
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mdescribe `support_languages`[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:17', 'en-US', '2015-01-13 08:19:17', 'English')
Saving a log entry on create for SupportLanguage record 35
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 35, '2015-01-13 08:19:17', '2015-01-13 08:19:17', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.4ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  describe `languages`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('ARA', '2015-01-13 08:19:17', '2015-01-13 08:19:17', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 51
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 51, '2015-01-13 08:19:17', '2015-01-13 08:19:17', NULL, '', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 51 AND (`qualifications`.coach_id = 65 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 51 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 65 LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 65 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 65 and language_id = 51)[0m
  [1m[35mCoachManager Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 65 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mdescribe `qualifications`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:17', 51, NULL, 10, '2015-01-13 08:19:17', 65)
Saving a log entry on create for Qualification record 51
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 51, '2015-01-13 08:19:17', '2015-01-13 08:19:17', NULL, '', '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions`[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.4ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 65 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mdescribe `coach_sessions`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`reassigned`, `number_of_seats`, `recurring_schedule_id`, `session_status`, `language_id`, `session_end_time`, `attendance_count`, `appointment_type_id`, `topic_id`, `external_village_id`, `language_identifier`, `coach_showed_up`, `eschool_session_id`, `created_at`, `name`, `single_number_unit`, `session_start_time`, `coach_id`, `cancellation_reason`, `updated_at`, `type`, `seconds_prior_to_session`, `cancelled`) VALUES (NULL, 0, NULL, 1, 51, '2015-01-13 09:30:00', NULL, NULL, NULL, NULL, 'ARA', 0, 343, '2015-01-13 08:19:18', NULL, 1, '2015-01-13 09:00:00', 65, NULL, '2015-01-13 08:19:18', 'ConfirmedSession', NULL, 0)
Saving a log entry on create for ConfirmedSession record 18
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 18, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, '', '', 'create')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 18) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 18 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  describe `substitutions`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, NULL, 'normal', '2015-01-13 08:19:18', 0, 0, NULL, 18, NULL, 'Electricity Outage', 65, '2015-01-13 08:19:18')[0m
Saving a log entry on create for Substitution record 22
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 22, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, '', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email462@rosettastone.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'vramanan', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:18', 'CoachManager', NULL, 1, 'rs_email462@rosettastone.com', NULL, 'vramanan', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:18', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)[0m
Saving a log entry on create for Account record 66
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 66, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, '', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 66 LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'AUS' OR identifier = 'AUS') ORDER BY languages.id DESC LIMIT 1[0m
  Processing by SubstitutionController#assign_substitute_for_coach as HTML
  Parameters: {"assigned_coach"=>65, "coach_id"=>65, "coach_session_id"=>18}
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 65 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 18 LIMIT 1[0m
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 18) ORDER BY substitutions.id DESC LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 18 LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mUPDATE `substitutions` SET `was_reassigned` = 1, `updated_at` = '2015-01-13 08:19:18', `grabbed` = 1, `grabbed_at` = '2015-01-13 08:19:18', `grabber_coach_id` = 65 WHERE `substitutions`.`id` = 22[0m
Saving a log entry on update for Substitution record 22
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (1, 'Substitution', 22, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', 'was_reassigned', 'update')
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (65, 'Substitution', 22, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', 'grabber_coach_id', 'update')[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (1, 'Substitution', 22, '2015-01-13 08:19:18', '2015-01-13 08:19:18', 0, 'vramanan', 'grabbed', 'update')
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES ('2015-01-13 08:19:18', 'Substitution', 22, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', 'grabbed_at', 'update')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 65 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 18) ORDER BY updated_at DESC LIMIT 1[0m
Saving a log entry on update for ConfirmedSession record 18
  [1m[35mSessionMetadata Load (0.1ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 18) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 65 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mTriggerEvent Load (0.2ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'MANUALLY_REASSIGNED' LIMIT 1[0m
  [1m[35mNotification Load (0.1ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 11) LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 18 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 51 LIMIT 1
Completed 200 OK in 52ms (Views: 16.0ms | ActiveRecord: 91.5ms)
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'Check' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'Check') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'Check@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'Check@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'Check', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:18', NULL, NULL, 24, NULL, '1', 8, 'Check', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:18')[0m
Saving a log entry on create for Coach record 67
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 67, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 67
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'AUS' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'AUS') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('AUS', '2015-01-13 08:19:18', '2015-01-13 08:19:18', '2011-10-27 23:22:54', NULL, 'AriaLanguage', NULL, 30)
Saving a log entry on create for Language record 52
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 52, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 52 AND (`qualifications`.coach_id = 67 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 52 LIMIT 1[0m
  [1m[35mCoachManager Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 67 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 67 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 67 and language_id = 52)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 67 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:18', 52, NULL, 10, '2015-01-13 08:19:18', 67)
Saving a log entry on create for Qualification record 52
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 52, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 18 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, NULL, 'normal', '2015-01-13 08:19:18', 0, 1, NULL, 18, 65, NULL, 65, '2015-01-13 08:19:18')[0m
Saving a log entry on create for Substitution record 23
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 23, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#assign_substitute_for_coach as HTML
  Parameters: {"assigned_coach"=>65, "coach_id"=>65, "coach_session_id"=>18}
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 67 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 18 LIMIT 1[0m
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 18) ORDER BY substitutions.id DESC LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 18 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, 0, 'normal', '2015-01-13 08:19:18', 0, 0, NULL, 18, NULL, NULL, 65, '2015-01-13 08:19:18')[0m
Saving a log entry on create for Substitution record 24
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 24, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 51 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 65 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 65) AND ((max_unit > 0)))[0m
  [1m[35mSQL (0.5ms)[0m  describe `unavailable_despite_templates`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`coach_session_id`, `updated_at`, `comments`, `ancestry`, `unavailability_type`, `coach_id`, `end_date`, `created_at`, `approval_status`, `start_date`) VALUES (18, '2015-01-13 08:19:18', 'Auto Approved - Coach requested Substitute', NULL, 5, 65, '2015-01-13 09:30:00', '2015-01-13 08:19:18', 1, '2015-01-13 09:00:00')[0m
Saving a log entry on create for UnavailableDespiteTemplate record 11
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'UnavailableDespiteTemplate', 11, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.3ms)[0m  [1mUPDATE `substitutions` SET `was_reassigned` = 1, `updated_at` = '2015-01-13 08:19:18', `grabbed` = 1, `grabbed_at` = '2015-01-13 08:19:18', `grabber_coach_id` = 67 WHERE `substitutions`.`id` = 24[0m
Saving a log entry on update for Substitution record 24
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (1, 'Substitution', 24, '2015-01-13 08:19:18', '2015-01-13 08:19:18', 0, 'vramanan', 'was_reassigned', 'update')
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (67, 'Substitution', 24, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', 'grabber_coach_id', 'update')[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (1, 'Substitution', 24, '2015-01-13 08:19:18', '2015-01-13 08:19:18', 0, 'vramanan', 'grabbed', 'update')
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES ('2015-01-13 08:19:18', 'Substitution', 24, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', 'grabbed_at', 'update')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 67 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 18) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = 67, `updated_at` = '2015-01-13 08:19:18' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 18
Saving a log entry on update for ConfirmedSession record 18
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (67, 'CoachSession', 18, '2015-01-13 08:19:18', '2015-01-13 08:19:18', 65, 'vramanan', 'coach_id', 'update')[0m
  [1m[35mSessionMetadata Load (0.1ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 18) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 67 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 18) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `reassigned` = 1, `updated_at` = '2015-01-13 08:19:18' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 18[0m
Saving a log entry on update for ConfirmedSession record 18
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (1, 'CoachSession', 18, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', 'reassigned', 'update')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 65 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  describe `system_notifications`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `system_notifications` (`created_at`, `updated_at`, `recipient_id`, `target_id`, `status`, `recipient_type`, `notification_id`, `raw_message`) VALUES ('2015-01-13 08:19:18', '2015-01-13 08:19:18', 67, NULL, 0, 'Account', NULL, 'You have been assigned a <b>Arabic</b> session on <b>January 13, 2015 04:00 AM</b>.')[0m
Saving a log entry on create for SystemNotification record 3
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SystemNotification', 3, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 18 LIMIT 1
  [1m[36mSubstitution Load (0.1ms)[0m  [1mSELECT `substitutions`.* FROM `substitutions` WHERE (coach_id = NULL and coach_session_id = 18 ) ORDER BY id desc LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 51 LIMIT 1
Completed 200 OK in 77ms (Views: 0.5ms | ActiveRecord: 13.7ms)
  [1m[36mSQL (58.4ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email777@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'vramanan', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:18', 'CoachManager', NULL, 1, 'rs_email777@rosettastone.com', NULL, 'vramanan', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:18', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)[0m
Saving a log entry on create for Account record 68
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 68, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.3ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:18', 'en-US', '2015-01-13 08:19:18', 'English')
Saving a log entry on create for SupportLanguage record 36
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 36, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 68 LIMIT 1[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'rajkumar@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'rajkumar', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:18', NULL, NULL, 24, NULL, '1', 8, 'rajkumar', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:18')
Saving a log entry on create for Coach record 69
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 69, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 69
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.3ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('KLE', '2015-01-13 08:19:18', '2015-01-13 08:19:18', '2011-10-27 23:22:54', NULL, 'ReflexLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 53
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 53, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 53 AND (`qualifications`.coach_id = 69 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 53 LIMIT 1
  [1m[36mCoachManager Load (0.9ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 69 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 69 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 69 and language_id = 53)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 69 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:18', 53, NULL, 10, '2015-01-13 08:19:18', 69)[0m
Saving a log entry on create for Qualification record 53
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 53, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`reassigned`, `number_of_seats`, `recurring_schedule_id`, `session_status`, `language_id`, `session_end_time`, `attendance_count`, `appointment_type_id`, `topic_id`, `external_village_id`, `language_identifier`, `coach_showed_up`, `eschool_session_id`, `created_at`, `name`, `single_number_unit`, `session_start_time`, `coach_id`, `cancellation_reason`, `updated_at`, `type`, `seconds_prior_to_session`, `cancelled`) VALUES (NULL, 0, NULL, 1, 53, '2015-01-13 10:30:00', NULL, NULL, NULL, NULL, 'KLE', 0, 345698, '2015-01-13 08:19:18', NULL, 1, '2015-01-13 10:00:00', 18, NULL, '2015-01-13 08:19:18', 'ConfirmedSession', NULL, 0)[0m
Saving a log entry on create for ConfirmedSession record 19
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 19, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')
  [1m[36mSessionMetadata Load (0.3ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 19) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 19 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, NULL, 'normal', '2015-01-13 08:19:18', 0, 0, NULL, 19, NULL, 'Electricity Outage', 69, '2015-01-13 08:19:18')[0m
Saving a log entry on create for Substitution record 25
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 25, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#cancel_substitution as HTML
  Parameters: {"notice"=>true, "reason"=>"Electricity Outage", "sub_id"=>25}
  [1m[35mSubstitution Load (0.3ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE `substitutions`.`id` = 25 LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 19 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 53 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `substitutions` SET `updated_at` = '2015-01-13 08:19:18', `cancelled` = 1 WHERE `substitutions`.`id` = 25
Saving a log entry on update for Substitution record 25
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (1, 'Substitution', 25, '2015-01-13 08:19:18', '2015-01-13 08:19:18', 0, 'vramanan', 'cancelled', 'update')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoach Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 69 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.3ms)[0m  [1mUPDATE `coach_sessions` SET `cancellation_reason` = 'Electricity Outage', `updated_at` = '2015-01-13 08:19:18' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 19[0m
Saving a log entry on update for ConfirmedSession record 19
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES ('Electricity Outage', 'CoachSession', 19, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', 'cancellation_reason', 'update')
  [1m[36mSessionMetadata Load (0.1ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 19) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 20ms (Views: 2.4ms | ActiveRecord: 71.3ms)
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'Ven' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'Ven') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'Ven@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'Ven@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'Ven', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:18', NULL, NULL, 24, NULL, '1', 8, 'Ven', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:18')[0m
Saving a log entry on create for Coach record 70
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 70, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 70
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('ARA', '2015-01-13 08:19:18', '2015-01-13 08:19:18', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)
Saving a log entry on create for Language record 54
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 54, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 54 AND (`qualifications`.coach_id = 70 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 54 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 70 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 70 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 70 and language_id = 54)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 70 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:18', 54, NULL, 10, '2015-01-13 08:19:18', 70)
Saving a log entry on create for Qualification record 54
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 54, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 70 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `coach_sessions` (`reassigned`, `number_of_seats`, `recurring_schedule_id`, `session_status`, `language_id`, `session_end_time`, `attendance_count`, `appointment_type_id`, `topic_id`, `external_village_id`, `language_identifier`, `coach_showed_up`, `eschool_session_id`, `created_at`, `name`, `single_number_unit`, `session_start_time`, `coach_id`, `cancellation_reason`, `updated_at`, `type`, `seconds_prior_to_session`, `cancelled`) VALUES (NULL, 0, NULL, 1, 53, '2015-01-13 10:30:00', NULL, NULL, NULL, NULL, 'KLE', 0, 989648, '2015-01-13 08:19:18', NULL, 1, '2015-01-13 10:00:00', 70, NULL, '2015-01-13 08:19:18', 'ConfirmedSession', NULL, 0)
Saving a log entry on create for ConfirmedSession record 20
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 20, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 20) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 20 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, NULL, 'normal', '2015-01-13 08:19:18', 1, 0, NULL, 20, NULL, 'Electricity Outage', 69, '2015-01-13 08:19:18')
Saving a log entry on create for Substitution record 26
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 26, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#cancel_substitution as HTML
  Parameters: {"notice"=>true, "reason"=>"Electricity Outage", "sub_id"=>25}
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 989648 LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`eschool_session_id` = 989648 LIMIT 1
  [1m[36mSubstitution Load (0.3ms)[0m  [1mSELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 20) ORDER BY substitutions.id DESC LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 20 LIMIT 1
Completed 500 Internal Server Error in 5ms (Views: 0.5ms | ActiveRecord: 8.0ms)
  [1m[36mSQL (67.0ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.1ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'rajkumar@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'rajkumar', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:18', NULL, NULL, 24, NULL, '1', 8, 'rajkumar', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:18')[0m
Saving a log entry on create for Coach record 71
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 71, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 71
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.3ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:18', 'en-US', '2015-01-13 08:19:18', 'English')
Saving a log entry on create for SupportLanguage record 37
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 37, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('KLE', '2015-01-13 08:19:18', '2015-01-13 08:19:18', '2011-10-27 23:22:54', NULL, 'ReflexLanguage', NULL, 30)
Saving a log entry on create for Language record 55
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 55, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 55 AND (`qualifications`.coach_id = 71 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 55 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 71 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 71 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 71 and language_id = 55)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 71 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:18', 55, NULL, 10, '2015-01-13 08:19:18', 71)
Saving a log entry on create for Qualification record 55
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 55, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 71
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 71
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `accounts` SET `created_at` = '2015-01-12 08:19:18', `updated_at` = '2015-01-13 08:19:18' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 71[0m
Saving a log entry on update for Coach record 71
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE (`qualifications`.coach_id = 71 AND (max_unit > 0))[0m
  [1m[35mSupportLanguage Load (0.1ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 71 LIMIT 1[0m
  [1m[35mCoachSession Load (0.1ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions`
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`reassigned`, `number_of_seats`, `recurring_schedule_id`, `session_status`, `language_id`, `session_end_time`, `attendance_count`, `appointment_type_id`, `topic_id`, `external_village_id`, `language_identifier`, `coach_showed_up`, `eschool_session_id`, `created_at`, `name`, `single_number_unit`, `session_start_time`, `coach_id`, `cancellation_reason`, `updated_at`, `type`, `seconds_prior_to_session`, `cancelled`) VALUES (NULL, 0, NULL, 1, 55, '2015-01-13 10:30:00', NULL, NULL, NULL, NULL, 'KLE', 0, 345698, '2015-01-13 08:19:18', NULL, 1, '2015-01-13 10:00:00', 18, NULL, '2015-01-13 08:19:18', 'ConfirmedSession', NULL, 0)
Saving a log entry on create for ConfirmedSession record 21
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 21, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 21) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 21 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, NULL, 'normal', '2015-01-13 08:19:18', 0, 0, NULL, 21, NULL, NULL, 71, '2015-01-13 08:19:18')
Saving a log entry on create for Substitution record 27
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 27, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#check_sub_policy_violation as JS
  Parameters: {"start_time"=>Tue Jan 13 08:00:00 UTC 2015, "coach_id"=>71}
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 71 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.3ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 71) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 71) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mdescribe `preference_settings`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `preference_settings` (`substitution_policy_email_sending_schedule`, `session_alerts_display_time`, `default_language_for_master_scheduler`, `substitution_alerts_email_type`, `substitution_alerts_display_time`, `calendar_notices_display_time`, `no_of_learner_dashboard_records`, `no_of_substitution_alerts_to_display`, `timeoff_request_email_type`, `notifications_email`, `calendar_notices_email_sending_schedule`, `no_of_home_substitutions`, `substitution_policy_email_type`, `no_of_home_announcements`, `mails_sent`, `start_page`, `calendar_notices_email`, `coach_not_present_alert`, `notifications_email_sending_schedule`, `updated_at`, `substitution_policy_email`, `no_of_notifications_to_display`, `notifications_display_time`, `substitution_alerts_email`, `no_of_calendar_notices_to_display`, `created_at`, `timeoff_request_email`, `calendar_notices_email_type`, `no_of_home_events`, `substitution_alerts_sms`, `substitution_alerts_email_sending_schedule`, `account_id`, `no_of_home_notifications`, `daily_cap`, `notifications_email_type`) VALUES (NULL, 10, NULL, 'PER', 86400, NULL, NULL, 5, NULL, NULL, 'IMMEDIATELY', 5, NULL, 5, 0, 'CALENDAR', NULL, NULL, 'IMMEDIATELY', '2015-01-13 08:19:18', NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:19:18', NULL, 'PER', 5, 1, 'IMMEDIATELY', 71, 5, NULL, 'PER')
Saving a log entry on create for PreferenceSetting record 10
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'PreferenceSetting', 10, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'rajkumar', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 71 AND session_start_time < '2015-01-13 08:29:18' AND session_start_time >= '2015-01-13 08:19:18' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 71 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 71 and session_start_time = '1970-01-17 10:45:36' and cancelled is false) LIMIT 1[0m
  [1m[35mSubstitution Load (0.8ms)[0m  Select DISTINCT * from substitutions s join coach_sessions c on s.coach_session_id = c.id join unavailable_despite_templates u where c.type NOT IN ('ExtraSession','Appointment') and s.coach_id = 71 and c.session_start_time >= '1970-01-01 05:00:00' and c.session_start_time < '1970-02-01 04:59:59' and u.coach_session_id = c.id and (s.coach_id != s.grabber_coach_id OR s.grabber_coach_id is null) and u.unavailability_type in (1,5) order by s.created_at, u.created_at desc;
Completed 200 OK in 61ms (Views: 24.1ms | ActiveRecord: 78.9ms)
  [1m[36mSQL (34.7ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email345@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'vramanan', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:18', 'CoachManager', NULL, 1, 'rs_email345@rosettastone.com', NULL, 'vramanan', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:18', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)[0m
Saving a log entry on create for Account record 72
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 72, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'rajkumar', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:18', 'en-US', '2015-01-13 08:19:18', 'English')
Saving a log entry on create for SupportLanguage record 38
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 38, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 72 LIMIT 1[0m
  [1m[35mAccount Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'rajkumar@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'rajkumar', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:18', NULL, NULL, 24, NULL, '1', 8, 'rajkumar', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:18')
Saving a log entry on create for Coach record 73
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 73, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'rajkumar', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 73
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('KLE', '2015-01-13 08:19:18', '2015-01-13 08:19:18', '2011-10-27 23:22:54', NULL, 'ReflexLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 56
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 56, '2015-01-13 08:19:18', '2015-01-13 08:19:18', NULL, 'rajkumar', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 56 AND (`qualifications`.coach_id = 73 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 56 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 73 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 73 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 73 and language_id = 56)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 73 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:19', 56, NULL, 10, '2015-01-13 08:19:19', 73)[0m
Saving a log entry on create for Qualification record 56
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 56, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'rajkumar', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`reassigned`, `number_of_seats`, `recurring_schedule_id`, `session_status`, `language_id`, `session_end_time`, `attendance_count`, `appointment_type_id`, `topic_id`, `external_village_id`, `language_identifier`, `coach_showed_up`, `eschool_session_id`, `created_at`, `name`, `single_number_unit`, `session_start_time`, `coach_id`, `cancellation_reason`, `updated_at`, `type`, `seconds_prior_to_session`, `cancelled`) VALUES (NULL, 0, NULL, 1, 56, '2015-01-13 10:30:00', NULL, NULL, NULL, NULL, 'KLE', 0, 345698, '2015-01-13 08:19:19', NULL, 1, '2015-01-13 10:00:00', 18, NULL, '2015-01-13 08:19:19', 'ConfirmedSession', NULL, 0)[0m
Saving a log entry on create for ConfirmedSession record 22
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 22, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'rajkumar', '', 'create')
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 22) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 22 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, NULL, 'normal', '2015-01-13 08:19:19', 0, 0, NULL, 22, NULL, 'Electricity Outage', 73, '2015-01-13 08:19:19')[0m
Saving a log entry on create for Substitution record 28
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 28, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'rajkumar', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#fetch_available_coaches as JS
  Parameters: {"fetch_reason"=>true, "sub_id"=>28}
  [1m[35mSubstitution Load (0.3ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE `substitutions`.`id` = 28 LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 22 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 56 LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 56 OR identifier = 56) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mCoach Load (0.8ms)[0m  SELECT coach.* FROM (SELECT a.*, q.max_unit FROM accounts a inner join qualifications q on a.id = q.coach_id where a.type = 'Coach'
 and a.active = 1 and q.language_id IN (56) and q.max_unit >= 0) as coach LEFT JOIN coach_sessions cs on coach.id = cs.coach_id
 and cs.cancelled = 0 and cs.session_start_time between '2015-01-13 09:59:00' and '2015-01-13 10:29:00' and cs.session_end_time > '2015-01-13 10:00:00' where cs.id IS NULL order by trim(coach.full_name)
  [1m[36mCoachRecurringSchedule Load (0.4ms)[0m  [1mSELECT coach_id,
 (CONCAT('2015-01-11 ' , start_time) + INTERVAL day_index DAY +
 INTERVAL (fn_GetZoneOffset(CONVERT_TZ('2015-01-13 10:00:00','GMT','EST')) - fn_GetZoneOffset(CONVERT_TZ(recurring_start_date,'GMT','EST'))) HOUR +
 INTERVAL (CASE WHEN hour(start_time) < fn_GetZoneOffset(CONVERT_TZ(recurring_start_date,'GMT','EST')) AND day_index = 0 THEN 7 ELSE 0 END) day) AS schedule_time
 FROM coach_recurring_schedules
 WHERE coach_id in (73) AND (recurring_end_date IS NULL OR recurring_end_date > '2015-01-13 10:00:00') AND recurring_start_date < '2015-01-13 10:00:00'
 having schedule_time = '2015-01-13 10:00:00';[0m
Mysql2::Error: FUNCTION coachportal_test.fn_GetZoneOffset does not exist: SELECT coach_id,
                (CONCAT('2015-01-11 ' , start_time) + INTERVAL day_index DAY +
                INTERVAL (fn_GetZoneOffset(CONVERT_TZ('2015-01-13 10:00:00','GMT','EST')) - fn_GetZoneOffset(CONVERT_TZ(recurring_start_date,'GMT','EST'))) HOUR +
                INTERVAL (CASE WHEN hour(start_time) < fn_GetZoneOffset(CONVERT_TZ(recurring_start_date,'GMT','EST')) AND day_index = 0 THEN 7 ELSE 0 END) day) AS schedule_time
              FROM coach_recurring_schedules
              WHERE coach_id in (73) AND (recurring_end_date IS NULL OR recurring_end_date > '2015-01-13 10:00:00') AND recurring_start_date < '2015-01-13 10:00:00'
              having schedule_time = '2015-01-13 10:00:00';
Completed 500 Internal Server Error in 8ms
  [1m[35mSQL (35.6ms)[0m  ROLLBACK
  [1m[36mSQL (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email338@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'test21', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:19', 'Coach', NULL, 1, 'rs_email338@rosettastone.com', NULL, 'test21', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:19', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)
Saving a log entry on create for Account record 74
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 74, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'vramanan', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.3ms)[0m  UPDATE `accounts` SET `updated_at` = '2015-01-13 08:19:19', `created_at` = '2015-01-12 08:19:19' WHERE `accounts`.`id` = 74
Saving a log entry on update for Account record 74
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('ARA', '2015-01-13 08:19:19', '2015-01-13 08:19:19', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 57
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 57, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 74 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 74 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 74 and language_id = 57)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 74 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:19', 57, NULL, 10, '2015-01-13 08:19:19', 74)[0m
Saving a log entry on create for Qualification record 57
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 57, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.3ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:19', 'en-US', '2015-01-13 08:19:19', 'English')
Saving a log entry on create for SupportLanguage record 39
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 39, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 74 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `accounts` SET `created_at` = '2015-01-13 08:19:19', `updated_at` = '2015-01-13 08:19:19' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 74[0m
Saving a log entry on update for Coach record 74
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'rajkumar@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'rajkumar', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:19', NULL, NULL, 24, NULL, '1', 8, 'rajkumar', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:19')[0m
Saving a log entry on create for Coach record 75
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 75, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 75
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('KLE', '2015-01-13 08:19:19', '2015-01-13 08:19:19', '2011-10-27 23:22:54', NULL, 'ReflexLanguage', NULL, 30)
Saving a log entry on create for Language record 58
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 58, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 58 AND (`qualifications`.coach_id = 75 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 58 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 75 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 75 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 75 and language_id = 58)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 75 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:19', 58, NULL, 10, '2015-01-13 08:19:19', 75)
Saving a log entry on create for Qualification record 58
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 58, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions`[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`reassigned`, `number_of_seats`, `recurring_schedule_id`, `session_status`, `language_id`, `session_end_time`, `attendance_count`, `appointment_type_id`, `topic_id`, `external_village_id`, `language_identifier`, `coach_showed_up`, `eschool_session_id`, `created_at`, `name`, `single_number_unit`, `session_start_time`, `coach_id`, `cancellation_reason`, `updated_at`, `type`, `seconds_prior_to_session`, `cancelled`) VALUES (NULL, 0, NULL, 1, 58, '2015-01-13 10:30:00', NULL, NULL, NULL, NULL, 'KLE', 0, 345698, '2015-01-13 08:19:19', NULL, 1, '2015-01-13 10:00:00', 18, NULL, '2015-01-13 08:19:19', 'ConfirmedSession', NULL, 0)[0m
Saving a log entry on create for ConfirmedSession record 23
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 23, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'vramanan', '', 'create')
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 23) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 23 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, NULL, 'normal', '2015-01-13 08:19:19', 0, 0, NULL, 23, NULL, 'Electricity Outage', 75, '2015-01-13 08:19:19')[0m
Saving a log entry on create for Substitution record 29
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 29, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 74 AND (max_unit > 0))
  [1m[36mPreferenceSetting Load (0.2ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 74) LIMIT 1[0m
  [1m[35mPreferenceSetting Load (0.1ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 74) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `preference_settings` (`substitution_policy_email_sending_schedule`, `session_alerts_display_time`, `default_language_for_master_scheduler`, `substitution_alerts_email_type`, `substitution_alerts_display_time`, `calendar_notices_display_time`, `no_of_learner_dashboard_records`, `no_of_substitution_alerts_to_display`, `timeoff_request_email_type`, `notifications_email`, `calendar_notices_email_sending_schedule`, `no_of_home_substitutions`, `substitution_policy_email_type`, `no_of_home_announcements`, `mails_sent`, `start_page`, `calendar_notices_email`, `coach_not_present_alert`, `notifications_email_sending_schedule`, `updated_at`, `substitution_policy_email`, `no_of_notifications_to_display`, `notifications_display_time`, `substitution_alerts_email`, `no_of_calendar_notices_to_display`, `created_at`, `timeoff_request_email`, `calendar_notices_email_type`, `no_of_home_events`, `substitution_alerts_sms`, `substitution_alerts_email_sending_schedule`, `account_id`, `no_of_home_notifications`, `daily_cap`, `notifications_email_type`) VALUES (NULL, 10, NULL, 'PER', 86400, NULL, NULL, 5, NULL, NULL, 'IMMEDIATELY', 5, NULL, 5, 0, 'CALENDAR', NULL, NULL, 'IMMEDIATELY', '2015-01-13 08:19:19', NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:19:19', NULL, 'PER', 5, 1, 'IMMEDIATELY', 74, 5, NULL, 'PER')
Saving a log entry on create for PreferenceSetting record 11
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'PreferenceSetting', 11, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'test21', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 74 AND session_start_time < '2015-01-13 08:29:19' AND session_start_time >= '2015-01-13 08:19:19' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 58 LIMIT 1
  [1m[36mConfirmedSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mLocalSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 74 AND language_id = 58) ORDER BY qualifications.id DESC LIMIT 1[0m
Completed 200 OK in 30ms (Views: 0.4ms | ActiveRecord: 97.4ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 74 AND (max_unit > 0))
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 74 AND session_start_time < '2015-01-13 08:29:19' AND session_start_time >= '2015-01-13 08:19:19' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 74 AND language_id = 58) ORDER BY qualifications.id DESC LIMIT 1
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 2.0ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 74 AND (max_unit > 0))[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 74 AND session_start_time < '2015-01-13 08:29:19' AND session_start_time >= '2015-01-13 08:19:19' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mLocalSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 74 AND language_id = 58) ORDER BY qualifications.id DESC LIMIT 1[0m
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 1.9ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 74 AND (max_unit > 0))
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 74 AND session_start_time < '2015-01-13 08:29:19' AND session_start_time >= '2015-01-13 08:19:19' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 74 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 74 AND language_id = 58) ORDER BY qualifications.id DESC LIMIT 1
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 1.8ms)
  [1m[36mSQL (39.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.1ms)[0m  BEGIN
  [1m[36mAccount Load (0.6ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email887@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'vramanan', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:19', 'CoachManager', NULL, 1, 'rs_email887@rosettastone.com', NULL, 'vramanan', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:19', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)[0m
Saving a log entry on create for Account record 76
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 76, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, 'test21', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.3ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:19', 'en-US', '2015-01-13 08:19:19', 'English')
Saving a log entry on create for SupportLanguage record 40
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 40, '2015-01-13 08:19:19', '2015-01-13 08:19:19', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 76 LIMIT 1[0m
  Processing by SubstitutionController#substitutions as HTML
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 76) AND ((max_unit is NULL)))
  [1m[36mSubstitution Load (0.8ms)[0m  [1mSELECT `substitutions`.`id` AS t0_r0, `substitutions`.`coach_id` AS t0_r1, `substitutions`.`grabber_coach_id` AS t0_r2, `substitutions`.`grabbed` AS t0_r3, `substitutions`.`lang_id` AS t0_r4, `substitutions`.`coach_session_id` AS t0_r5, `substitutions`.`created_at` AS t0_r6, `substitutions`.`updated_at` AS t0_r7, `substitutions`.`grabbed_at` AS t0_r8, `substitutions`.`cancelled` AS t0_r9, `substitutions`.`was_reassigned` AS t0_r10, `substitutions`.`session_type` AS t0_r11, `substitutions`.`reason` AS t0_r12, `coach_sessions`.`id` AS t1_r0, `coach_sessions`.`eschool_session_id` AS t1_r1, `coach_sessions`.`session_start_time` AS t1_r2, `coach_sessions`.`created_at` AS t1_r3, `coach_sessions`.`updated_at` AS t1_r4, `coach_sessions`.`cancelled` AS t1_r5, `coach_sessions`.`external_village_id` AS t1_r6, `coach_sessions`.`language_identifier` AS t1_r7, `coach_sessions`.`single_number_unit` AS t1_r8, `coach_sessions`.`number_of_seats` AS t1_r9, `coach_sessions`.`attendance_count` AS t1_r10, `coach_sessions`.`coach_showed_up` AS t1_r11, `coach_sessions`.`seconds_prior_to_session` AS t1_r12, `coach_sessions`.`recurring_schedule_id` AS t1_r13, `coach_sessions`.`coach_id` AS t1_r14, `coach_sessions`.`session_status` AS t1_r15, `coach_sessions`.`type` AS t1_r16, `coach_sessions`.`name` AS t1_r17, `coach_sessions`.`session_end_time` AS t1_r18, `coach_sessions`.`language_id` AS t1_r19, `coach_sessions`.`cancellation_reason` AS t1_r20, `coach_sessions`.`topic_id` AS t1_r21, `coach_sessions`.`reassigned` AS t1_r22, `coach_sessions`.`appointment_type_id` AS t1_r23, `accounts`.`id` AS t2_r0, `accounts`.`user_name` AS t2_r1, `accounts`.`full_name` AS t2_r2, `accounts`.`preferred_name` AS t2_r3, `accounts`.`rs_email` AS t2_r4, `accounts`.`personal_email` AS t2_r5, `accounts`.`skype_id` AS t2_r6, `accounts`.`primary_phone` AS t2_r7, `accounts`.`secondary_phone` AS t2_r8, `accounts`.`birth_date` AS t2_r9, `accounts`.`hire_date` AS t2_r10, `accounts`.`bio` AS t2_r11, `accounts`.`manager_notes` AS t2_r12, `accounts`.`active` AS t2_r13, `accounts`.`manager_id` AS t2_r14, `accounts`.`created_at` AS t2_r15, `accounts`.`updated_at` AS t2_r16, `accounts`.`type` AS t2_r17, `accounts`.`region_id` AS t2_r18, `accounts`.`next_session_alert_in` AS t2_r19, `accounts`.`last_logout` AS t2_r20, `accounts`.`country` AS t2_r21, `accounts`.`native_language` AS t2_r22, `accounts`.`other_languages` AS t2_r23, `accounts`.`address` AS t2_r24, `accounts`.`lotus_qualified` AS t2_r25, `accounts`.`next_substitution_alert_in` AS t2_r26, `accounts`.`mobile_phone` AS t2_r27, `accounts`.`sessions_allowed_per_week` AS t2_r28, `accounts`.`is_supervisor` AS t2_r29, `accounts`.`mobile_country_code` AS t2_r30, `accounts`.`aim_id` AS t2_r31, `accounts`.`primary_country_code` AS t2_r32, `accounts`.`photo_file_name` AS t2_r33, `accounts`.`photo_content_type` AS t2_r34, `accounts`.`photo_file_size` AS t2_r35, `accounts`.`photo_file` AS t2_r36, `accounts`.`coach_guid` AS t2_r37, `languages`.`id` AS t3_r0, `languages`.`identifier` AS t3_r1, `languages`.`created_at` AS t3_r2, `languages`.`updated_at` AS t3_r3, `languages`.`last_pushed_week` AS t3_r4, `languages`.`type` AS t3_r5, `languages`.`duration` AS t3_r6, `languages`.`connection_type` AS t3_r7, `languages`.`external_scheduler` AS t3_r8 FROM `substitutions` LEFT OUTER JOIN `coach_sessions` ON `coach_sessions`.`id` = `substitutions`.`coach_session_id` LEFT OUTER JOIN `accounts` ON `accounts`.`id` = `substitutions`.`coach_id` AND `accounts`.`type` = 'Coach' LEFT OUTER JOIN `coach_sessions` `languages_substitutions_join` ON `substitutions`.`coach_session_id` = `languages_substitutions_join`.`id` LEFT OUTER JOIN `languages` ON `languages`.`id` = `languages_substitutions_join`.`language_id` WHERE (coach_sessions.language_identifier IN (NULL) AND coach_sessions.session_start_time >= '2015-01-13 07:31:00' AND coach_sessions.session_start_time < '2015-01-20 08:00:00' AND substitutions.cancelled = 0 AND grabbed = 0) ORDER BY coach_sessions.session_start_time[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-NED-L' OR identifier = 'TMM-NED-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-NED-P' OR identifier = 'TMM-NED-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ENG-L' OR identifier = 'TMM-ENG-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ENG-P' OR identifier = 'TMM-ENG-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-FRA-L' OR identifier = 'TMM-FRA-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-FRA-P' OR identifier = 'TMM-FRA-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-MCH-L' OR identifier = 'TMM-MCH-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-DEU-L' OR identifier = 'TMM-DEU-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-DEU-P' OR identifier = 'TMM-DEU-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ITA-L' OR identifier = 'TMM-ITA-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ITA-P' OR identifier = 'TMM-ITA-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ESP-L' OR identifier = 'TMM-ESP-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ESP-P' OR identifier = 'TMM-ESP-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mAlert Load (0.1ms)[0m  [1mSELECT `alerts`.* FROM `alerts` WHERE (active = 1) ORDER BY alerts.id DESC LIMIT 1[0m
Rendered shared/_editor_authenticate.html.erb (932.1ms)
Rendered shared/_header.html.erb (934.8ms)
Rendered shared/_default_navigation.html.erb (20.2ms)
Rendered shared/_profile_links.html.erb (1.7ms)
Rendered shared/_body_content.html.erb (25.1ms)
Completed 200 OK in 1005ms (Views: 981.8ms | ActiveRecord: 47.0ms)
  [1m[35mSQL (25.5ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email101@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'test21', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:20', 'CoachManager', NULL, 1, 'rs_email101@rosettastone.com', NULL, 'test21', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:20', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)
Saving a log entry on create for Account record 77
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 77, '2015-01-13 08:19:20', '2015-01-13 08:19:20', NULL, 'vramanan', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:20', 'en-US', '2015-01-13 08:19:20', 'English')[0m
Saving a log entry on create for SupportLanguage record 41
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 41, '2015-01-13 08:19:20', '2015-01-13 08:19:20', NULL, NULL, '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 77 LIMIT 1
  [1m[36mLanguage Load (0.4ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'KLE' OR identifier = 'KLE') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'rajkumar@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'rajkumar', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:20', NULL, NULL, 24, NULL, '1', 8, 'rajkumar', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:20')
Saving a log entry on create for Coach record 78
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 78, '2015-01-13 08:19:20', '2015-01-13 08:19:20', NULL, 'vramanan', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 78
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('KLE', '2015-01-13 08:19:20', '2015-01-13 08:19:20', '2011-10-27 23:22:54', NULL, 'ReflexLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 59
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 59, '2015-01-13 08:19:20', '2015-01-13 08:19:20', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 59 AND (`qualifications`.coach_id = 78 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 59 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 78 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 78 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 78 and language_id = 59)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 78 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:20', 59, NULL, 10, '2015-01-13 08:19:20', 78)[0m
Saving a log entry on create for Qualification record 59
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 59, '2015-01-13 08:19:20', '2015-01-13 08:19:20', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 78 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`reassigned`, `number_of_seats`, `recurring_schedule_id`, `session_status`, `language_id`, `session_end_time`, `attendance_count`, `appointment_type_id`, `topic_id`, `external_village_id`, `language_identifier`, `coach_showed_up`, `eschool_session_id`, `created_at`, `name`, `single_number_unit`, `session_start_time`, `coach_id`, `cancellation_reason`, `updated_at`, `type`, `seconds_prior_to_session`, `cancelled`) VALUES (NULL, 0, NULL, 1, 59, '2015-01-13 10:30:00', NULL, NULL, NULL, NULL, 'KLE', 0, NULL, '2015-01-13 08:19:20', NULL, 1, '2015-01-13 10:00:00', 78, NULL, '2015-01-13 08:19:20', 'ConfirmedSession', NULL, 0)[0m
Saving a log entry on create for ConfirmedSession record 24
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 24, '2015-01-13 08:19:20', '2015-01-13 08:19:20', NULL, 'vramanan', '', 'create')
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 24) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 78 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 78) AND ((max_unit > 0)))[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `unavailable_despite_templates` (`coach_session_id`, `updated_at`, `comments`, `ancestry`, `unavailability_type`, `coach_id`, `end_date`, `created_at`, `approval_status`, `start_date`) VALUES (24, '2015-01-13 08:19:20', 'Auto Approved - Coach requested Substitute', NULL, 1, 78, '2015-01-13 10:30:00', '2015-01-13 08:19:20', 1, '2015-01-13 10:00:00')
Saving a log entry on create for UnavailableDespiteTemplate record 12
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'UnavailableDespiteTemplate', 12, '2015-01-13 08:19:20', '2015-01-13 08:19:20', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 24 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, 0, 'normal', '2015-01-13 08:19:20', 0, 0, NULL, 24, NULL, NULL, 78, '2015-01-13 08:19:20')[0m
Saving a log entry on create for Substitution record 30
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 30, '2015-01-13 08:19:20', '2015-01-13 08:19:20', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00' AND id <> 24) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:19:20' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 24[0m
Saving a log entry on update for ConfirmedSession record 24
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 24, '2015-01-13 08:19:20', '2015-01-13 08:19:20', 78, 'vramanan', 'coach_id', 'update')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 59 OR identifier = 59) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoach Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '59')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 59 OR identifier = 59) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.1ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoachManager Load (0.8ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '59')[0m
  [1m[35mTriggerEvent Load (0.2ms)[0m  SELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1
  [1m[36mNotification Load (0.1ms)[0m  [1mSELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1[0m
  Processing by SubstitutionController#substitutions as HTML
Completed 500 Internal Server Error in 2ms
  [1m[35mSQL (31.3ms)[0m  ROLLBACK
  [1m[36mSQL (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email92@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'vramanan', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:20', 'CoachManager', NULL, 1, 'rs_email92@rosettastone.com', NULL, 'vramanan', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:20', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)
Saving a log entry on create for Account record 79
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 79, '2015-01-13 08:19:20', '2015-01-13 08:19:20', NULL, 'test21', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.3ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:20', 'en-US', '2015-01-13 08:19:20', 'English')[0m
Saving a log entry on create for SupportLanguage record 42
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 42, '2015-01-13 08:19:20', '2015-01-13 08:19:20', NULL, NULL, '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 79 LIMIT 1
  Processing by SubstitutionController#reason_for_sub_request as JS
Rendered shared/_show_reasons.html.erb (1.1ms)
Rendered substitution/_reason_for_sub_request.html.erb (3.7ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 73.8ms)
  [1m[36mSQL (62.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.1ms)[0m  BEGIN
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (3.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email597@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.8ms)[0m  [1mINSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'vramanan', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:20', 'CoachManager', NULL, 1, 'rs_email597@rosettastone.com', NULL, 'vramanan', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:20', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)[0m
Saving a log entry on create for Account record 80
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 80, '2015-01-13 08:19:20', '2015-01-13 08:19:20', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (1.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.8ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (1.6ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:21', 'en-US', '2015-01-13 08:19:21', 'English')
Saving a log entry on create for SupportLanguage record 43
  [1m[36mAREL (4.4ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 43, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 80 LIMIT 1[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1
  [1m[36mSQL (2.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1
  [1m[36mSQL (3.4ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'TestCoach@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'TestCoach', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:21', NULL, NULL, 24, NULL, '1', 8, 'TestCoach', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:21')
Saving a log entry on create for Coach record 81
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 81, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 81
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('ARA', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 60
  [1m[35mAREL (0.5ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 60, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.6ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 60 AND (`qualifications`.coach_id = 81 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.6ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 60 LIMIT 1
  [1m[36mCoachManager Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 81 LIMIT 1[0m
  [1m[35mCoach Load (0.6ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 81 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 81 and language_id = 60)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 81 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 60, NULL, 10, '2015-01-13 08:19:21', 81)[0m
Saving a log entry on create for Qualification record 60
  [1m[35mAREL (0.7ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 60, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.8ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('CHI', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 61
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 61, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.4ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 61 AND (`qualifications`.coach_id = 81 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 61 LIMIT 1
  [1m[36mCoachManager Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 81 LIMIT 1[0m
  [1m[35mCoach Load (0.6ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 81 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 81 and language_id = 61)[0m
  [1m[35mCoachManager Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 81 LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 61, NULL, 10, '2015-01-13 08:19:21', 81)[0m
Saving a log entry on create for Qualification record 61
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 61, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('ENG', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 62
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 62, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.4ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 62 AND (`qualifications`.coach_id = 81 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 62 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 81 LIMIT 1[0m
  [1m[35mCoach Load (0.6ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 81 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 81 and language_id = 62)[0m
  [1m[35mCoachManager Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 81 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 62, NULL, 10, '2015-01-13 08:19:21', 81)[0m
Saving a log entry on create for Qualification record 62
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 62, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#request_substitute_for_coach as JS
  Parameters: {"current_coach_id"=>81, "time"=>"2010-09-06 11:00:00", "lang_identifier"=>"ARA"}
  [1m[35mCoachSession Load (0.4ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 and coach_id = 81 and session_start_time = '2010-09-06 11:00:00') ORDER BY coach_sessions.id DESC LIMIT 1
Completed 500 Internal Server Error in 3ms (Views: 0.5ms | ActiveRecord: 105.9ms)
  [1m[36mSQL (61.1ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.1ms)[0m  BEGIN
  [1m[36mAccount Load (0.6ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email818@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'vramanan', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:21', 'CoachManager', NULL, 1, 'rs_email818@rosettastone.com', NULL, 'vramanan', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:21', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)[0m
Saving a log entry on create for Account record 82
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 82, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.3ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:21', 'en-US', '2015-01-13 08:19:21', 'English')
Saving a log entry on create for SupportLanguage record 44
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 44, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 82 LIMIT 1[0m
  [1m[35mAccount Load (0.8ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'TestCoach@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'TestCoach', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:21', NULL, NULL, 24, NULL, '1', 8, 'TestCoach', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:21')
Saving a log entry on create for Coach record 83
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 83, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 83
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('ARA', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 63
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 63, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (1.4ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 63 AND (`qualifications`.coach_id = 83 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 63 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 83 LIMIT 1[0m
  [1m[35mCoach Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 83 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 83 and language_id = 63)[0m
  [1m[35mCoachManager Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 83 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 63, NULL, 10, '2015-01-13 08:19:21', 83)[0m
Saving a log entry on create for Qualification record 63
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 63, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('CHI', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 64
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 64, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.6ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 64 AND (`qualifications`.coach_id = 83 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 64 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 83 LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 83 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 83 and language_id = 64)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 83 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 64, NULL, 10, '2015-01-13 08:19:21', 83)[0m
Saving a log entry on create for Qualification record 64
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 64, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('ENG', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 65
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 65, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 65 AND (`qualifications`.coach_id = 83 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 65 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 83 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 83 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 83 and language_id = 65)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 83 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 65, NULL, 10, '2015-01-13 08:19:21', 83)[0m
Saving a log entry on create for Qualification record 65
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 65, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#request_substitute_for_coach as JS
  Parameters: {"current_coach_id"=>83, "time"=>"2010-09-06 11:00:00", "lang_identifier"=>"ARA", "request_from"=>"dashboard"}
  [1m[35mCoachSession Load (0.4ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 and coach_id = 83 and session_start_time = '2010-09-06 11:00:00') ORDER BY coach_sessions.id DESC LIMIT 1
Completed 500 Internal Server Error in 4ms (Views: 0.6ms | ActiveRecord: 81.4ms)
  [1m[36mSQL (45.5ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.1ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.1ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email442@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'vramanan', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:21', 'CoachManager', NULL, 1, 'rs_email442@rosettastone.com', NULL, 'vramanan', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:21', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)[0m
Saving a log entry on create for Account record 84
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 84, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.3ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:21', 'en-US', '2015-01-13 08:19:21', 'English')
Saving a log entry on create for SupportLanguage record 45
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 45, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.6ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 84 LIMIT 1[0m
  [1m[35mAccount Load (0.6ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'TestCoach@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'TestCoach', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:21', NULL, NULL, 24, NULL, '1', 8, 'TestCoach', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:21')
Saving a log entry on create for Coach record 85
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 85, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 85
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.3ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('ARA', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 66
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 66, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 66 AND (`qualifications`.coach_id = 85 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 66 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 85 LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 85 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 85 and language_id = 66)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 85 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 66, NULL, 10, '2015-01-13 08:19:21', 85)[0m
Saving a log entry on create for Qualification record 66
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 66, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('CHI', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 67
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 67, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.4ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 67 AND (`qualifications`.coach_id = 85 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 67 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 85 LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 85 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 85 and language_id = 67)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 85 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 67, NULL, 10, '2015-01-13 08:19:21', 85)[0m
Saving a log entry on create for Qualification record 67
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 67, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('ENG', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 68
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 68, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 68 AND (`qualifications`.coach_id = 85 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 68 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 85 LIMIT 1[0m
  [1m[35mCoach Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 85 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 85 and language_id = 68)[0m
  [1m[35mCoachManager Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 85 LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 68, NULL, 10, '2015-01-13 08:19:21', 85)[0m
Saving a log entry on create for Qualification record 68
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 68, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (38.4ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.1ms)[0m  BEGIN
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email744@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'vramanan', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:21', 'CoachManager', NULL, 1, 'rs_email744@rosettastone.com', NULL, 'vramanan', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:21', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)[0m
Saving a log entry on create for Account record 86
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 86, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:21', 'en-US', '2015-01-13 08:19:21', 'English')
Saving a log entry on create for SupportLanguage record 46
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 46, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 86 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'TestCoach@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'TestCoach', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:21', NULL, NULL, 24, NULL, '1', 8, 'TestCoach', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:21')
Saving a log entry on create for Coach record 87
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 87, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 87
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('ARA', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 69
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 69, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 69 AND (`qualifications`.coach_id = 87 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 69 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 87 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 87 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 87 and language_id = 69)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 87 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 69, NULL, 10, '2015-01-13 08:19:21', 87)[0m
Saving a log entry on create for Qualification record 69
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 69, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('CHI', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 70
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 70, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 70 AND (`qualifications`.coach_id = 87 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 70 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 87 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 87 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 87 and language_id = 70)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 87 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 70, NULL, 10, '2015-01-13 08:19:21', 87)[0m
Saving a log entry on create for Qualification record 70
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 70, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('ENG', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'TotaleLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 71
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 71, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 71 AND (`qualifications`.coach_id = 87 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 71 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 87 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 87 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 87 and language_id = 71)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 87 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 71, NULL, 10, '2015-01-13 08:19:21', 87)[0m
Saving a log entry on create for Qualification record 71
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 71, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (29.8ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email60@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'vramanan', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:21', 'CoachManager', NULL, 1, 'rs_email60@rosettastone.com', NULL, 'vramanan', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:21', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)[0m
Saving a log entry on create for Account record 88
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 88, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:21', 'en-US', '2015-01-13 08:19:21', 'English')
Saving a log entry on create for SupportLanguage record 47
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 47, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 88 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'rajkumar@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'rajkumar', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:21', NULL, NULL, 24, NULL, '1', 8, 'rajkumar', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:21')
Saving a log entry on create for Coach record 89
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 89, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 89
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('KLE', '2015-01-13 08:19:21', '2015-01-13 08:19:21', '2011-10-27 23:22:54', NULL, 'ReflexLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 72
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 72, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 72 AND (`qualifications`.coach_id = 89 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 72 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 89 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 89 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 89 and language_id = 72)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 89 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:21', 72, NULL, 10, '2015-01-13 08:19:21', 89)[0m
Saving a log entry on create for Qualification record 72
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 72, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`reassigned`, `number_of_seats`, `recurring_schedule_id`, `session_status`, `language_id`, `session_end_time`, `attendance_count`, `appointment_type_id`, `topic_id`, `external_village_id`, `language_identifier`, `coach_showed_up`, `eschool_session_id`, `created_at`, `name`, `single_number_unit`, `session_start_time`, `coach_id`, `cancellation_reason`, `updated_at`, `type`, `seconds_prior_to_session`, `cancelled`) VALUES (NULL, 0, NULL, 1, 72, '2015-01-13 10:30:00', NULL, NULL, NULL, NULL, 'KLE', 0, 345698, '2015-01-13 08:19:21', NULL, 1, '2015-01-13 10:00:00', 18, NULL, '2015-01-13 08:19:21', 'ConfirmedSession', NULL, 0)[0m
Saving a log entry on create for ConfirmedSession record 25
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 25, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 25) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 25 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, NULL, 'normal', '2015-01-13 08:19:21', 0, 1, NULL, 25, 89, 'Electricity Outage', 89, '2015-01-13 08:19:21')[0m
Saving a log entry on create for Substitution record 31
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 31, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#show_reason_in_sub_report as HTML
  Parameters: {"id"=>31}
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE `substitutions`.`id` = 31 LIMIT 1
Rendered substitution/_show_reason_in_sub_report.html.erb (0.5ms)
Completed 200 OK in 4ms (Views: 2.1ms | ActiveRecord: 158.8ms)
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 25 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, NULL, 'normal', '2015-01-13 08:19:21', 0, 1, NULL, 25, 89, NULL, 89, '2015-01-13 08:19:21')[0m
Saving a log entry on create for Substitution record 32
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 32, '2015-01-13 08:19:21', '2015-01-13 08:19:21', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#show_reason_in_sub_report as HTML
  Parameters: {"id"=>31}
  [1m[35mSubstitution Load (0.3ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE `substitutions`.`id` = 32 LIMIT 1
Rendered substitution/_show_reason_in_sub_report.html.erb (0.1ms)
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 1.1ms)
  [1m[36mSQL (30.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.1ms)[0m  BEGIN
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'rajkumar@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'rajkumar', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:22', NULL, NULL, 24, NULL, '1', 8, 'rajkumar', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:22')[0m
Saving a log entry on create for Coach record 90
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 90, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 90
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:22', 'en-US', '2015-01-13 08:19:22', 'English')
Saving a log entry on create for SupportLanguage record 48
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 48, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('KLE', '2015-01-13 08:19:22', '2015-01-13 08:19:22', '2011-10-27 23:22:54', NULL, 'ReflexLanguage', NULL, 30)
Saving a log entry on create for Language record 73
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 73, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 73 AND (`qualifications`.coach_id = 90 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 73 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 90 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 90 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 90 and language_id = 73)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 90 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:22', 73, NULL, 10, '2015-01-13 08:19:22', 90)
Saving a log entry on create for Qualification record 73
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 73, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 90
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 90
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `accounts` SET `created_at` = '2015-01-12 08:19:22', `updated_at` = '2015-01-13 08:19:22' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 90[0m
Saving a log entry on update for Coach record 90
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE (`qualifications`.coach_id = 90 AND (max_unit > 0))[0m
  [1m[35mSupportLanguage Load (0.1ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 90 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 90 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `coach_sessions` (`reassigned`, `number_of_seats`, `recurring_schedule_id`, `session_status`, `language_id`, `session_end_time`, `attendance_count`, `appointment_type_id`, `topic_id`, `external_village_id`, `language_identifier`, `coach_showed_up`, `eschool_session_id`, `created_at`, `name`, `single_number_unit`, `session_start_time`, `coach_id`, `cancellation_reason`, `updated_at`, `type`, `seconds_prior_to_session`, `cancelled`) VALUES (NULL, 0, NULL, 1, 73, '2015-01-13 12:30:00', NULL, NULL, NULL, NULL, 'KLE', 0, NULL, '2015-01-13 08:19:22', NULL, 1, '2015-01-13 12:00:00', 90, NULL, '2015-01-13 08:19:22', 'ConfirmedSession', NULL, 0)[0m
Saving a log entry on create for ConfirmedSession record 26
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 26, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 26) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 90 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 90) AND ((max_unit > 0)))[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `unavailable_despite_templates` (`coach_session_id`, `updated_at`, `comments`, `ancestry`, `unavailability_type`, `coach_id`, `end_date`, `created_at`, `approval_status`, `start_date`) VALUES (26, '2015-01-13 08:19:22', 'Auto Approved - Coach requested Substitute', NULL, 1, 90, '2015-01-13 12:30:00', '2015-01-13 08:19:22', 1, '2015-01-13 12:00:00')
Saving a log entry on create for UnavailableDespiteTemplate record 13
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'UnavailableDespiteTemplate', 13, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 26 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, 0, 'normal', '2015-01-13 08:19:22', 0, 0, NULL, 26, NULL, NULL, 90, '2015-01-13 08:19:22')[0m
Saving a log entry on create for Substitution record 33
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 33, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND id <> 26) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:19:22' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 26[0m
Saving a log entry on update for ConfirmedSession record 26
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 26, '2015-01-13 08:19:22', '2015-01-13 08:19:22', 90, 'vramanan', 'coach_id', 'update')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 73 OR identifier = 73) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.1ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoach Load (1.0ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '73')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 73 OR identifier = 73) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.1ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoachManager Load (0.9ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '73')[0m
  [1m[35mTriggerEvent Load (0.1ms)[0m  SELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1
  [1m[36mNotification Load (0.1ms)[0m  [1mSELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1[0m
  Processing by SubstitutionController#substitutions_alert as HTML
  [1m[35mSQL (0.5ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 90 AND (max_unit > 0))
  [1m[36mPreferenceSetting Load (0.5ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 90) LIMIT 1[0m
  [1m[35mPreferenceSetting Load (0.1ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 90) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `preference_settings` (`substitution_policy_email_sending_schedule`, `session_alerts_display_time`, `default_language_for_master_scheduler`, `substitution_alerts_email_type`, `substitution_alerts_display_time`, `calendar_notices_display_time`, `no_of_learner_dashboard_records`, `no_of_substitution_alerts_to_display`, `timeoff_request_email_type`, `notifications_email`, `calendar_notices_email_sending_schedule`, `no_of_home_substitutions`, `substitution_policy_email_type`, `no_of_home_announcements`, `mails_sent`, `start_page`, `calendar_notices_email`, `coach_not_present_alert`, `notifications_email_sending_schedule`, `updated_at`, `substitution_policy_email`, `no_of_notifications_to_display`, `notifications_display_time`, `substitution_alerts_email`, `no_of_calendar_notices_to_display`, `created_at`, `timeoff_request_email`, `calendar_notices_email_type`, `no_of_home_events`, `substitution_alerts_sms`, `substitution_alerts_email_sending_schedule`, `account_id`, `no_of_home_notifications`, `daily_cap`, `notifications_email_type`) VALUES (NULL, 10, NULL, 'PER', 86400, NULL, NULL, 5, NULL, NULL, 'IMMEDIATELY', 5, NULL, 5, 0, 'CALENDAR', NULL, NULL, 'IMMEDIATELY', '2015-01-13 08:19:22', NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:19:22', NULL, 'PER', 5, 1, 'IMMEDIATELY', 90, 5, NULL, 'PER')
Saving a log entry on create for PreferenceSetting record 12
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'PreferenceSetting', 12, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'rajkumar', '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 90 AND session_start_time < '2015-01-13 08:29:22' AND session_start_time >= '2015-01-13 08:19:22' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mShownSubstitutions Load (0.2ms)[0m  SELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 90 LIMIT 1
  [1m[36mSubstitution Load (0.8ms)[0m  [1mSELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions, qualifications, languages) on (coach_sessions.id = substitutions.coach_session_id and languages.identifier = coach_sessions.language_identifier and languages.id = qualifications.language_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:19:22' and coach_sessions.session_end_time > '2015-01-13 08:19:22' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL and qualifications.coach_id = 90) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 26 LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 73 LIMIT 1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 26)) LIMIT 1
  [1m[36mConfirmedSession Load (0.5ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 90 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00')[0m
  [1m[35mAppointment Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 90 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00')
  [1m[36mLocalSession Load (0.5ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 90 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND action != 'create')[0m
  [1m[35mLanguage Load (0.5ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 90) AND ((max_unit > 0)))
  [1m[36mCoachRecurringSchedule Load (0.5ms)[0m  [1mSELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 90 and day_index = 2 and start_time = '12:00:00' and recurring_start_date <= '2015-01-13 12:00:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 12:00:00')) ORDER BY recurring_start_date DESC LIMIT 1[0m
  [1m[35mCoachRecurringSchedule Load (0.4ms)[0m  SELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 90 and day_index = 2 and start_time = '11:00:00' and recurring_start_date <= '2015-01-13 11:00:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 11:00:00')) ORDER BY recurring_start_date DESC LIMIT 1
  [1m[36mCoachRecurringSchedule Load (0.4ms)[0m  [1mSELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 90 and day_index = 2 and start_time = '12:30:00' and recurring_start_date <= '2015-01-13 12:30:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 12:30:00')) ORDER BY recurring_start_date DESC LIMIT 1[0m
  [1m[35mCoachRecurringSchedule Load (0.5ms)[0m  SELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 90 and day_index = 2 and start_time = '11:30:00' and recurring_start_date <= '2015-01-13 11:30:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 11:30:00')) ORDER BY recurring_start_date DESC LIMIT 1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 90 AND language_id = 73) ORDER BY qualifications.id DESC LIMIT 1[0m
  [1m[35mCoach Load (0.6ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` INNER JOIN `qualifications` ON `accounts`.id = `qualifications`.coach_id WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND ((`qualifications`.language_id = 73) AND ((max_unit > 0 and active = 1))) ORDER BY trim(full_name)
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`coach_id` = 90 AND `qualifications`.`language_id` = 73 LIMIT 1[0m
Rendered substitution/_substitutions_alert.html.erb (1.3ms)
Completed 200 OK in 54ms (Views: 2.9ms | ActiveRecord: 52.8ms)
  [1m[35mSQL (35.6ms)[0m  ROLLBACK
  [1m[36mSQL (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.9ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email333@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'vramanan', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:22', 'CoachManager', NULL, 1, 'rs_email333@rosettastone.com', NULL, 'vramanan', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:22', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)
Saving a log entry on create for Account record 91
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 91, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'rajkumar', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:22', 'en-US', '2015-01-13 08:19:22', 'English')[0m
Saving a log entry on create for SupportLanguage record 49
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 49, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, NULL, '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 91 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'rajkumar@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'rajkumar', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:22', NULL, NULL, 24, NULL, '1', 8, 'rajkumar', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:22')[0m
Saving a log entry on create for Coach record 92
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 92, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'rajkumar', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 92
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('KLE', '2015-01-13 08:19:22', '2015-01-13 08:19:22', '2011-10-27 23:22:54', NULL, 'ReflexLanguage', NULL, 30)
Saving a log entry on create for Language record 74
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 74, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'rajkumar', '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.5ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 74 AND (`qualifications`.coach_id = 92 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 74 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 92 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 92 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 92 and language_id = 74)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 92 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:22', 74, NULL, 10, '2015-01-13 08:19:22', 92)
Saving a log entry on create for Qualification record 74
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 74, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'rajkumar', '', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.4ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 92 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `coach_sessions` (`reassigned`, `number_of_seats`, `recurring_schedule_id`, `session_status`, `language_id`, `session_end_time`, `attendance_count`, `appointment_type_id`, `topic_id`, `external_village_id`, `language_identifier`, `coach_showed_up`, `eschool_session_id`, `created_at`, `name`, `single_number_unit`, `session_start_time`, `coach_id`, `cancellation_reason`, `updated_at`, `type`, `seconds_prior_to_session`, `cancelled`) VALUES (NULL, 0, NULL, 1, 74, '2015-01-13 09:30:00', NULL, NULL, NULL, NULL, 'KLE', 0, NULL, '2015-01-13 08:19:22', NULL, 1, '2015-01-13 09:00:00', 92, NULL, '2015-01-13 08:19:22', 'ConfirmedSession', NULL, 0)
Saving a log entry on create for ConfirmedSession record 27
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 27, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'rajkumar', '', 'create')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 27) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoach Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 92 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 92) AND ((max_unit > 0)))
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`coach_session_id`, `updated_at`, `comments`, `ancestry`, `unavailability_type`, `coach_id`, `end_date`, `created_at`, `approval_status`, `start_date`) VALUES (27, '2015-01-13 08:19:22', 'Auto Approved - Coach requested Substitute', NULL, 1, 92, '2015-01-13 09:30:00', '2015-01-13 08:19:22', 1, '2015-01-13 09:00:00')[0m
Saving a log entry on create for UnavailableDespiteTemplate record 14
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'UnavailableDespiteTemplate', 14, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'rajkumar', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 27 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, 0, 'normal', '2015-01-13 08:19:22', 0, 0, NULL, 27, NULL, NULL, 92, '2015-01-13 08:19:22')
Saving a log entry on create for Substitution record 34
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 34, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'rajkumar', '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 27) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (28.5ms)[0m  UPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:19:22' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 27
Saving a log entry on update for ConfirmedSession record 27
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 27, '2015-01-13 08:19:22', '2015-01-13 08:19:22', 92, 'rajkumar', 'coach_id', 'update')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 74 OR identifier = 74) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoach Load (0.8ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '74')[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 74 OR identifier = 74) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.1ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoachManager Load (0.8ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '74')
  [1m[36mTriggerEvent Load (0.1ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1[0m
  [1m[35mNotification Load (0.1ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1
  Processing by SubstitutionController#substitutions_alert as HTML
  [1m[36mPreferenceSetting Load (0.6ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 91) LIMIT 1[0m
  [1m[35mPreferenceSetting Load (0.1ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 91) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `preference_settings` (`substitution_policy_email_sending_schedule`, `session_alerts_display_time`, `default_language_for_master_scheduler`, `substitution_alerts_email_type`, `substitution_alerts_display_time`, `calendar_notices_display_time`, `no_of_learner_dashboard_records`, `no_of_substitution_alerts_to_display`, `timeoff_request_email_type`, `notifications_email`, `calendar_notices_email_sending_schedule`, `no_of_home_substitutions`, `substitution_policy_email_type`, `no_of_home_announcements`, `mails_sent`, `start_page`, `calendar_notices_email`, `coach_not_present_alert`, `notifications_email_sending_schedule`, `updated_at`, `substitution_policy_email`, `no_of_notifications_to_display`, `notifications_display_time`, `substitution_alerts_email`, `no_of_calendar_notices_to_display`, `created_at`, `timeoff_request_email`, `calendar_notices_email_type`, `no_of_home_events`, `substitution_alerts_sms`, `substitution_alerts_email_sending_schedule`, `account_id`, `no_of_home_notifications`, `daily_cap`, `notifications_email_type`) VALUES (NULL, NULL, NULL, 'PER', 86400, NULL, NULL, 5, NULL, NULL, 'IMMEDIATELY', 5, NULL, 5, 0, 'CM_MS', NULL, NULL, 'IMMEDIATELY', '2015-01-13 08:19:22', NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:19:22', NULL, 'PER', 5, NULL, 'IMMEDIATELY', 91, 5, NULL, 'PER')
Saving a log entry on create for PreferenceSetting record 13
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'PreferenceSetting', 13, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mShownSubstitutions Load (0.5ms)[0m  [1mSELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 91 LIMIT 1[0m
  [1m[35mSubstitution Load (0.9ms)[0m  SELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions) on (coach_sessions.id = substitutions.coach_session_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:19:22' and coach_sessions.session_end_time > '2015-01-13 08:19:22' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 27 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 74 LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 27)) LIMIT 1[0m
  [1m[35mCmPreference Load (0.3ms)[0m  SELECT `cm_preferences`.* FROM `cm_preferences` WHERE (`cm_preferences`.account_id = 91) LIMIT 1
Rendered shared/_substitutions_alert.html.erb (1.1ms)
Completed 200 OK in 32ms (Views: 2.7ms | ActiveRecord: 87.4ms)
  [1m[36mSQL (53.4ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.1ms)[0m  BEGIN
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email240@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'vramanan', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:22', 'CoachManager', NULL, 1, 'rs_email240@rosettastone.com', NULL, 'vramanan', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:22', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)[0m
Saving a log entry on create for Account record 93
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 93, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.3ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:22', 'en-US', '2015-01-13 08:19:22', 'English')
Saving a log entry on create for SupportLanguage record 50
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 50, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, NULL, '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.6ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 93 LIMIT 1[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `rs_email`, `secondary_phone`, `country`, `personal_email`, `lotus_qualified`, `primary_phone`, `native_language`, `photo_file_size`, `full_name`, `skype_id`, `preferred_name`, `birth_date`, `manager_notes`, `last_logout`, `address`, `aim_id`, `primary_country_code`, `manager_id`, `type`, `mobile_phone`, `photo_file_name`, `hire_date`, `created_at`, `other_languages`, `bio`, `next_substitution_alert_in`, `photo_content_type`, `mobile_country_code`, `sessions_allowed_per_week`, `user_name`, `coach_guid`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `region_id`, `updated_at`) VALUES (1, 'rajkumar@rs.com', NULL, NULL, NULL, 1, '5402334456', 'en-US', NULL, 'rajkumar', NULL, 'test', NULL, NULL, NULL, NULL, NULL, '1', NULL, 'Coach', NULL, NULL, NULL, '2015-01-13 08:19:22', NULL, NULL, 24, NULL, '1', 8, 'rajkumar', NULL, NULL, NULL, 0, NULL, '2015-01-13 08:19:22')
Saving a log entry on create for Coach record 94
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 94, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 94
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`identifier`, `created_at`, `updated_at`, `last_pushed_week`, `connection_type`, `type`, `external_scheduler`, `duration`) VALUES ('KLE', '2015-01-13 08:19:22', '2015-01-13 08:19:22', '2011-10-27 23:22:54', NULL, 'ReflexLanguage', NULL, 30)[0m
Saving a log entry on create for Language record 75
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Language', 75, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.4ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 75 AND (`qualifications`.coach_id = 94 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 75 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 94 LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 94 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 94 and language_id = 75)[0m
  [1m[35mCoachManager Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 94 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `language_id`, `dialect_id`, `max_unit`, `updated_at`, `coach_id`) VALUES ('2015-01-13 08:19:22', 75, NULL, 10, '2015-01-13 08:19:22', 94)[0m
Saving a log entry on create for Qualification record 75
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Qualification', 75, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.4ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 94 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `coach_sessions` (`reassigned`, `number_of_seats`, `recurring_schedule_id`, `session_status`, `language_id`, `session_end_time`, `attendance_count`, `appointment_type_id`, `topic_id`, `external_village_id`, `language_identifier`, `coach_showed_up`, `eschool_session_id`, `created_at`, `name`, `single_number_unit`, `session_start_time`, `coach_id`, `cancellation_reason`, `updated_at`, `type`, `seconds_prior_to_session`, `cancelled`) VALUES (NULL, 0, NULL, 1, 75, '2015-01-13 12:30:00', NULL, NULL, NULL, NULL, 'KLE', 0, NULL, '2015-01-13 08:19:22', NULL, 1, '2015-01-13 12:00:00', 94, NULL, '2015-01-13 08:19:22', 'ConfirmedSession', NULL, 0)[0m
Saving a log entry on create for ConfirmedSession record 28
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 28, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')
  [1m[36mSessionMetadata Load (0.3ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 28) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 94 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 94) AND ((max_unit > 0)))[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `unavailable_despite_templates` (`coach_session_id`, `updated_at`, `comments`, `ancestry`, `unavailability_type`, `coach_id`, `end_date`, `created_at`, `approval_status`, `start_date`) VALUES (28, '2015-01-13 08:19:22', 'Auto Approved - Coach requested Substitute', NULL, 1, 94, '2015-01-13 12:30:00', '2015-01-13 08:19:22', 1, '2015-01-13 12:00:00')
Saving a log entry on create for UnavailableDespiteTemplate record 15
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'UnavailableDespiteTemplate', 15, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 28 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`lang_id`, `was_reassigned`, `session_type`, `updated_at`, `cancelled`, `grabbed`, `grabbed_at`, `coach_session_id`, `grabber_coach_id`, `reason`, `coach_id`, `created_at`) VALUES (NULL, 0, 'normal', '2015-01-13 08:19:22', 0, 0, NULL, 28, NULL, NULL, 94, '2015-01-13 08:19:22')[0m
Saving a log entry on create for Substitution record 35
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Substitution', 35, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND id <> 28) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mUPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:19:22' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 28[0m
Saving a log entry on update for ConfirmedSession record 28
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'CoachSession', 28, '2015-01-13 08:19:22', '2015-01-13 08:19:22', 94, 'vramanan', 'coach_id', 'update')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 75 OR identifier = 75) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.1ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoach Load (0.8ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '75')
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 75 OR identifier = 75) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.1ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoachManager Load (0.8ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '75')[0m
  [1m[35mTriggerEvent Load (0.1ms)[0m  SELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1
  [1m[36mNotification Load (0.1ms)[0m  [1mSELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1[0m
  Processing by SubstitutionController#substitutions_alert as HTML
  Parameters: {"closed"=>"false"}
  [1m[35mPreferenceSetting Load (0.5ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 93) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 93) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `preference_settings` (`substitution_policy_email_sending_schedule`, `session_alerts_display_time`, `default_language_for_master_scheduler`, `substitution_alerts_email_type`, `substitution_alerts_display_time`, `calendar_notices_display_time`, `no_of_learner_dashboard_records`, `no_of_substitution_alerts_to_display`, `timeoff_request_email_type`, `notifications_email`, `calendar_notices_email_sending_schedule`, `no_of_home_substitutions`, `substitution_policy_email_type`, `no_of_home_announcements`, `mails_sent`, `start_page`, `calendar_notices_email`, `coach_not_present_alert`, `notifications_email_sending_schedule`, `updated_at`, `substitution_policy_email`, `no_of_notifications_to_display`, `notifications_display_time`, `substitution_alerts_email`, `no_of_calendar_notices_to_display`, `created_at`, `timeoff_request_email`, `calendar_notices_email_type`, `no_of_home_events`, `substitution_alerts_sms`, `substitution_alerts_email_sending_schedule`, `account_id`, `no_of_home_notifications`, `daily_cap`, `notifications_email_type`) VALUES (NULL, NULL, NULL, 'PER', 86400, NULL, NULL, 5, NULL, NULL, 'IMMEDIATELY', 5, NULL, 5, 0, 'CM_MS', NULL, NULL, 'IMMEDIATELY', '2015-01-13 08:19:22', NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:19:22', NULL, 'PER', 5, NULL, 'IMMEDIATELY', 93, 5, NULL, 'PER')[0m
Saving a log entry on create for PreferenceSetting record 14
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'PreferenceSetting', 14, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mShownSubstitutions Load (0.3ms)[0m  SELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 93 LIMIT 1
  [1m[36mSubstitution Load (0.7ms)[0m  [1mSELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions) on (coach_sessions.id = substitutions.coach_session_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:19:22' and coach_sessions.session_end_time > '2015-01-13 08:19:22' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 28 LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 75 LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 28)) LIMIT 1
  [1m[36mCmPreference Load (0.3ms)[0m  [1mSELECT `cm_preferences`.* FROM `cm_preferences` WHERE (`cm_preferences`.account_id = 93) LIMIT 1[0m
Rendered shared/_substitutions_alert.html.erb (0.5ms)
Completed 200 OK in 21ms (Views: 1.2ms | ActiveRecord: 78.8ms)
  [1m[35mSQL (34.2ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email665@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.5ms)[0m  INSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'test21', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:22', 'CoachManager', NULL, 1, 'rs_email665@rosettastone.com', NULL, 'test21', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:22', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)
Saving a log entry on create for Account record 95
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 95, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`created_at`, `language_code`, `updated_at`, `name`) VALUES ('2015-01-13 08:19:22', 'en-US', '2015-01-13 08:19:22', 'English')[0m
Saving a log entry on create for SupportLanguage record 51
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'SupportLanguage', 51, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, NULL, '', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 95 LIMIT 1
  [1m[36mCoach Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test708') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'user_391@factory.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`address`, `full_name`, `preferred_name`, `sessions_allowed_per_week`, `hire_date`, `photo_file_name`, `photo_content_type`, `primary_country_code`, `photo_file_size`, `personal_email`, `skype_id`, `photo_file`, `manager_id`, `lotus_qualified`, `coach_guid`, `updated_at`, `type`, `country`, `active`, `rs_email`, `last_logout`, `user_name`, `native_language`, `next_substitution_alert_in`, `mobile_country_code`, `next_session_alert_in`, `bio`, `mobile_phone`, `birth_date`, `created_at`, `other_languages`, `secondary_phone`, `primary_phone`, `region_id`, `manager_notes`, `aim_id`, `is_supervisor`) VALUES (NULL, 'test', 'test', 8, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, NULL, 1, NULL, '2015-01-13 08:19:22', 'Coach', NULL, 1, 'user_391@factory.com', NULL, 'test708', 'en-US', 24, '1', NULL, NULL, NULL, NULL, '2015-01-13 08:19:22', NULL, NULL, '5402334456', NULL, NULL, NULL, 0)[0m
Saving a log entry on create for Account record 96
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `loggable_type`, `loggable_id`, `created_at`, `timestamp`, `previous_value`, `changed_by`, `attribute_name`, `action`) VALUES (NULL, 'Account', 96, '2015-01-13 08:19:22', '2015-01-13 08:19:22', NULL, 'vramanan', '', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`eschool_session_id` = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ESP' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (34.8ms)[0m  ROLLBACK
[WARNING] Audit logging has been enabled for Account
[WARNING] Audit logging has been enabled for AddConsumableLog
[WARNING] Audit logging has been enabled for Announcement
[WARNING] Audit logging has been enabled for CoachSession
[WARNING] Audit logging has been enabled for Language
[WARNING] Audit logging has been enabled for CmPreference
  [1m[36mSQL (0.4ms)[0m  [1mSHOW TABLES[0m
[WARNING] Audit logging has been enabled for CoachAvailability
[WARNING] Audit logging has been enabled for CoachAvailabilityTemplate
[WARNING] Audit logging has been enabled for CoachRecurringSchedule
[WARNING] Audit logging has been enabled for DelayedJob
[WARNING] Audit logging has been enabled for Event
[WARNING] Audit logging has been enabled for ExcludedCoachesSession
[WARNING] Audit logging has been enabled for LanguageConfiguration
[WARNING] Audit logging has been enabled for LearnerSupportStatus
[WARNING] Audit logging has been enabled for Level
  [1m[35mLevel Load (0.1ms)[0m  SELECT `levels`.* FROM `levels`
[WARNING] Audit logging has been enabled for Link
[WARNING] Audit logging has been enabled for ManagementTeamMember
[WARNING] Audit logging has been enabled for MasterSchedulerBulkData
[WARNING] Audit logging has been enabled for MsDraftData
[WARNING] Audit logging has been enabled for MsErrorMessage
[WARNING] Audit logging has been enabled for Notification
[WARNING] Audit logging has been enabled for NotificationMessageDynamic
[WARNING] Audit logging has been enabled for NotificationRecipient
[WARNING] Audit logging has been enabled for PreferenceSetting
[WARNING] Audit logging has been enabled for Qualification
[WARNING] Audit logging has been enabled for RealTimeLotusData
[WARNING] Audit logging has been enabled for Region
[WARNING] Audit logging has been enabled for Resource
[WARNING] Audit logging has been enabled for RightsExtensionLog
[WARNING] Audit logging has been enabled for Role
[WARNING] Audit logging has been enabled for RolesTask
[WARNING] Audit logging has been enabled for SchedulerMetadata
[WARNING] Audit logging has been enabled for ShownSubstitutions
[WARNING] Audit logging has been enabled for Substitution
[WARNING] Audit logging has been enabled for SupportLanguage
[WARNING] Audit logging has been enabled for SupportWindow
[WARNING] Audit logging has been enabled for SystemNotification
[WARNING] Audit logging has been enabled for Task
[WARNING] Audit logging has been enabled for TaskTracer
[WARNING] Audit logging has been enabled for TempData
[WARNING] Audit logging has been enabled for TriggerEvent
[WARNING] Audit logging has been enabled for UnavailableDespiteTemplate
[WARNING] Audit logging has been enabled for UncapLearnerLog
[WARNING] Audit logging has been enabled for UserLanguage
[WARNING] Audit logging has been enabled for UserUpdateExecutionDetail
[WARNING] Audit logging has been enabled for UserVillage
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:20', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:20', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'rajkumar', '5402334456', NULL, NULL, NULL, 'rajkumar')[0m
Saving a log entry on create for Coach record 97
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mSQL (0.4ms)[0m  describe `audit_log_records`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', '', '2015-01-13 08:23:20', NULL, 97, '2015-01-13 08:23:20')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 97
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mdescribe `support_languages`[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:20', '2015-01-13 08:23:20')
Saving a log entry on create for SupportLanguage record 52
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:20', NULL, 52, '2015-01-13 08:23:20')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.5ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  describe `languages`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'ARA', '2015-01-13 08:23:20', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:20')[0m
Saving a log entry on create for Language record 76
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', '', '2015-01-13 08:23:20', NULL, 76, '2015-01-13 08:23:20')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 76 AND (`qualifications`.coach_id = 97 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 76 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 97 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 97 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 97 and language_id = 76)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 97 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mdescribe `qualifications`[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 97, 10, '2015-01-13 08:23:20', 76, '2015-01-13 08:23:20')
Saving a log entry on create for Qualification record 76
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', '', '2015-01-13 08:23:20', NULL, 76, '2015-01-13 08:23:20')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions`[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 97 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mdescribe `coach_sessions`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`coach_showed_up`, `coach_id`, `session_end_time`, `cancellation_reason`, `updated_at`, `name`, `created_at`, `external_village_id`, `number_of_seats`, `appointment_type_id`, `recurring_schedule_id`, `session_status`, `reassigned`, `seconds_prior_to_session`, `language_id`, `attendance_count`, `topic_id`, `language_identifier`, `type`, `session_start_time`, `single_number_unit`, `eschool_session_id`, `cancelled`) VALUES (0, 97, '2015-01-13 09:30:00', NULL, '2015-01-13 08:23:20', NULL, '2015-01-13 08:23:20', NULL, 0, NULL, NULL, 1, NULL, NULL, 76, NULL, NULL, 'ARA', 'ConfirmedSession', '2015-01-13 09:00:00', 1, 343, 0)
Saving a log entry on create for ConfirmedSession record 29
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'CoachSession', '', '', '2015-01-13 08:23:20', NULL, 29, '2015-01-13 08:23:20')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 29) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 29 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  describe `substitutions`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`grabber_coach_id`, `lang_id`, `coach_id`, `coach_session_id`, `updated_at`, `was_reassigned`, `reason`, `created_at`, `cancelled`, `grabbed_at`, `session_type`, `grabbed`) VALUES (NULL, NULL, 97, 29, '2015-01-13 08:23:20', NULL, 'Electricity Outage', '2015-01-13 08:23:20', 0, NULL, 'normal', 0)[0m
Saving a log entry on create for Substitution record 36
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Substitution', '', '', '2015-01-13 08:23:20', NULL, 36, '2015-01-13 08:23:20')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email771@rosettastone.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:20', NULL, NULL, '2015-01-13 08:23:20', 'CoachManager', NULL, 'vramanan', NULL, 0, NULL, 1, NULL, 'rs_email771@rosettastone.com', '1', NULL, '5402334456', 'vramanan', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 98
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', '', '2015-01-13 08:23:20', NULL, 98, '2015-01-13 08:23:20')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 98 LIMIT 1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'AUS' OR identifier = 'AUS') ORDER BY languages.id DESC LIMIT 1[0m
  Processing by SubstitutionController#assign_substitute_for_coach as HTML
  Parameters: {"assigned_coach"=>97, "coach_id"=>97, "coach_session_id"=>29}
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 97 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 29 LIMIT 1[0m
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 29) ORDER BY substitutions.id DESC LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 29 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `substitutions` SET `grabber_coach_id` = 97, `updated_at` = '2015-01-13 08:23:20', `was_reassigned` = 1, `grabbed_at` = '2015-01-13 08:23:20', `grabbed` = 1 WHERE `substitutions`.`id` = 36[0m
Saving a log entry on update for Substitution record 36
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (1, 'update', 'Substitution', 'was_reassigned', 'vramanan', '2015-01-13 08:23:20', NULL, 36, '2015-01-13 08:23:20')
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (97, 'update', 'Substitution', 'grabber_coach_id', 'vramanan', '2015-01-13 08:23:20', NULL, 36, '2015-01-13 08:23:20')[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (1, 'update', 'Substitution', 'grabbed', 'vramanan', '2015-01-13 08:23:20', 0, 36, '2015-01-13 08:23:20')
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES ('2015-01-13 08:23:20', 'update', 'Substitution', 'grabbed_at', 'vramanan', '2015-01-13 08:23:20', NULL, 36, '2015-01-13 08:23:20')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 97 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 29) ORDER BY updated_at DESC LIMIT 1[0m
Saving a log entry on update for ConfirmedSession record 29
  [1m[35mSessionMetadata Load (0.1ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 29) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 97 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mTriggerEvent Load (0.2ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'MANUALLY_REASSIGNED' LIMIT 1[0m
  [1m[35mNotification Load (0.1ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 11) LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 29 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 76 LIMIT 1
Completed 200 OK in 48ms (Views: 15.7ms | ActiveRecord: 101.4ms)
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'Check' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'Check') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'Check@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'Check@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:20', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:20', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'Check', '5402334456', NULL, NULL, NULL, 'Check')[0m
Saving a log entry on create for Coach record 99
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:20', NULL, 99, '2015-01-13 08:23:20')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 99
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'AUS' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'AUS') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'AriaLanguage', 'AUS', '2015-01-13 08:23:20', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:20')
Saving a log entry on create for Language record 77
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:20', NULL, 77, '2015-01-13 08:23:20')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 77 AND (`qualifications`.coach_id = 99 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 77 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 99 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 99 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 99 and language_id = 77)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 99 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 99, 10, '2015-01-13 08:23:20', 77, '2015-01-13 08:23:20')
Saving a log entry on create for Qualification record 77
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:20', NULL, 77, '2015-01-13 08:23:20')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 29 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`grabber_coach_id`, `lang_id`, `coach_id`, `coach_session_id`, `updated_at`, `was_reassigned`, `reason`, `created_at`, `cancelled`, `grabbed_at`, `session_type`, `grabbed`) VALUES (97, NULL, 97, 29, '2015-01-13 08:23:20', NULL, NULL, '2015-01-13 08:23:20', 0, NULL, 'normal', 1)[0m
Saving a log entry on create for Substitution record 37
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Substitution', '', 'vramanan', '2015-01-13 08:23:20', NULL, 37, '2015-01-13 08:23:20')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#assign_substitute_for_coach as HTML
  Parameters: {"assigned_coach"=>97, "coach_id"=>97, "coach_session_id"=>29}
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 99 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 29 LIMIT 1[0m
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 29) ORDER BY substitutions.id DESC LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 29 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`grabber_coach_id`, `lang_id`, `coach_id`, `coach_session_id`, `updated_at`, `was_reassigned`, `reason`, `created_at`, `cancelled`, `grabbed_at`, `session_type`, `grabbed`) VALUES (NULL, NULL, 97, 29, '2015-01-13 08:23:20', 0, NULL, '2015-01-13 08:23:20', 0, NULL, 'normal', 0)[0m
Saving a log entry on create for Substitution record 38
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Substitution', '', 'vramanan', '2015-01-13 08:23:20', NULL, 38, '2015-01-13 08:23:20')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 76 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 97 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 97) AND ((max_unit > 0)))[0m
  [1m[35mSQL (0.5ms)[0m  describe `unavailable_despite_templates`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`unavailability_type`, `approval_status`, `end_date`, `comments`, `coach_session_id`, `ancestry`, `updated_at`, `start_date`, `created_at`, `coach_id`) VALUES (5, 1, '2015-01-13 09:30:00', 'Auto Approved - Coach requested Substitute', 29, NULL, '2015-01-13 08:23:20', '2015-01-13 09:00:00', '2015-01-13 08:23:20', 97)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 16
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'UnavailableDespiteTemplate', '', 'vramanan', '2015-01-13 08:23:20', NULL, 16, '2015-01-13 08:23:20')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `substitutions` SET `grabber_coach_id` = 99, `updated_at` = '2015-01-13 08:23:20', `was_reassigned` = 1, `grabbed_at` = '2015-01-13 08:23:20', `grabbed` = 1 WHERE `substitutions`.`id` = 38[0m
Saving a log entry on update for Substitution record 38
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (1, 'update', 'Substitution', 'was_reassigned', 'vramanan', '2015-01-13 08:23:20', 0, 38, '2015-01-13 08:23:20')
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (99, 'update', 'Substitution', 'grabber_coach_id', 'vramanan', '2015-01-13 08:23:20', NULL, 38, '2015-01-13 08:23:20')[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (1, 'update', 'Substitution', 'grabbed', 'vramanan', '2015-01-13 08:23:20', 0, 38, '2015-01-13 08:23:20')
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES ('2015-01-13 08:23:20', 'update', 'Substitution', 'grabbed_at', 'vramanan', '2015-01-13 08:23:20', NULL, 38, '2015-01-13 08:23:20')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 99 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 29) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.3ms)[0m  UPDATE `coach_sessions` SET `coach_id` = 99, `updated_at` = '2015-01-13 08:23:20' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 29
Saving a log entry on update for ConfirmedSession record 29
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (99, 'update', 'CoachSession', 'coach_id', 'vramanan', '2015-01-13 08:23:20', 97, 29, '2015-01-13 08:23:20')[0m
  [1m[35mSessionMetadata Load (0.1ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 29) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 99 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 29) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `updated_at` = '2015-01-13 08:23:20', `reassigned` = 1 WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 29[0m
Saving a log entry on update for ConfirmedSession record 29
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (1, 'update', 'CoachSession', 'reassigned', 'vramanan', '2015-01-13 08:23:20', NULL, 29, '2015-01-13 08:23:20')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 97 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  describe `system_notifications`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `system_notifications` (`created_at`, `target_id`, `notification_id`, `updated_at`, `raw_message`, `recipient_id`, `status`, `recipient_type`) VALUES ('2015-01-13 08:23:20', NULL, NULL, '2015-01-13 08:23:20', 'You have been assigned a <b>Arabic</b> session on <b>January 13, 2015 04:00 AM</b>.', 99, 0, 'Account')[0m
Saving a log entry on create for SystemNotification record 4
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SystemNotification', '', 'vramanan', '2015-01-13 08:23:20', NULL, 4, '2015-01-13 08:23:20')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 29 LIMIT 1
  [1m[36mSubstitution Load (0.1ms)[0m  [1mSELECT `substitutions`.* FROM `substitutions` WHERE (coach_id = NULL and coach_session_id = 29 ) ORDER BY id desc LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 76 LIMIT 1
Completed 200 OK in 73ms (Views: 0.5ms | ActiveRecord: 12.2ms)
  [1m[36mSQL (51.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email152@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:21', NULL, NULL, '2015-01-13 08:23:21', 'CoachManager', NULL, 'vramanan', NULL, 0, NULL, 1, NULL, 'rs_email152@rosettastone.com', '1', NULL, '5402334456', 'vramanan', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 100
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:21', NULL, 100, '2015-01-13 08:23:21')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:21', '2015-01-13 08:23:21')
Saving a log entry on create for SupportLanguage record 53
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:21', NULL, 53, '2015-01-13 08:23:21')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 100 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:21', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:21', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'rajkumar', '5402334456', NULL, NULL, NULL, 'rajkumar')
Saving a log entry on create for Coach record 101
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:21', NULL, 101, '2015-01-13 08:23:21')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 101
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'ReflexLanguage', 'KLE', '2015-01-13 08:23:21', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:21')[0m
Saving a log entry on create for Language record 78
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:21', NULL, 78, '2015-01-13 08:23:21')
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 78 AND (`qualifications`.coach_id = 101 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 78 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 101 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 101 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 101 and language_id = 78)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 101 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 101, 10, '2015-01-13 08:23:21', 78, '2015-01-13 08:23:21')[0m
Saving a log entry on create for Qualification record 78
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:21', NULL, 78, '2015-01-13 08:23:21')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`coach_showed_up`, `coach_id`, `session_end_time`, `cancellation_reason`, `updated_at`, `name`, `created_at`, `external_village_id`, `number_of_seats`, `appointment_type_id`, `recurring_schedule_id`, `session_status`, `reassigned`, `seconds_prior_to_session`, `language_id`, `attendance_count`, `topic_id`, `language_identifier`, `type`, `session_start_time`, `single_number_unit`, `eschool_session_id`, `cancelled`) VALUES (0, 18, '2015-01-13 10:30:00', NULL, '2015-01-13 08:23:21', NULL, '2015-01-13 08:23:21', NULL, 0, NULL, NULL, 1, NULL, NULL, 78, NULL, NULL, 'KLE', 'ConfirmedSession', '2015-01-13 10:00:00', 1, 345698, 0)[0m
Saving a log entry on create for ConfirmedSession record 30
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'CoachSession', '', 'vramanan', '2015-01-13 08:23:21', NULL, 30, '2015-01-13 08:23:21')
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 30) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 30 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`grabber_coach_id`, `lang_id`, `coach_id`, `coach_session_id`, `updated_at`, `was_reassigned`, `reason`, `created_at`, `cancelled`, `grabbed_at`, `session_type`, `grabbed`) VALUES (NULL, NULL, 101, 30, '2015-01-13 08:23:21', NULL, 'Electricity Outage', '2015-01-13 08:23:21', 0, NULL, 'normal', 0)[0m
Saving a log entry on create for Substitution record 39
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Substitution', '', 'vramanan', '2015-01-13 08:23:21', NULL, 39, '2015-01-13 08:23:21')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#cancel_substitution as HTML
  Parameters: {"reason"=>"Electricity Outage", "sub_id"=>39, "notice"=>true}
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE `substitutions`.`id` = 39 LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 30 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 78 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `substitutions` SET `updated_at` = '2015-01-13 08:23:21', `cancelled` = 1 WHERE `substitutions`.`id` = 39
Saving a log entry on update for Substitution record 39
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (1, 'update', 'Substitution', 'cancelled', 'vramanan', '2015-01-13 08:23:21', 0, 39, '2015-01-13 08:23:21')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 101 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `cancellation_reason` = 'Electricity Outage', `updated_at` = '2015-01-13 08:23:21' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 30[0m
Saving a log entry on update for ConfirmedSession record 30
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES ('Electricity Outage', 'update', 'CoachSession', 'cancellation_reason', 'vramanan', '2015-01-13 08:23:21', NULL, 30, '2015-01-13 08:23:21')
  [1m[36mSessionMetadata Load (0.1ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 30) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 18ms (Views: 2.3ms | ActiveRecord: 61.7ms)
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'Ven' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'Ven') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'Ven@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'Ven@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:21', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:21', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'Ven', '5402334456', NULL, NULL, NULL, 'Ven')[0m
Saving a log entry on create for Coach record 102
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:21', NULL, 102, '2015-01-13 08:23:21')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 102
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'ARA', '2015-01-13 08:23:21', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:21')
Saving a log entry on create for Language record 79
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:21', NULL, 79, '2015-01-13 08:23:21')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 79 AND (`qualifications`.coach_id = 102 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 79 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 102 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 102 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 102 and language_id = 79)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 102 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 102, 10, '2015-01-13 08:23:21', 79, '2015-01-13 08:23:21')
Saving a log entry on create for Qualification record 79
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:21', NULL, 79, '2015-01-13 08:23:21')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 102 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`coach_showed_up`, `coach_id`, `session_end_time`, `cancellation_reason`, `updated_at`, `name`, `created_at`, `external_village_id`, `number_of_seats`, `appointment_type_id`, `recurring_schedule_id`, `session_status`, `reassigned`, `seconds_prior_to_session`, `language_id`, `attendance_count`, `topic_id`, `language_identifier`, `type`, `session_start_time`, `single_number_unit`, `eschool_session_id`, `cancelled`) VALUES (0, 102, '2015-01-13 10:30:00', NULL, '2015-01-13 08:23:21', NULL, '2015-01-13 08:23:21', NULL, 0, NULL, NULL, 1, NULL, NULL, 78, NULL, NULL, 'KLE', 'ConfirmedSession', '2015-01-13 10:00:00', 1, 989648, 0)
Saving a log entry on create for ConfirmedSession record 31
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'CoachSession', '', 'vramanan', '2015-01-13 08:23:21', NULL, 31, '2015-01-13 08:23:21')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 31) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 31 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `substitutions` (`grabber_coach_id`, `lang_id`, `coach_id`, `coach_session_id`, `updated_at`, `was_reassigned`, `reason`, `created_at`, `cancelled`, `grabbed_at`, `session_type`, `grabbed`) VALUES (NULL, NULL, 101, 31, '2015-01-13 08:23:21', NULL, 'Electricity Outage', '2015-01-13 08:23:21', 1, NULL, 'normal', 0)
Saving a log entry on create for Substitution record 40
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Substitution', '', 'vramanan', '2015-01-13 08:23:21', NULL, 40, '2015-01-13 08:23:21')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#cancel_substitution as HTML
  Parameters: {"reason"=>"Electricity Outage", "sub_id"=>39, "notice"=>true}
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 989648 LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`eschool_session_id` = 989648 LIMIT 1
  [1m[36mSubstitution Load (0.2ms)[0m  [1mSELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 31) ORDER BY substitutions.id DESC LIMIT 1[0m
  [1m[35mCoachSession Load (0.1ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 31 LIMIT 1
Completed 500 Internal Server Error in 5ms (Views: 0.4ms | ActiveRecord: 6.6ms)
  [1m[36mSQL (37.0ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:21', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:21', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'rajkumar', '5402334456', NULL, NULL, NULL, 'rajkumar')[0m
Saving a log entry on create for Coach record 103
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:21', NULL, 103, '2015-01-13 08:23:21')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 103
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:21', '2015-01-13 08:23:21')
Saving a log entry on create for SupportLanguage record 54
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:21', NULL, 54, '2015-01-13 08:23:21')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'ReflexLanguage', 'KLE', '2015-01-13 08:23:21', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:21')
Saving a log entry on create for Language record 80
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:21', NULL, 80, '2015-01-13 08:23:21')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 80 AND (`qualifications`.coach_id = 103 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 80 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 103 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 103 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 103 and language_id = 80)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 103 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 103, 10, '2015-01-13 08:23:21', 80, '2015-01-13 08:23:21')
Saving a log entry on create for Qualification record 80
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:21', NULL, 80, '2015-01-13 08:23:21')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 103
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 103
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `accounts` SET `created_at` = '2015-01-12 08:23:21', `updated_at` = '2015-01-13 08:23:21' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 103[0m
Saving a log entry on update for Coach record 103
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE (`qualifications`.coach_id = 103 AND (max_unit > 0))[0m
  [1m[35mSupportLanguage Load (0.1ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 103 LIMIT 1[0m
  [1m[35mCoachSession Load (0.1ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions`
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`coach_showed_up`, `coach_id`, `session_end_time`, `cancellation_reason`, `updated_at`, `name`, `created_at`, `external_village_id`, `number_of_seats`, `appointment_type_id`, `recurring_schedule_id`, `session_status`, `reassigned`, `seconds_prior_to_session`, `language_id`, `attendance_count`, `topic_id`, `language_identifier`, `type`, `session_start_time`, `single_number_unit`, `eschool_session_id`, `cancelled`) VALUES (0, 18, '2015-01-13 10:30:00', NULL, '2015-01-13 08:23:21', NULL, '2015-01-13 08:23:21', NULL, 0, NULL, NULL, 1, NULL, NULL, 80, NULL, NULL, 'KLE', 'ConfirmedSession', '2015-01-13 10:00:00', 1, 345698, 0)
Saving a log entry on create for ConfirmedSession record 32
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'CoachSession', '', 'vramanan', '2015-01-13 08:23:21', NULL, 32, '2015-01-13 08:23:21')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 32) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 32 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`grabber_coach_id`, `lang_id`, `coach_id`, `coach_session_id`, `updated_at`, `was_reassigned`, `reason`, `created_at`, `cancelled`, `grabbed_at`, `session_type`, `grabbed`) VALUES (NULL, NULL, 103, 32, '2015-01-13 08:23:21', NULL, NULL, '2015-01-13 08:23:21', 0, NULL, 'normal', 0)
Saving a log entry on create for Substitution record 41
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Substitution', '', 'vramanan', '2015-01-13 08:23:21', NULL, 41, '2015-01-13 08:23:21')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#check_sub_policy_violation as JS
  Parameters: {"coach_id"=>103, "start_time"=>Tue Jan 13 08:00:00 UTC 2015}
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 103 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.3ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 103) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 103) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mdescribe `preference_settings`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `preference_settings` (`substitution_alerts_email_sending_schedule`, `substitution_alerts_sms`, `updated_at`, `no_of_home_announcements`, `substitution_policy_email_sending_schedule`, `no_of_calendar_notices_to_display`, `substitution_policy_email`, `notifications_display_time`, `no_of_home_events`, `notifications_email`, `no_of_home_substitutions`, `substitution_alerts_email_type`, `default_language_for_master_scheduler`, `calendar_notices_display_time`, `substitution_policy_email_type`, `no_of_substitution_alerts_to_display`, `substitution_alerts_email`, `timeoff_request_email`, `no_of_learner_dashboard_records`, `no_of_home_notifications`, `mails_sent`, `calendar_notices_email_sending_schedule`, `calendar_notices_email_type`, `daily_cap`, `calendar_notices_email`, `created_at`, `coach_not_present_alert`, `notifications_email_sending_schedule`, `account_id`, `start_page`, `substitution_alerts_display_time`, `no_of_notifications_to_display`, `notifications_email_type`, `session_alerts_display_time`, `timeoff_request_email_type`) VALUES ('IMMEDIATELY', 1, '2015-01-13 08:23:21', 5, NULL, NULL, NULL, NULL, 5, NULL, 5, 'PER', NULL, NULL, NULL, 5, NULL, NULL, NULL, 5, 0, 'IMMEDIATELY', 'PER', NULL, NULL, '2015-01-13 08:23:21', NULL, 'IMMEDIATELY', 103, 'CALENDAR', 86400, NULL, 'PER', 10, NULL)
Saving a log entry on create for PreferenceSetting record 15
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'PreferenceSetting', '', 'rajkumar', '2015-01-13 08:23:21', NULL, 15, '2015-01-13 08:23:21')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 103 AND session_start_time < '2015-01-13 08:33:21' AND session_start_time >= '2015-01-13 08:23:21' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 103 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 103 and session_start_time = '1970-01-17 10:45:36' and cancelled is false) LIMIT 1[0m
  [1m[35mSubstitution Load (0.8ms)[0m  Select DISTINCT * from substitutions s join coach_sessions c on s.coach_session_id = c.id join unavailable_despite_templates u where c.type NOT IN ('ExtraSession','Appointment') and s.coach_id = 103 and c.session_start_time >= '1970-01-01 05:00:00' and c.session_start_time < '1970-02-01 04:59:59' and u.coach_session_id = c.id and (s.coach_id != s.grabber_coach_id OR s.grabber_coach_id is null) and u.unavailability_type in (1,5) order by s.created_at, u.created_at desc;
Completed 200 OK in 61ms (Views: 24.1ms | ActiveRecord: 48.8ms)
  [1m[36mSQL (29.0ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email661@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:21', NULL, NULL, '2015-01-13 08:23:21', 'CoachManager', NULL, 'vramanan', NULL, 0, NULL, 1, NULL, 'rs_email661@rosettastone.com', '1', NULL, '5402334456', 'vramanan', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 104
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'rajkumar', '2015-01-13 08:23:21', NULL, 104, '2015-01-13 08:23:21')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:21', '2015-01-13 08:23:21')
Saving a log entry on create for SupportLanguage record 55
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:21', NULL, 55, '2015-01-13 08:23:21')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 104 LIMIT 1[0m
  [1m[35mAccount Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:21', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:21', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'rajkumar', '5402334456', NULL, NULL, NULL, 'rajkumar')
Saving a log entry on create for Coach record 105
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'rajkumar', '2015-01-13 08:23:21', NULL, 105, '2015-01-13 08:23:21')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 105
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'ReflexLanguage', 'KLE', '2015-01-13 08:23:21', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:21')[0m
Saving a log entry on create for Language record 81
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'rajkumar', '2015-01-13 08:23:21', NULL, 81, '2015-01-13 08:23:21')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 81 AND (`qualifications`.coach_id = 105 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 81 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 105 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 105 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 105 and language_id = 81)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 105 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 105, 10, '2015-01-13 08:23:21', 81, '2015-01-13 08:23:21')[0m
Saving a log entry on create for Qualification record 81
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'rajkumar', '2015-01-13 08:23:21', NULL, 81, '2015-01-13 08:23:21')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'HEB' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (46.9ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email857@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:22', NULL, NULL, '2015-01-13 08:23:22', 'Coach', NULL, 'test21', NULL, 0, NULL, 1, NULL, 'rs_email857@rosettastone.com', '1', NULL, '5402334456', 'test21', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 106
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'rajkumar', '2015-01-13 08:23:22', NULL, 106, '2015-01-13 08:23:22')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `accounts` SET `updated_at` = '2015-01-13 08:23:22', `created_at` = '2015-01-12 08:23:22' WHERE `accounts`.`id` = 106[0m
Saving a log entry on update for Account record 106
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'ARA', '2015-01-13 08:23:22', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:22')
Saving a log entry on create for Language record 82
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'rajkumar', '2015-01-13 08:23:22', NULL, 82, '2015-01-13 08:23:22')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 106 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 106 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 106 and language_id = 82)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 106 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 106, 10, '2015-01-13 08:23:22', 82, '2015-01-13 08:23:22')
Saving a log entry on create for Qualification record 82
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'rajkumar', '2015-01-13 08:23:22', NULL, 82, '2015-01-13 08:23:22')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:22', '2015-01-13 08:23:22')[0m
Saving a log entry on create for SupportLanguage record 56
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:22', NULL, 56, '2015-01-13 08:23:22')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 106 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `accounts` SET `created_at` = '2015-01-13 08:23:22', `updated_at` = '2015-01-13 08:23:22' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 106
Saving a log entry on update for Coach record 106
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (3.0ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:22', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:22', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'rajkumar', '5402334456', NULL, NULL, NULL, 'rajkumar')
Saving a log entry on create for Coach record 107
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'rajkumar', '2015-01-13 08:23:22', NULL, 107, '2015-01-13 08:23:22')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 107
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'ReflexLanguage', 'KLE', '2015-01-13 08:23:22', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:22')[0m
Saving a log entry on create for Language record 83
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'rajkumar', '2015-01-13 08:23:22', NULL, 83, '2015-01-13 08:23:22')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 83 AND (`qualifications`.coach_id = 107 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 83 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 107 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 107 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 107 and language_id = 83)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 107 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 107, 10, '2015-01-13 08:23:22', 83, '2015-01-13 08:23:22')[0m
Saving a log entry on create for Qualification record 83
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'rajkumar', '2015-01-13 08:23:22', NULL, 83, '2015-01-13 08:23:22')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions`
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'HEB' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (38.7ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email432@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:22', NULL, NULL, '2015-01-13 08:23:22', 'CoachManager', NULL, 'vramanan', NULL, 0, NULL, 1, NULL, 'rs_email432@rosettastone.com', '1', NULL, '5402334456', 'vramanan', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)
Saving a log entry on create for Account record 108
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'rajkumar', '2015-01-13 08:23:22', NULL, 108, '2015-01-13 08:23:22')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:22', '2015-01-13 08:23:22')[0m
Saving a log entry on create for SupportLanguage record 57
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:22', NULL, 57, '2015-01-13 08:23:22')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 108 LIMIT 1
  Processing by SubstitutionController#substitutions as HTML
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 108) AND ((max_unit is NULL)))[0m
  [1m[35mSubstitution Load (0.6ms)[0m  SELECT `substitutions`.`id` AS t0_r0, `substitutions`.`coach_id` AS t0_r1, `substitutions`.`grabber_coach_id` AS t0_r2, `substitutions`.`grabbed` AS t0_r3, `substitutions`.`lang_id` AS t0_r4, `substitutions`.`coach_session_id` AS t0_r5, `substitutions`.`created_at` AS t0_r6, `substitutions`.`updated_at` AS t0_r7, `substitutions`.`grabbed_at` AS t0_r8, `substitutions`.`cancelled` AS t0_r9, `substitutions`.`was_reassigned` AS t0_r10, `substitutions`.`session_type` AS t0_r11, `substitutions`.`reason` AS t0_r12, `coach_sessions`.`id` AS t1_r0, `coach_sessions`.`eschool_session_id` AS t1_r1, `coach_sessions`.`session_start_time` AS t1_r2, `coach_sessions`.`created_at` AS t1_r3, `coach_sessions`.`updated_at` AS t1_r4, `coach_sessions`.`cancelled` AS t1_r5, `coach_sessions`.`external_village_id` AS t1_r6, `coach_sessions`.`language_identifier` AS t1_r7, `coach_sessions`.`single_number_unit` AS t1_r8, `coach_sessions`.`number_of_seats` AS t1_r9, `coach_sessions`.`attendance_count` AS t1_r10, `coach_sessions`.`coach_showed_up` AS t1_r11, `coach_sessions`.`seconds_prior_to_session` AS t1_r12, `coach_sessions`.`recurring_schedule_id` AS t1_r13, `coach_sessions`.`coach_id` AS t1_r14, `coach_sessions`.`session_status` AS t1_r15, `coach_sessions`.`type` AS t1_r16, `coach_sessions`.`name` AS t1_r17, `coach_sessions`.`session_end_time` AS t1_r18, `coach_sessions`.`language_id` AS t1_r19, `coach_sessions`.`cancellation_reason` AS t1_r20, `coach_sessions`.`topic_id` AS t1_r21, `coach_sessions`.`reassigned` AS t1_r22, `coach_sessions`.`appointment_type_id` AS t1_r23, `accounts`.`id` AS t2_r0, `accounts`.`user_name` AS t2_r1, `accounts`.`full_name` AS t2_r2, `accounts`.`preferred_name` AS t2_r3, `accounts`.`rs_email` AS t2_r4, `accounts`.`personal_email` AS t2_r5, `accounts`.`skype_id` AS t2_r6, `accounts`.`primary_phone` AS t2_r7, `accounts`.`secondary_phone` AS t2_r8, `accounts`.`birth_date` AS t2_r9, `accounts`.`hire_date` AS t2_r10, `accounts`.`bio` AS t2_r11, `accounts`.`manager_notes` AS t2_r12, `accounts`.`active` AS t2_r13, `accounts`.`manager_id` AS t2_r14, `accounts`.`created_at` AS t2_r15, `accounts`.`updated_at` AS t2_r16, `accounts`.`type` AS t2_r17, `accounts`.`region_id` AS t2_r18, `accounts`.`next_session_alert_in` AS t2_r19, `accounts`.`last_logout` AS t2_r20, `accounts`.`country` AS t2_r21, `accounts`.`native_language` AS t2_r22, `accounts`.`other_languages` AS t2_r23, `accounts`.`address` AS t2_r24, `accounts`.`lotus_qualified` AS t2_r25, `accounts`.`next_substitution_alert_in` AS t2_r26, `accounts`.`mobile_phone` AS t2_r27, `accounts`.`sessions_allowed_per_week` AS t2_r28, `accounts`.`is_supervisor` AS t2_r29, `accounts`.`mobile_country_code` AS t2_r30, `accounts`.`aim_id` AS t2_r31, `accounts`.`primary_country_code` AS t2_r32, `accounts`.`photo_file_name` AS t2_r33, `accounts`.`photo_content_type` AS t2_r34, `accounts`.`photo_file_size` AS t2_r35, `accounts`.`photo_file` AS t2_r36, `accounts`.`coach_guid` AS t2_r37, `languages`.`id` AS t3_r0, `languages`.`identifier` AS t3_r1, `languages`.`created_at` AS t3_r2, `languages`.`updated_at` AS t3_r3, `languages`.`last_pushed_week` AS t3_r4, `languages`.`type` AS t3_r5, `languages`.`duration` AS t3_r6, `languages`.`connection_type` AS t3_r7, `languages`.`external_scheduler` AS t3_r8 FROM `substitutions` LEFT OUTER JOIN `coach_sessions` ON `coach_sessions`.`id` = `substitutions`.`coach_session_id` LEFT OUTER JOIN `accounts` ON `accounts`.`id` = `substitutions`.`coach_id` AND `accounts`.`type` = 'Coach' LEFT OUTER JOIN `coach_sessions` `languages_substitutions_join` ON `substitutions`.`coach_session_id` = `languages_substitutions_join`.`id` LEFT OUTER JOIN `languages` ON `languages`.`id` = `languages_substitutions_join`.`language_id` WHERE (coach_sessions.language_identifier IN (NULL) AND coach_sessions.session_start_time >= '2015-01-13 07:31:00' AND coach_sessions.session_start_time < '2015-01-20 08:00:00' AND substitutions.cancelled = 0 AND grabbed = 0) ORDER BY coach_sessions.session_start_time
  [1m[36mLanguage Load (0.4ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-NED-L' OR identifier = 'TMM-NED-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-NED-P' OR identifier = 'TMM-NED-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ENG-L' OR identifier = 'TMM-ENG-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ENG-P' OR identifier = 'TMM-ENG-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-FRA-L' OR identifier = 'TMM-FRA-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-FRA-P' OR identifier = 'TMM-FRA-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-MCH-L' OR identifier = 'TMM-MCH-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-DEU-L' OR identifier = 'TMM-DEU-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-DEU-P' OR identifier = 'TMM-DEU-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ITA-L' OR identifier = 'TMM-ITA-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ITA-P' OR identifier = 'TMM-ITA-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ESP-L' OR identifier = 'TMM-ESP-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ESP-P' OR identifier = 'TMM-ESP-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mAlert Load (0.1ms)[0m  SELECT `alerts`.* FROM `alerts` WHERE (active = 1) ORDER BY alerts.id DESC LIMIT 1
Rendered shared/_editor_authenticate.html.erb (4.3ms)
Rendered shared/_header.html.erb (6.8ms)
Rendered shared/_default_navigation.html.erb (14.0ms)
Rendered shared/_profile_links.html.erb (1.5ms)
Rendered shared/_body_content.html.erb (18.0ms)
Completed 200 OK in 65ms (Views: 45.6ms | ActiveRecord: 138.9ms)
  [1m[36mSQL (30.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email995@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:22', NULL, NULL, '2015-01-13 08:23:22', 'CoachManager', NULL, 'test21', NULL, 0, NULL, 1, NULL, 'rs_email995@rosettastone.com', '1', NULL, '5402334456', 'test21', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 109
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:22', NULL, 109, '2015-01-13 08:23:22')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:22', '2015-01-13 08:23:22')
Saving a log entry on create for SupportLanguage record 58
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:22', NULL, 58, '2015-01-13 08:23:22')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 109 LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'KLE' OR identifier = 'KLE') ORDER BY languages.id DESC LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:22', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:22', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'rajkumar', '5402334456', NULL, NULL, NULL, 'rajkumar')[0m
Saving a log entry on create for Coach record 110
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:22', NULL, 110, '2015-01-13 08:23:22')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 110
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'ReflexLanguage', 'KLE', '2015-01-13 08:23:22', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:22')
Saving a log entry on create for Language record 84
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:22', NULL, 84, '2015-01-13 08:23:22')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 84 AND (`qualifications`.coach_id = 110 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 84 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 110 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 110 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 110 and language_id = 84)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 110 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 110, 10, '2015-01-13 08:23:22', 84, '2015-01-13 08:23:22')
Saving a log entry on create for Qualification record 84
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:22', NULL, 84, '2015-01-13 08:23:22')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 110 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`coach_showed_up`, `coach_id`, `session_end_time`, `cancellation_reason`, `updated_at`, `name`, `created_at`, `external_village_id`, `number_of_seats`, `appointment_type_id`, `recurring_schedule_id`, `session_status`, `reassigned`, `seconds_prior_to_session`, `language_id`, `attendance_count`, `topic_id`, `language_identifier`, `type`, `session_start_time`, `single_number_unit`, `eschool_session_id`, `cancelled`) VALUES (0, 110, '2015-01-13 10:30:00', NULL, '2015-01-13 08:23:22', NULL, '2015-01-13 08:23:22', NULL, 0, NULL, NULL, 1, NULL, NULL, 84, NULL, NULL, 'KLE', 'ConfirmedSession', '2015-01-13 10:00:00', 1, NULL, 0)
Saving a log entry on create for ConfirmedSession record 33
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'CoachSession', '', 'vramanan', '2015-01-13 08:23:22', NULL, 33, '2015-01-13 08:23:22')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 33) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 110 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 110) AND ((max_unit > 0)))
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`unavailability_type`, `approval_status`, `end_date`, `comments`, `coach_session_id`, `ancestry`, `updated_at`, `start_date`, `created_at`, `coach_id`) VALUES (1, 1, '2015-01-13 10:30:00', 'Auto Approved - Coach requested Substitute', 33, NULL, '2015-01-13 08:23:22', '2015-01-13 10:00:00', '2015-01-13 08:23:22', 110)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 17
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'UnavailableDespiteTemplate', '', 'vramanan', '2015-01-13 08:23:22', NULL, 17, '2015-01-13 08:23:22')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 33 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`grabber_coach_id`, `lang_id`, `coach_id`, `coach_session_id`, `updated_at`, `was_reassigned`, `reason`, `created_at`, `cancelled`, `grabbed_at`, `session_type`, `grabbed`) VALUES (NULL, NULL, 110, 33, '2015-01-13 08:23:22', 0, NULL, '2015-01-13 08:23:22', 0, NULL, 'normal', 0)
Saving a log entry on create for Substitution record 42
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Substitution', '', 'vramanan', '2015-01-13 08:23:22', NULL, 42, '2015-01-13 08:23:22')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00' AND id <> 33) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:23:22' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 33
Saving a log entry on update for ConfirmedSession record 33
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'update', 'CoachSession', 'coach_id', 'vramanan', '2015-01-13 08:23:22', 110, 33, '2015-01-13 08:23:22')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 84 OR identifier = 84) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoach Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '84')[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 84 OR identifier = 84) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoachManager Load (0.6ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '84')
  [1m[36mTriggerEvent Load (0.2ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1[0m
  [1m[35mNotification Load (0.0ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1
  Processing by SubstitutionController#substitutions as HTML
Completed 500 Internal Server Error in 1ms
  [1m[36mSQL (46.2ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email949@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:22', NULL, NULL, '2015-01-13 08:23:22', 'CoachManager', NULL, 'vramanan', NULL, 0, NULL, 1, NULL, 'rs_email949@rosettastone.com', '1', NULL, '5402334456', 'vramanan', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 111
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'test21', '2015-01-13 08:23:22', NULL, 111, '2015-01-13 08:23:22')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:22', '2015-01-13 08:23:22')
Saving a log entry on create for SupportLanguage record 59
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:22', NULL, 59, '2015-01-13 08:23:22')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 111 LIMIT 1[0m
  Processing by SubstitutionController#reason_for_sub_request as JS
Rendered shared/_show_reasons.html.erb (0.8ms)
Rendered substitution/_reason_for_sub_request.html.erb (3.0ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 91.1ms)
  [1m[35mSQL (29.8ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email960@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:23', NULL, NULL, '2015-01-13 08:23:23', 'CoachManager', NULL, 'vramanan', NULL, 0, NULL, 1, NULL, 'rs_email960@rosettastone.com', '1', NULL, '5402334456', 'vramanan', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)
Saving a log entry on create for Account record 112
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:23', NULL, 112, '2015-01-13 08:23:23')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:23', '2015-01-13 08:23:23')[0m
Saving a log entry on create for SupportLanguage record 60
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:23', NULL, 60, '2015-01-13 08:23:23')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 112 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'TestCoach@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:23', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:23', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'TestCoach', '5402334456', NULL, NULL, NULL, 'TestCoach')[0m
Saving a log entry on create for Coach record 113
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:23', NULL, 113, '2015-01-13 08:23:23')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 113
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'ARA', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 85
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 85, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 85 AND (`qualifications`.coach_id = 113 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 85 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 113 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 113 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 113 and language_id = 85)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 113 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 113, 10, '2015-01-13 08:23:23', 85, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 85
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 85, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'CHI', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 86
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 86, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 86 AND (`qualifications`.coach_id = 113 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 86 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 113 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 113 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 113 and language_id = 86)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 113 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 113, 10, '2015-01-13 08:23:23', 86, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 86
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 86, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'ENG', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 87
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 87, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 87 AND (`qualifications`.coach_id = 113 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 87 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 113 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 113 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 113 and language_id = 87)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 113 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 113, 10, '2015-01-13 08:23:23', 87, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 87
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 87, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#request_substitute_for_coach as JS
  Parameters: {"lang_identifier"=>"ARA", "time"=>"2010-09-06 11:00:00", "current_coach_id"=>113}
  [1m[36mCoachSession Load (0.4ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 and coach_id = 113 and session_start_time = '2010-09-06 11:00:00') ORDER BY coach_sessions.id DESC LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (Views: 0.5ms | ActiveRecord: 41.3ms)
  [1m[35mSQL (42.8ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email106@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:23', NULL, NULL, '2015-01-13 08:23:23', 'CoachManager', NULL, 'vramanan', NULL, 0, NULL, 1, NULL, 'rs_email106@rosettastone.com', '1', NULL, '5402334456', 'vramanan', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)
Saving a log entry on create for Account record 114
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:23', NULL, 114, '2015-01-13 08:23:23')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:23', '2015-01-13 08:23:23')[0m
Saving a log entry on create for SupportLanguage record 61
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:23', NULL, 61, '2015-01-13 08:23:23')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 114 LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'TestCoach@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:23', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:23', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'TestCoach', '5402334456', NULL, NULL, NULL, 'TestCoach')[0m
Saving a log entry on create for Coach record 115
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:23', NULL, 115, '2015-01-13 08:23:23')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 115
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'ARA', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 88
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 88, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 88 AND (`qualifications`.coach_id = 115 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 88 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 115 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 115 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 115 and language_id = 88)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 115 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 115, 10, '2015-01-13 08:23:23', 88, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 88
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 88, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'CHI', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 89
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 89, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 89 AND (`qualifications`.coach_id = 115 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 89 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 115 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 115 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 115 and language_id = 89)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 115 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 115, 10, '2015-01-13 08:23:23', 89, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 89
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 89, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'ENG', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 90
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 90, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 90 AND (`qualifications`.coach_id = 115 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 90 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 115 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 115 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 115 and language_id = 90)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 115 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 115, 10, '2015-01-13 08:23:23', 90, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 90
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 90, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#request_substitute_for_coach as JS
  Parameters: {"lang_identifier"=>"ARA", "time"=>"2010-09-06 11:00:00", "request_from"=>"dashboard", "current_coach_id"=>115}
  [1m[36mCoachSession Load (0.4ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 and coach_id = 115 and session_start_time = '2010-09-06 11:00:00') ORDER BY coach_sessions.id DESC LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (Views: 0.4ms | ActiveRecord: 54.4ms)
  [1m[35mSQL (44.6ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email932@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:23', NULL, NULL, '2015-01-13 08:23:23', 'CoachManager', NULL, 'vramanan', NULL, 0, NULL, 1, NULL, 'rs_email932@rosettastone.com', '1', NULL, '5402334456', 'vramanan', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)
Saving a log entry on create for Account record 116
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:23', NULL, 116, '2015-01-13 08:23:23')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:23', '2015-01-13 08:23:23')[0m
Saving a log entry on create for SupportLanguage record 62
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:23', NULL, 62, '2015-01-13 08:23:23')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 116 LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'TestCoach@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:23', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:23', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'TestCoach', '5402334456', NULL, NULL, NULL, 'TestCoach')[0m
Saving a log entry on create for Coach record 117
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:23', NULL, 117, '2015-01-13 08:23:23')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 117
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'ARA', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 91
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 91, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 91 AND (`qualifications`.coach_id = 117 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 91 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 117 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 117 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 117 and language_id = 91)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 117 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 117, 10, '2015-01-13 08:23:23', 91, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 91
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 91, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'CHI', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 92
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 92, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 92 AND (`qualifications`.coach_id = 117 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 92 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 117 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 117 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 117 and language_id = 92)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 117 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 117, 10, '2015-01-13 08:23:23', 92, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 92
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 92, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'ENG', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 93
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 93, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 93 AND (`qualifications`.coach_id = 117 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 93 LIMIT 1[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 117 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 117 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 117 and language_id = 93)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 117 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 117, 10, '2015-01-13 08:23:23', 93, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 93
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 93, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (38.7ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email473@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:23', NULL, NULL, '2015-01-13 08:23:23', 'CoachManager', NULL, 'vramanan', NULL, 0, NULL, 1, NULL, 'rs_email473@rosettastone.com', '1', NULL, '5402334456', 'vramanan', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)
Saving a log entry on create for Account record 118
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:23', NULL, 118, '2015-01-13 08:23:23')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:23', '2015-01-13 08:23:23')[0m
Saving a log entry on create for SupportLanguage record 63
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:23', NULL, 63, '2015-01-13 08:23:23')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 118 LIMIT 1
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'TestCoach@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:23', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:23', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'TestCoach', '5402334456', NULL, NULL, NULL, 'TestCoach')[0m
Saving a log entry on create for Coach record 119
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:23', NULL, 119, '2015-01-13 08:23:23')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 119
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'ARA', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 94
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 94, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 94 AND (`qualifications`.coach_id = 119 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 94 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 119 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 119 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 119 and language_id = 94)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 119 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 119, 10, '2015-01-13 08:23:23', 94, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 94
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 94, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'CHI', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 95
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 95, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 95 AND (`qualifications`.coach_id = 119 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 95 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 119 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 119 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 119 and language_id = 95)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 119 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 119, 10, '2015-01-13 08:23:23', 95, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 95
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 95, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'TotaleLanguage', 'ENG', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 96
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 96, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 96 AND (`qualifications`.coach_id = 119 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 96 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 119 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 119 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 119 and language_id = 96)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 119 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 119, 10, '2015-01-13 08:23:23', 96, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 96
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 96, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (47.0ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email273@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:23', NULL, NULL, '2015-01-13 08:23:23', 'CoachManager', NULL, 'vramanan', NULL, 0, NULL, 1, NULL, 'rs_email273@rosettastone.com', '1', NULL, '5402334456', 'vramanan', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)
Saving a log entry on create for Account record 120
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:23', NULL, 120, '2015-01-13 08:23:23')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:23', '2015-01-13 08:23:23')[0m
Saving a log entry on create for SupportLanguage record 64
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:23', NULL, 64, '2015-01-13 08:23:23')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 120 LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:23', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:23', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'rajkumar', '5402334456', NULL, NULL, NULL, 'rajkumar')[0m
Saving a log entry on create for Coach record 121
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:23', NULL, 121, '2015-01-13 08:23:23')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 121
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'ReflexLanguage', 'KLE', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')
Saving a log entry on create for Language record 97
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 97, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 97 AND (`qualifications`.coach_id = 121 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 97 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 121 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 121 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 121 and language_id = 97)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 121 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 121, 10, '2015-01-13 08:23:23', 97, '2015-01-13 08:23:23')
Saving a log entry on create for Qualification record 97
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 97, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'HEB' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (46.2ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:23', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:23', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'rajkumar', '5402334456', NULL, NULL, NULL, 'rajkumar')
Saving a log entry on create for Coach record 122
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:23', NULL, 122, '2015-01-13 08:23:23')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 122
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:23', '2015-01-13 08:23:23')[0m
Saving a log entry on create for SupportLanguage record 65
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:23', NULL, 65, '2015-01-13 08:23:23')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'ReflexLanguage', 'KLE', '2015-01-13 08:23:23', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:23')[0m
Saving a log entry on create for Language record 98
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:23', NULL, 98, '2015-01-13 08:23:23')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 98 AND (`qualifications`.coach_id = 122 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 98 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 122 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 122 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 122 and language_id = 98)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 122 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 122, 10, '2015-01-13 08:23:23', 98, '2015-01-13 08:23:23')[0m
Saving a log entry on create for Qualification record 98
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:23', NULL, 98, '2015-01-13 08:23:23')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 122
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 122
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `accounts` SET `created_at` = '2015-01-12 08:23:23', `updated_at` = '2015-01-13 08:23:23' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 122
Saving a log entry on update for Coach record 122
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE (`qualifications`.coach_id = 122 AND (max_unit > 0))
  [1m[36mSupportLanguage Load (0.1ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mAccount Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 122 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 122 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`coach_showed_up`, `coach_id`, `session_end_time`, `cancellation_reason`, `updated_at`, `name`, `created_at`, `external_village_id`, `number_of_seats`, `appointment_type_id`, `recurring_schedule_id`, `session_status`, `reassigned`, `seconds_prior_to_session`, `language_id`, `attendance_count`, `topic_id`, `language_identifier`, `type`, `session_start_time`, `single_number_unit`, `eschool_session_id`, `cancelled`) VALUES (0, 122, '2015-01-13 12:30:00', NULL, '2015-01-13 08:23:23', NULL, '2015-01-13 08:23:23', NULL, 0, NULL, NULL, 1, NULL, NULL, 98, NULL, NULL, 'KLE', 'ConfirmedSession', '2015-01-13 12:00:00', 1, NULL, 0)
Saving a log entry on create for ConfirmedSession record 34
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'CoachSession', '', 'vramanan', '2015-01-13 08:23:23', NULL, 34, '2015-01-13 08:23:23')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 34) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 122 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 122) AND ((max_unit > 0)))
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`unavailability_type`, `approval_status`, `end_date`, `comments`, `coach_session_id`, `ancestry`, `updated_at`, `start_date`, `created_at`, `coach_id`) VALUES (1, 1, '2015-01-13 12:30:00', 'Auto Approved - Coach requested Substitute', 34, NULL, '2015-01-13 08:23:23', '2015-01-13 12:00:00', '2015-01-13 08:23:23', 122)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 18
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'UnavailableDespiteTemplate', '', 'vramanan', '2015-01-13 08:23:23', NULL, 18, '2015-01-13 08:23:23')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 34 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`grabber_coach_id`, `lang_id`, `coach_id`, `coach_session_id`, `updated_at`, `was_reassigned`, `reason`, `created_at`, `cancelled`, `grabbed_at`, `session_type`, `grabbed`) VALUES (NULL, NULL, 122, 34, '2015-01-13 08:23:23', 0, NULL, '2015-01-13 08:23:23', 0, NULL, 'normal', 0)
Saving a log entry on create for Substitution record 43
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Substitution', '', 'vramanan', '2015-01-13 08:23:23', NULL, 43, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND id <> 34) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:23:23' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 34
Saving a log entry on update for ConfirmedSession record 34
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'update', 'CoachSession', 'coach_id', 'vramanan', '2015-01-13 08:23:23', 122, 34, '2015-01-13 08:23:23')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 98 OR identifier = 98) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoach Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '98')[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 98 OR identifier = 98) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoachManager Load (0.6ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '98')
  [1m[36mTriggerEvent Load (0.0ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1[0m
  [1m[35mNotification Load (0.0ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1
  Processing by SubstitutionController#substitutions_alert as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 122 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.2ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 122) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 122) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `preference_settings` (`substitution_alerts_email_sending_schedule`, `substitution_alerts_sms`, `updated_at`, `no_of_home_announcements`, `substitution_policy_email_sending_schedule`, `no_of_calendar_notices_to_display`, `substitution_policy_email`, `notifications_display_time`, `no_of_home_events`, `notifications_email`, `no_of_home_substitutions`, `substitution_alerts_email_type`, `default_language_for_master_scheduler`, `calendar_notices_display_time`, `substitution_policy_email_type`, `no_of_substitution_alerts_to_display`, `substitution_alerts_email`, `timeoff_request_email`, `no_of_learner_dashboard_records`, `no_of_home_notifications`, `mails_sent`, `calendar_notices_email_sending_schedule`, `calendar_notices_email_type`, `daily_cap`, `calendar_notices_email`, `created_at`, `coach_not_present_alert`, `notifications_email_sending_schedule`, `account_id`, `start_page`, `substitution_alerts_display_time`, `no_of_notifications_to_display`, `notifications_email_type`, `session_alerts_display_time`, `timeoff_request_email_type`) VALUES ('IMMEDIATELY', 1, '2015-01-13 08:23:24', 5, NULL, NULL, NULL, NULL, 5, NULL, 5, 'PER', NULL, NULL, NULL, 5, NULL, NULL, NULL, 5, 0, 'IMMEDIATELY', 'PER', NULL, NULL, '2015-01-13 08:23:24', NULL, 'IMMEDIATELY', 122, 'CALENDAR', 86400, NULL, 'PER', 10, NULL)[0m
Saving a log entry on create for PreferenceSetting record 16
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'PreferenceSetting', '', 'rajkumar', '2015-01-13 08:23:24', NULL, 16, '2015-01-13 08:23:24')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 122 AND session_start_time < '2015-01-13 08:33:24' AND session_start_time >= '2015-01-13 08:23:24' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1
  [1m[36mShownSubstitutions Load (0.1ms)[0m  [1mSELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 122 LIMIT 1[0m
  [1m[35mSubstitution Load (0.6ms)[0m  SELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions, qualifications, languages) on (coach_sessions.id = substitutions.coach_session_id and languages.identifier = coach_sessions.language_identifier and languages.id = qualifications.language_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:23:24' and coach_sessions.session_end_time > '2015-01-13 08:23:24' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL and qualifications.coach_id = 122) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 34 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 98 LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 34)) LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 122 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 122 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00')[0m
  [1m[35mLocalSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 122 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND action != 'create')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 122) AND ((max_unit > 0)))[0m
  [1m[35mCoachRecurringSchedule Load (0.3ms)[0m  SELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 122 and day_index = 2 and start_time = '12:00:00' and recurring_start_date <= '2015-01-13 12:00:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 12:00:00')) ORDER BY recurring_start_date DESC LIMIT 1
  [1m[36mCoachRecurringSchedule Load (0.3ms)[0m  [1mSELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 122 and day_index = 2 and start_time = '11:00:00' and recurring_start_date <= '2015-01-13 11:00:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 11:00:00')) ORDER BY recurring_start_date DESC LIMIT 1[0m
  [1m[35mCoachRecurringSchedule Load (0.2ms)[0m  SELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 122 and day_index = 2 and start_time = '12:30:00' and recurring_start_date <= '2015-01-13 12:30:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 12:30:00')) ORDER BY recurring_start_date DESC LIMIT 1
  [1m[36mCoachRecurringSchedule Load (0.3ms)[0m  [1mSELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 122 and day_index = 2 and start_time = '11:30:00' and recurring_start_date <= '2015-01-13 11:30:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 11:30:00')) ORDER BY recurring_start_date DESC LIMIT 1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 122 AND language_id = 98) ORDER BY qualifications.id DESC LIMIT 1
  [1m[36mCoach Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` INNER JOIN `qualifications` ON `accounts`.id = `qualifications`.coach_id WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND ((`qualifications`.language_id = 98) AND ((max_unit > 0 and active = 1))) ORDER BY trim(full_name)[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 98 AND `qualifications`.`coach_id` = 122 LIMIT 1
Rendered substitution/_substitutions_alert.html.erb (0.9ms)
Completed 200 OK in 44ms (Views: 2.3ms | ActiveRecord: 221.8ms)
  [1m[36mSQL (43.8ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email397@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:24', NULL, NULL, '2015-01-13 08:23:24', 'CoachManager', NULL, 'vramanan', NULL, 0, NULL, 1, NULL, 'rs_email397@rosettastone.com', '1', NULL, '5402334456', 'vramanan', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 123
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'rajkumar', '2015-01-13 08:23:24', NULL, 123, '2015-01-13 08:23:24')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:24', '2015-01-13 08:23:24')
Saving a log entry on create for SupportLanguage record 66
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:24', NULL, 66, '2015-01-13 08:23:24')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 123 LIMIT 1[0m
  [1m[35mAccount Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:24', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:24', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'rajkumar', '5402334456', NULL, NULL, NULL, 'rajkumar')
Saving a log entry on create for Coach record 124
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'rajkumar', '2015-01-13 08:23:24', NULL, 124, '2015-01-13 08:23:24')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 124
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'ReflexLanguage', 'KLE', '2015-01-13 08:23:24', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:24')[0m
Saving a log entry on create for Language record 99
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'rajkumar', '2015-01-13 08:23:24', NULL, 99, '2015-01-13 08:23:24')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 99 AND (`qualifications`.coach_id = 124 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 99 LIMIT 1
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 124 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 124 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 124 and language_id = 99)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 124 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 124, 10, '2015-01-13 08:23:24', 99, '2015-01-13 08:23:24')[0m
Saving a log entry on create for Qualification record 99
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'rajkumar', '2015-01-13 08:23:24', NULL, 99, '2015-01-13 08:23:24')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 124 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`coach_showed_up`, `coach_id`, `session_end_time`, `cancellation_reason`, `updated_at`, `name`, `created_at`, `external_village_id`, `number_of_seats`, `appointment_type_id`, `recurring_schedule_id`, `session_status`, `reassigned`, `seconds_prior_to_session`, `language_id`, `attendance_count`, `topic_id`, `language_identifier`, `type`, `session_start_time`, `single_number_unit`, `eschool_session_id`, `cancelled`) VALUES (0, 124, '2015-01-13 09:30:00', NULL, '2015-01-13 08:23:24', NULL, '2015-01-13 08:23:24', NULL, 0, NULL, NULL, 1, NULL, NULL, 99, NULL, NULL, 'KLE', 'ConfirmedSession', '2015-01-13 09:00:00', 1, NULL, 0)[0m
Saving a log entry on create for ConfirmedSession record 35
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'CoachSession', '', 'rajkumar', '2015-01-13 08:23:24', NULL, 35, '2015-01-13 08:23:24')
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 35) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 124 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 124) AND ((max_unit > 0)))[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `unavailable_despite_templates` (`unavailability_type`, `approval_status`, `end_date`, `comments`, `coach_session_id`, `ancestry`, `updated_at`, `start_date`, `created_at`, `coach_id`) VALUES (1, 1, '2015-01-13 09:30:00', 'Auto Approved - Coach requested Substitute', 35, NULL, '2015-01-13 08:23:24', '2015-01-13 09:00:00', '2015-01-13 08:23:24', 124)
Saving a log entry on create for UnavailableDespiteTemplate record 19
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'UnavailableDespiteTemplate', '', 'rajkumar', '2015-01-13 08:23:24', NULL, 19, '2015-01-13 08:23:24')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 35 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`grabber_coach_id`, `lang_id`, `coach_id`, `coach_session_id`, `updated_at`, `was_reassigned`, `reason`, `created_at`, `cancelled`, `grabbed_at`, `session_type`, `grabbed`) VALUES (NULL, NULL, 124, 35, '2015-01-13 08:23:24', 0, NULL, '2015-01-13 08:23:24', 0, NULL, 'normal', 0)[0m
Saving a log entry on create for Substitution record 44
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Substitution', '', 'rajkumar', '2015-01-13 08:23:24', NULL, 44, '2015-01-13 08:23:24')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 35) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mUPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:23:24' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 35[0m
Saving a log entry on update for ConfirmedSession record 35
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'update', 'CoachSession', 'coach_id', 'rajkumar', '2015-01-13 08:23:24', 124, 35, '2015-01-13 08:23:24')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 99 OR identifier = 99) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoach Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '99')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 99 OR identifier = 99) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoachManager Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '99')[0m
  [1m[35mTriggerEvent Load (0.1ms)[0m  SELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1
  [1m[36mNotification Load (0.0ms)[0m  [1mSELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1[0m
  Processing by SubstitutionController#substitutions_alert as HTML
  [1m[35mPreferenceSetting Load (0.3ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 123) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 123) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `preference_settings` (`substitution_alerts_email_sending_schedule`, `substitution_alerts_sms`, `updated_at`, `no_of_home_announcements`, `substitution_policy_email_sending_schedule`, `no_of_calendar_notices_to_display`, `substitution_policy_email`, `notifications_display_time`, `no_of_home_events`, `notifications_email`, `no_of_home_substitutions`, `substitution_alerts_email_type`, `default_language_for_master_scheduler`, `calendar_notices_display_time`, `substitution_policy_email_type`, `no_of_substitution_alerts_to_display`, `substitution_alerts_email`, `timeoff_request_email`, `no_of_learner_dashboard_records`, `no_of_home_notifications`, `mails_sent`, `calendar_notices_email_sending_schedule`, `calendar_notices_email_type`, `daily_cap`, `calendar_notices_email`, `created_at`, `coach_not_present_alert`, `notifications_email_sending_schedule`, `account_id`, `start_page`, `substitution_alerts_display_time`, `no_of_notifications_to_display`, `notifications_email_type`, `session_alerts_display_time`, `timeoff_request_email_type`) VALUES ('IMMEDIATELY', NULL, '2015-01-13 08:23:24', 5, NULL, NULL, NULL, NULL, 5, NULL, 5, 'PER', NULL, NULL, NULL, 5, NULL, NULL, NULL, 5, 0, 'IMMEDIATELY', 'PER', NULL, NULL, '2015-01-13 08:23:24', NULL, 'IMMEDIATELY', 123, 'CM_MS', 86400, NULL, 'PER', NULL, NULL)[0m
Saving a log entry on create for PreferenceSetting record 17
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'PreferenceSetting', '', 'vramanan', '2015-01-13 08:23:24', NULL, 17, '2015-01-13 08:23:24')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mShownSubstitutions Load (0.2ms)[0m  SELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 123 LIMIT 1
  [1m[36mSubstitution Load (0.6ms)[0m  [1mSELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions) on (coach_sessions.id = substitutions.coach_session_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:23:24' and coach_sessions.session_end_time > '2015-01-13 08:23:24' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 35 LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 99 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 35)) LIMIT 1
  [1m[36mCmPreference Load (0.2ms)[0m  [1mSELECT `cm_preferences`.* FROM `cm_preferences` WHERE (`cm_preferences`.account_id = 123) LIMIT 1[0m
Rendered shared/_substitutions_alert.html.erb (1.1ms)
Completed 200 OK in 21ms (Views: 2.5ms | ActiveRecord: 57.8ms)
  [1m[35mSQL (48.1ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email389@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:24', NULL, NULL, '2015-01-13 08:23:24', 'CoachManager', NULL, 'vramanan', NULL, 0, NULL, 1, NULL, 'rs_email389@rosettastone.com', '1', NULL, '5402334456', 'vramanan', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)
Saving a log entry on create for Account record 125
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:24', NULL, 125, '2015-01-13 08:23:24')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:24', '2015-01-13 08:23:24')[0m
Saving a log entry on create for SupportLanguage record 67
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:24', NULL, 67, '2015-01-13 08:23:24')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 125 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`photo_content_type`, `address`, `bio`, `rs_email`, `skype_id`, `hire_date`, `aim_id`, `country`, `next_session_alert_in`, `last_logout`, `region_id`, `manager_id`, `photo_file_size`, `created_at`, `type`, `manager_notes`, `lotus_qualified`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `active`, `updated_at`, `mobile_phone`, `next_substitution_alert_in`, `other_languages`, `photo_file_name`, `sessions_allowed_per_week`, `is_supervisor`, `coach_guid`, `secondary_phone`, `full_name`, `primary_phone`, `birth_date`, `photo_file`, `personal_email`, `user_name`) VALUES (NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:23:24', 'Coach', NULL, 1, 'en-US', '1', '1', 'test', 1, '2015-01-13 08:23:24', NULL, 24, NULL, NULL, 8, 0, NULL, NULL, 'rajkumar', '5402334456', NULL, NULL, NULL, 'rajkumar')[0m
Saving a log entry on create for Coach record 126
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:24', NULL, 126, '2015-01-13 08:23:24')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 126
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`connection_type`, `type`, `identifier`, `updated_at`, `external_scheduler`, `duration`, `last_pushed_week`, `created_at`) VALUES (NULL, 'ReflexLanguage', 'KLE', '2015-01-13 08:23:24', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 08:23:24')
Saving a log entry on create for Language record 100
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Language', '', 'vramanan', '2015-01-13 08:23:24', NULL, 100, '2015-01-13 08:23:24')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 100 AND (`qualifications`.coach_id = 126 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 100 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 126 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 126 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 126 and language_id = 100)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 126 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`dialect_id`, `coach_id`, `max_unit`, `updated_at`, `language_id`, `created_at`) VALUES (NULL, 126, 10, '2015-01-13 08:23:24', 100, '2015-01-13 08:23:24')
Saving a log entry on create for Qualification record 100
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Qualification', '', 'vramanan', '2015-01-13 08:23:24', NULL, 100, '2015-01-13 08:23:24')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 126 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`coach_showed_up`, `coach_id`, `session_end_time`, `cancellation_reason`, `updated_at`, `name`, `created_at`, `external_village_id`, `number_of_seats`, `appointment_type_id`, `recurring_schedule_id`, `session_status`, `reassigned`, `seconds_prior_to_session`, `language_id`, `attendance_count`, `topic_id`, `language_identifier`, `type`, `session_start_time`, `single_number_unit`, `eschool_session_id`, `cancelled`) VALUES (0, 126, '2015-01-13 12:30:00', NULL, '2015-01-13 08:23:24', NULL, '2015-01-13 08:23:24', NULL, 0, NULL, NULL, 1, NULL, NULL, 100, NULL, NULL, 'KLE', 'ConfirmedSession', '2015-01-13 12:00:00', 1, NULL, 0)
Saving a log entry on create for ConfirmedSession record 36
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'CoachSession', '', 'vramanan', '2015-01-13 08:23:24', NULL, 36, '2015-01-13 08:23:24')[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 36) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 126 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 126) AND ((max_unit > 0)))
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`unavailability_type`, `approval_status`, `end_date`, `comments`, `coach_session_id`, `ancestry`, `updated_at`, `start_date`, `created_at`, `coach_id`) VALUES (1, 1, '2015-01-13 12:30:00', 'Auto Approved - Coach requested Substitute', 36, NULL, '2015-01-13 08:23:24', '2015-01-13 12:00:00', '2015-01-13 08:23:24', 126)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 20
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'UnavailableDespiteTemplate', '', 'vramanan', '2015-01-13 08:23:24', NULL, 20, '2015-01-13 08:23:24')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 36 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `substitutions` (`grabber_coach_id`, `lang_id`, `coach_id`, `coach_session_id`, `updated_at`, `was_reassigned`, `reason`, `created_at`, `cancelled`, `grabbed_at`, `session_type`, `grabbed`) VALUES (NULL, NULL, 126, 36, '2015-01-13 08:23:24', 0, NULL, '2015-01-13 08:23:24', 0, NULL, 'normal', 0)
Saving a log entry on create for Substitution record 45
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Substitution', '', 'vramanan', '2015-01-13 08:23:24', NULL, 45, '2015-01-13 08:23:24')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND id <> 36) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 08:23:24' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 36
Saving a log entry on update for ConfirmedSession record 36
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'update', 'CoachSession', 'coach_id', 'vramanan', '2015-01-13 08:23:24', 126, 36, '2015-01-13 08:23:24')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 100 OR identifier = 100) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoach Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '100')[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 100 OR identifier = 100) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoachManager Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '100')
  [1m[36mTriggerEvent Load (0.1ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1[0m
  [1m[35mNotification Load (0.0ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1
  Processing by SubstitutionController#substitutions_alert as HTML
  Parameters: {"closed"=>"false"}
  [1m[36mPreferenceSetting Load (0.3ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 125) LIMIT 1[0m
  [1m[35mPreferenceSetting Load (0.1ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 125) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `preference_settings` (`substitution_alerts_email_sending_schedule`, `substitution_alerts_sms`, `updated_at`, `no_of_home_announcements`, `substitution_policy_email_sending_schedule`, `no_of_calendar_notices_to_display`, `substitution_policy_email`, `notifications_display_time`, `no_of_home_events`, `notifications_email`, `no_of_home_substitutions`, `substitution_alerts_email_type`, `default_language_for_master_scheduler`, `calendar_notices_display_time`, `substitution_policy_email_type`, `no_of_substitution_alerts_to_display`, `substitution_alerts_email`, `timeoff_request_email`, `no_of_learner_dashboard_records`, `no_of_home_notifications`, `mails_sent`, `calendar_notices_email_sending_schedule`, `calendar_notices_email_type`, `daily_cap`, `calendar_notices_email`, `created_at`, `coach_not_present_alert`, `notifications_email_sending_schedule`, `account_id`, `start_page`, `substitution_alerts_display_time`, `no_of_notifications_to_display`, `notifications_email_type`, `session_alerts_display_time`, `timeoff_request_email_type`) VALUES ('IMMEDIATELY', NULL, '2015-01-13 08:23:24', 5, NULL, NULL, NULL, NULL, 5, NULL, 5, 'PER', NULL, NULL, NULL, 5, NULL, NULL, NULL, 5, 0, 'IMMEDIATELY', 'PER', NULL, NULL, '2015-01-13 08:23:24', NULL, 'IMMEDIATELY', 125, 'CM_MS', 86400, NULL, 'PER', NULL, NULL)
Saving a log entry on create for PreferenceSetting record 18
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'PreferenceSetting', '', 'vramanan', '2015-01-13 08:23:24', NULL, 18, '2015-01-13 08:23:24')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mShownSubstitutions Load (0.2ms)[0m  [1mSELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 125 LIMIT 1[0m
  [1m[35mSubstitution Load (0.6ms)[0m  SELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions) on (coach_sessions.id = substitutions.coach_session_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:23:24' and coach_sessions.session_end_time > '2015-01-13 08:23:24' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 36 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 100 LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 36)) LIMIT 1[0m
  [1m[35mCmPreference Load (0.2ms)[0m  SELECT `cm_preferences`.* FROM `cm_preferences` WHERE (`cm_preferences`.account_id = 125) LIMIT 1
Rendered shared/_substitutions_alert.html.erb (0.5ms)
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 62.1ms)
  [1m[36mSQL (36.1ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email114@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:24', NULL, NULL, '2015-01-13 08:23:24', 'CoachManager', NULL, 'test21', NULL, 0, NULL, 1, NULL, 'rs_email114@rosettastone.com', '1', NULL, '5402334456', 'test21', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 127
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:24', NULL, 127, '2015-01-13 08:23:24')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:23:24', '2015-01-13 08:23:24')
Saving a log entry on create for SupportLanguage record 68
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'SupportLanguage', '', NULL, '2015-01-13 08:23:24', NULL, 68, '2015-01-13 08:23:24')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 127 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test75') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'user_402@factory.com' and id != NULL)[0m
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `accounts` (`country`, `coach_guid`, `active`, `photo_file_name`, `primary_country_code`, `region_id`, `photo_file_size`, `sessions_allowed_per_week`, `photo_content_type`, `address`, `updated_at`, `personal_email`, `photo_file`, `created_at`, `type`, `manager_notes`, `full_name`, `manager_id`, `is_supervisor`, `next_session_alert_in`, `lotus_qualified`, `other_languages`, `rs_email`, `mobile_country_code`, `mobile_phone`, `primary_phone`, `user_name`, `hire_date`, `aim_id`, `secondary_phone`, `skype_id`, `next_substitution_alert_in`, `native_language`, `preferred_name`, `bio`, `birth_date`, `last_logout`) VALUES (NULL, NULL, 1, NULL, '1', NULL, NULL, 8, NULL, NULL, '2015-01-13 08:23:24', NULL, NULL, '2015-01-13 08:23:24', 'Coach', NULL, 'test', NULL, 0, NULL, 1, NULL, 'user_402@factory.com', '1', NULL, '5402334456', 'test75', NULL, NULL, NULL, NULL, 24, 'en-US', 'test', NULL, NULL, NULL)
Saving a log entry on create for Account record 128
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `loggable_type`, `attribute_name`, `changed_by`, `timestamp`, `previous_value`, `loggable_id`, `created_at`) VALUES (NULL, 'create', 'Account', '', 'vramanan', '2015-01-13 08:23:24', NULL, 128, '2015-01-13 08:23:24')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`eschool_session_id` = 1 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ESP' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (30.4ms)[0m  [1mROLLBACK[0m
[WARNING] Audit logging has been enabled for Account
[WARNING] Audit logging has been enabled for AddConsumableLog
[WARNING] Audit logging has been enabled for Announcement
[WARNING] Audit logging has been enabled for CoachSession
[WARNING] Audit logging has been enabled for Language
[WARNING] Audit logging has been enabled for CmPreference
  [1m[36mSQL (0.4ms)[0m  [1mSHOW TABLES[0m
[WARNING] Audit logging has been enabled for CoachAvailability
[WARNING] Audit logging has been enabled for CoachAvailabilityTemplate
[WARNING] Audit logging has been enabled for CoachRecurringSchedule
[WARNING] Audit logging has been enabled for DelayedJob
[WARNING] Audit logging has been enabled for Event
[WARNING] Audit logging has been enabled for ExcludedCoachesSession
[WARNING] Audit logging has been enabled for LanguageConfiguration
[WARNING] Audit logging has been enabled for LearnerSupportStatus
[WARNING] Audit logging has been enabled for Level
  [1m[35mLevel Load (0.1ms)[0m  SELECT `levels`.* FROM `levels`
[WARNING] Audit logging has been enabled for Link
[WARNING] Audit logging has been enabled for ManagementTeamMember
[WARNING] Audit logging has been enabled for MasterSchedulerBulkData
[WARNING] Audit logging has been enabled for MsDraftData
[WARNING] Audit logging has been enabled for MsErrorMessage
[WARNING] Audit logging has been enabled for Notification
[WARNING] Audit logging has been enabled for NotificationMessageDynamic
[WARNING] Audit logging has been enabled for NotificationRecipient
[WARNING] Audit logging has been enabled for PreferenceSetting
[WARNING] Audit logging has been enabled for Qualification
[WARNING] Audit logging has been enabled for RealTimeLotusData
[WARNING] Audit logging has been enabled for Region
[WARNING] Audit logging has been enabled for Resource
[WARNING] Audit logging has been enabled for RightsExtensionLog
[WARNING] Audit logging has been enabled for Role
[WARNING] Audit logging has been enabled for RolesTask
[WARNING] Audit logging has been enabled for SchedulerMetadata
[WARNING] Audit logging has been enabled for ShownSubstitutions
[WARNING] Audit logging has been enabled for Substitution
[WARNING] Audit logging has been enabled for SupportLanguage
[WARNING] Audit logging has been enabled for SupportWindow
[WARNING] Audit logging has been enabled for SystemNotification
[WARNING] Audit logging has been enabled for Task
[WARNING] Audit logging has been enabled for TaskTracer
[WARNING] Audit logging has been enabled for TempData
[WARNING] Audit logging has been enabled for TriggerEvent
[WARNING] Audit logging has been enabled for UnavailableDespiteTemplate
[WARNING] Audit logging has been enabled for UncapLearnerLog
[WARNING] Audit logging has been enabled for UserLanguage
[WARNING] Audit logging has been enabled for UserUpdateExecutionDetail
[WARNING] Audit logging has been enabled for UserVillage
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:21', 1, '5402334456', 'test', 'en-US', 24, NULL, 'rajkumar', NULL, '2015-01-13 08:31:21', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'rajkumar', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'rajkumar@rs.com')[0m
Saving a log entry on create for Coach record 129
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mSQL (0.5ms)[0m  describe `audit_log_records`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Account', 'create', NULL, '', NULL, '', 129)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 129
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.3ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mdescribe `support_languages`[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:21', '2015-01-13 08:31:21')
Saving a log entry on create for SupportLanguage record 69
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 69)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  describe `languages`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'ARA', NULL, '2015-01-13 08:31:21', NULL, '2015-01-13 08:31:21', 30)[0m
Saving a log entry on create for Language record 101
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Language', 'create', NULL, '', NULL, '', 101)
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 101 AND (`qualifications`.coach_id = 129 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 101 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 129 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 129 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 129 and language_id = 101)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 129 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mdescribe `qualifications`[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:21', 10, 129, NULL, 101, '2015-01-13 08:31:21')
Saving a log entry on create for Qualification record 101
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Qualification', 'create', NULL, '', NULL, '', 101)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions`[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 129 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mdescribe `coach_sessions`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`language_identifier`, `coach_showed_up`, `created_at`, `name`, `seconds_prior_to_session`, `single_number_unit`, `cancellation_reason`, `language_id`, `recurring_schedule_id`, `cancelled`, `session_status`, `type`, `reassigned`, `updated_at`, `eschool_session_id`, `number_of_seats`, `external_village_id`, `session_end_time`, `attendance_count`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`) VALUES ('ARA', 0, '2015-01-13 08:31:21', NULL, NULL, 1, NULL, 101, NULL, 0, 1, 'ConfirmedSession', NULL, '2015-01-13 08:31:21', 343, 0, NULL, '2015-01-13 09:30:00', NULL, NULL, NULL, 129, '2015-01-13 09:00:00')
Saving a log entry on create for ConfirmedSession record 37
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'CoachSession', 'create', NULL, '', NULL, '', 37)[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 37) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 37 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  describe `substitutions`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `updated_at`, `reason`, `lang_id`, `coach_session_id`, `was_reassigned`, `grabbed`, `coach_id`, `session_type`, `grabbed_at`, `grabber_coach_id`, `created_at`) VALUES (0, '2015-01-13 08:31:21', 'Electricity Outage', NULL, 37, NULL, 0, 129, 'normal', NULL, NULL, '2015-01-13 08:31:21')[0m
Saving a log entry on create for Substitution record 46
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'create', NULL, '', NULL, '', 46)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email568@rosettastone.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'vramanan', 'rs_email568@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:21', NULL, NULL, NULL, NULL, NULL, NULL, 'vramanan', '2015-01-13 08:31:21', '1', NULL, 'CoachManager', 0, NULL)[0m
Saving a log entry on create for Account record 130
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Account', 'create', NULL, '', NULL, '', 130)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 130 LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'AUS' OR identifier = 'AUS') ORDER BY languages.id DESC LIMIT 1[0m
  Processing by SubstitutionController#assign_substitute_for_coach as HTML
  Parameters: {"coach_session_id"=>37, "coach_id"=>129, "assigned_coach"=>129}
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 129 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 37 LIMIT 1[0m
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 37) ORDER BY substitutions.id DESC LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 37 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `substitutions` SET `updated_at` = '2015-01-13 08:31:21', `was_reassigned` = 1, `grabbed` = 1, `grabbed_at` = '2015-01-13 08:31:21', `grabber_coach_id` = 129 WHERE `substitutions`.`id` = 46[0m
Saving a log entry on update for Substitution record 46
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'update', 1, 'vramanan', NULL, 'was_reassigned', 46)
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'update', 129, 'vramanan', NULL, 'grabber_coach_id', 46)[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'update', 1, 'vramanan', 0, 'grabbed', 46)
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'update', '2015-01-13 08:31:21', 'vramanan', NULL, 'grabbed_at', 46)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 129 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 37) ORDER BY updated_at DESC LIMIT 1[0m
Saving a log entry on update for ConfirmedSession record 37
  [1m[35mSessionMetadata Load (0.1ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 37) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 129 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mTriggerEvent Load (0.2ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'MANUALLY_REASSIGNED' LIMIT 1[0m
  [1m[35mNotification Load (0.1ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 11) LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 37 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 101 LIMIT 1
Completed 200 OK in 48ms (Views: 15.7ms | ActiveRecord: 82.9ms)
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'Check' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'Check') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'Check@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:21', 1, '5402334456', 'test', 'en-US', 24, NULL, 'Check', NULL, '2015-01-13 08:31:21', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'Check', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'Check@rs.com')[0m
Saving a log entry on create for Coach record 131
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Account', 'create', NULL, 'vramanan', NULL, '', 131)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 131
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'AUS' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'AUS') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'AriaLanguage', 'AUS', NULL, '2015-01-13 08:31:21', NULL, '2015-01-13 08:31:21', 30)
Saving a log entry on create for Language record 102
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Language', 'create', NULL, 'vramanan', NULL, '', 102)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 102 AND (`qualifications`.coach_id = 131 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 102 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 131 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 131 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 131 and language_id = 102)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 131 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:21', 10, 131, NULL, 102, '2015-01-13 08:31:21')
Saving a log entry on create for Qualification record 102
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 102)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 37 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `updated_at`, `reason`, `lang_id`, `coach_session_id`, `was_reassigned`, `grabbed`, `coach_id`, `session_type`, `grabbed_at`, `grabber_coach_id`, `created_at`) VALUES (0, '2015-01-13 08:31:21', NULL, NULL, 37, NULL, 1, 129, 'normal', NULL, 129, '2015-01-13 08:31:21')[0m
Saving a log entry on create for Substitution record 47
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'create', NULL, 'vramanan', NULL, '', 47)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#assign_substitute_for_coach as HTML
  Parameters: {"coach_session_id"=>37, "coach_id"=>129, "assigned_coach"=>129}
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 131 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 37 LIMIT 1[0m
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 37) ORDER BY substitutions.id DESC LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 37 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `updated_at`, `reason`, `lang_id`, `coach_session_id`, `was_reassigned`, `grabbed`, `coach_id`, `session_type`, `grabbed_at`, `grabber_coach_id`, `created_at`) VALUES (0, '2015-01-13 08:31:21', NULL, NULL, 37, 0, 0, 129, 'normal', NULL, NULL, '2015-01-13 08:31:21')[0m
Saving a log entry on create for Substitution record 48
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'create', NULL, 'vramanan', NULL, '', 48)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 101 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 129 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 129) AND ((max_unit > 0)))[0m
  [1m[35mSQL (0.5ms)[0m  describe `unavailable_despite_templates`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`updated_at`, `created_at`, `end_date`, `coach_id`, `coach_session_id`, `approval_status`, `unavailability_type`, `ancestry`, `comments`, `start_date`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', '2015-01-13 09:30:00', 129, 37, 1, 5, NULL, 'Auto Approved - Coach requested Substitute', '2015-01-13 09:00:00')[0m
Saving a log entry on create for UnavailableDespiteTemplate record 21
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'UnavailableDespiteTemplate', 'create', NULL, 'vramanan', NULL, '', 21)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `substitutions` SET `updated_at` = '2015-01-13 08:31:21', `was_reassigned` = 1, `grabbed` = 1, `grabbed_at` = '2015-01-13 08:31:21', `grabber_coach_id` = 131 WHERE `substitutions`.`id` = 48[0m
Saving a log entry on update for Substitution record 48
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'update', 1, 'vramanan', 0, 'was_reassigned', 48)
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'update', 131, 'vramanan', NULL, 'grabber_coach_id', 48)[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'update', 1, 'vramanan', 0, 'grabbed', 48)
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'update', '2015-01-13 08:31:21', 'vramanan', NULL, 'grabbed_at', 48)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 131 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 37) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `updated_at` = '2015-01-13 08:31:21', `coach_id` = 131 WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 37
Saving a log entry on update for ConfirmedSession record 37
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'CoachSession', 'update', 131, 'vramanan', 129, 'coach_id', 37)[0m
  [1m[35mSessionMetadata Load (0.1ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 37) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 131 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 37) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `reassigned` = 1, `updated_at` = '2015-01-13 08:31:21' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 37[0m
Saving a log entry on update for ConfirmedSession record 37
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'CoachSession', 'update', 1, 'vramanan', NULL, 'reassigned', 37)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 129 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  describe `system_notifications`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `system_notifications` (`updated_at`, `recipient_type`, `target_id`, `raw_message`, `recipient_id`, `created_at`, `notification_id`, `status`) VALUES ('2015-01-13 08:31:21', 'Account', NULL, 'You have been assigned a <b>Arabic</b> session on <b>January 13, 2015 04:00 AM</b>.', 131, '2015-01-13 08:31:21', NULL, 0)[0m
Saving a log entry on create for SystemNotification record 5
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'SystemNotification', 'create', NULL, 'vramanan', NULL, '', 5)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 37 LIMIT 1
  [1m[36mSubstitution Load (0.1ms)[0m  [1mSELECT `substitutions`.* FROM `substitutions` WHERE (coach_id = NULL and coach_session_id = 37 ) ORDER BY id desc LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 101 LIMIT 1
Completed 200 OK in 72ms (Views: 0.5ms | ActiveRecord: 11.9ms)
  [1m[36mSQL (41.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email827@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'vramanan', 'rs_email827@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:21', NULL, NULL, NULL, NULL, NULL, NULL, 'vramanan', '2015-01-13 08:31:21', '1', NULL, 'CoachManager', 0, NULL)[0m
Saving a log entry on create for Account record 132
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Account', 'create', NULL, 'vramanan', NULL, '', 132)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:21', '2015-01-13 08:31:21')
Saving a log entry on create for SupportLanguage record 70
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 70)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 132 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:21', 1, '5402334456', 'test', 'en-US', 24, NULL, 'rajkumar', NULL, '2015-01-13 08:31:21', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'rajkumar', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'rajkumar@rs.com')
Saving a log entry on create for Coach record 133
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Account', 'create', NULL, 'vramanan', NULL, '', 133)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 133
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'ReflexLanguage', 'KLE', NULL, '2015-01-13 08:31:21', NULL, '2015-01-13 08:31:21', 30)[0m
Saving a log entry on create for Language record 103
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Language', 'create', NULL, 'vramanan', NULL, '', 103)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 103 AND (`qualifications`.coach_id = 133 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 103 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 133 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 133 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 133 and language_id = 103)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 133 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:21', 10, 133, NULL, 103, '2015-01-13 08:31:21')[0m
Saving a log entry on create for Qualification record 103
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 103)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`language_identifier`, `coach_showed_up`, `created_at`, `name`, `seconds_prior_to_session`, `single_number_unit`, `cancellation_reason`, `language_id`, `recurring_schedule_id`, `cancelled`, `session_status`, `type`, `reassigned`, `updated_at`, `eschool_session_id`, `number_of_seats`, `external_village_id`, `session_end_time`, `attendance_count`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`) VALUES ('KLE', 0, '2015-01-13 08:31:21', NULL, NULL, 1, NULL, 103, NULL, 0, 1, 'ConfirmedSession', NULL, '2015-01-13 08:31:21', 345698, 0, NULL, '2015-01-13 10:30:00', NULL, NULL, NULL, 18, '2015-01-13 10:00:00')[0m
Saving a log entry on create for ConfirmedSession record 38
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'CoachSession', 'create', NULL, 'vramanan', NULL, '', 38)
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 38) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 38 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `updated_at`, `reason`, `lang_id`, `coach_session_id`, `was_reassigned`, `grabbed`, `coach_id`, `session_type`, `grabbed_at`, `grabber_coach_id`, `created_at`) VALUES (0, '2015-01-13 08:31:21', 'Electricity Outage', NULL, 38, NULL, 0, 133, 'normal', NULL, NULL, '2015-01-13 08:31:21')[0m
Saving a log entry on create for Substitution record 49
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'create', NULL, 'vramanan', NULL, '', 49)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#cancel_substitution as HTML
  Parameters: {"notice"=>true, "sub_id"=>49, "reason"=>"Electricity Outage"}
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE `substitutions`.`id` = 49 LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 38 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 103 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `substitutions` SET `cancelled` = 1, `updated_at` = '2015-01-13 08:31:21' WHERE `substitutions`.`id` = 49
Saving a log entry on update for Substitution record 49
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'update', 1, 'vramanan', 0, 'cancelled', 49)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 133 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `cancellation_reason` = 'Electricity Outage', `updated_at` = '2015-01-13 08:31:21' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 38[0m
Saving a log entry on update for ConfirmedSession record 38
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'CoachSession', 'update', 'Electricity Outage', 'vramanan', NULL, 'cancellation_reason', 38)
  [1m[36mSessionMetadata Load (0.1ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 38) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 18ms (Views: 2.2ms | ActiveRecord: 51.5ms)
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'Ven' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'Ven') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'Ven@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:21', 1, '5402334456', 'test', 'en-US', 24, NULL, 'Ven', NULL, '2015-01-13 08:31:21', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'Ven', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'Ven@rs.com')[0m
Saving a log entry on create for Coach record 134
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Account', 'create', NULL, 'vramanan', NULL, '', 134)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 134
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'ARA', NULL, '2015-01-13 08:31:21', NULL, '2015-01-13 08:31:21', 30)
Saving a log entry on create for Language record 104
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Language', 'create', NULL, 'vramanan', NULL, '', 104)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 104 AND (`qualifications`.coach_id = 134 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 104 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 134 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 134 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 134 and language_id = 104)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 134 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:21', 10, 134, NULL, 104, '2015-01-13 08:31:21')
Saving a log entry on create for Qualification record 104
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 104)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 134 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`language_identifier`, `coach_showed_up`, `created_at`, `name`, `seconds_prior_to_session`, `single_number_unit`, `cancellation_reason`, `language_id`, `recurring_schedule_id`, `cancelled`, `session_status`, `type`, `reassigned`, `updated_at`, `eschool_session_id`, `number_of_seats`, `external_village_id`, `session_end_time`, `attendance_count`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`) VALUES ('KLE', 0, '2015-01-13 08:31:21', NULL, NULL, 1, NULL, 103, NULL, 0, 1, 'ConfirmedSession', NULL, '2015-01-13 08:31:21', 989648, 0, NULL, '2015-01-13 10:30:00', NULL, NULL, NULL, 134, '2015-01-13 10:00:00')
Saving a log entry on create for ConfirmedSession record 39
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'CoachSession', 'create', NULL, 'vramanan', NULL, '', 39)[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 39) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 39 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`cancelled`, `updated_at`, `reason`, `lang_id`, `coach_session_id`, `was_reassigned`, `grabbed`, `coach_id`, `session_type`, `grabbed_at`, `grabber_coach_id`, `created_at`) VALUES (1, '2015-01-13 08:31:21', 'Electricity Outage', NULL, 39, NULL, 0, 133, 'normal', NULL, NULL, '2015-01-13 08:31:21')
Saving a log entry on create for Substitution record 50
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Substitution', 'create', NULL, 'vramanan', NULL, '', 50)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#cancel_substitution as HTML
  Parameters: {"notice"=>true, "sub_id"=>49, "reason"=>"Electricity Outage"}
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 989648 LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`eschool_session_id` = 989648 LIMIT 1
  [1m[36mSubstitution Load (0.2ms)[0m  [1mSELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 39) ORDER BY substitutions.id DESC LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 39 LIMIT 1
Completed 500 Internal Server Error in 5ms (Views: 0.4ms | ActiveRecord: 6.6ms)
  [1m[36mSQL (32.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:21', 1, '5402334456', 'test', 'en-US', 24, NULL, 'rajkumar', NULL, '2015-01-13 08:31:21', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'rajkumar', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'rajkumar@rs.com')[0m
Saving a log entry on create for Coach record 135
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Account', 'create', NULL, 'vramanan', NULL, '', 135)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 135
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:21', '2015-01-13 08:31:21')
Saving a log entry on create for SupportLanguage record 71
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 71)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'ReflexLanguage', 'KLE', NULL, '2015-01-13 08:31:21', NULL, '2015-01-13 08:31:21', 30)
Saving a log entry on create for Language record 105
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Language', 'create', NULL, 'vramanan', NULL, '', 105)[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.3ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 105 AND (`qualifications`.coach_id = 135 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 105 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 135 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 135 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 135 and language_id = 105)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 135 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:21', 10, 135, NULL, 105, '2015-01-13 08:31:21')
Saving a log entry on create for Qualification record 105
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 105)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 135
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 135
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `accounts` SET `updated_at` = '2015-01-13 08:31:21', `created_at` = '2015-01-12 08:31:21' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 135[0m
Saving a log entry on update for Coach record 135
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE (`qualifications`.coach_id = 135 AND (max_unit > 0))[0m
  [1m[35mSupportLanguage Load (0.1ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 135 LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions`
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`language_identifier`, `coach_showed_up`, `created_at`, `name`, `seconds_prior_to_session`, `single_number_unit`, `cancellation_reason`, `language_id`, `recurring_schedule_id`, `cancelled`, `session_status`, `type`, `reassigned`, `updated_at`, `eschool_session_id`, `number_of_seats`, `external_village_id`, `session_end_time`, `attendance_count`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`) VALUES ('KLE', 0, '2015-01-13 08:31:21', NULL, NULL, 1, NULL, 105, NULL, 0, 1, 'ConfirmedSession', NULL, '2015-01-13 08:31:21', 345698, 0, NULL, '2015-01-13 10:30:00', NULL, NULL, NULL, 18, '2015-01-13 10:00:00')
Saving a log entry on create for ConfirmedSession record 40
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:21', '2015-01-13 08:31:21', 'CoachSession', 'create', NULL, 'vramanan', NULL, '', 40)[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 40) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 40 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`cancelled`, `updated_at`, `reason`, `lang_id`, `coach_session_id`, `was_reassigned`, `grabbed`, `coach_id`, `session_type`, `grabbed_at`, `grabber_coach_id`, `created_at`) VALUES (0, '2015-01-13 08:31:21', NULL, NULL, 40, NULL, 0, 135, 'normal', NULL, NULL, '2015-01-13 08:31:21')
Saving a log entry on create for Substitution record 51
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'Substitution', 'create', NULL, 'vramanan', NULL, '', 51)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#check_sub_policy_violation as JS
  Parameters: {"coach_id"=>135, "start_time"=>Tue Jan 13 08:00:00 UTC 2015}
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 135 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.2ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 135) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 135) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mdescribe `preference_settings`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `preference_settings` (`updated_at`, `no_of_home_events`, `no_of_home_notifications`, `no_of_home_announcements`, `substitution_policy_email_sending_schedule`, `calendar_notices_email_type`, `no_of_substitution_alerts_to_display`, `timeoff_request_email`, `default_language_for_master_scheduler`, `daily_cap`, `coach_not_present_alert`, `calendar_notices_display_time`, `substitution_alerts_email_sending_schedule`, `session_alerts_display_time`, `substitution_policy_email_type`, `no_of_home_substitutions`, `notifications_email_sending_schedule`, `calendar_notices_email`, `substitution_alerts_display_time`, `notifications_display_time`, `no_of_calendar_notices_to_display`, `substitution_alerts_email`, `substitution_policy_email`, `created_at`, `calendar_notices_email_sending_schedule`, `substitution_alerts_email_type`, `account_id`, `substitution_alerts_sms`, `timeoff_request_email_type`, `notifications_email`, `no_of_learner_dashboard_records`, `no_of_notifications_to_display`, `notifications_email_type`, `start_page`, `mails_sent`) VALUES ('2015-01-13 08:31:22', 5, 5, 5, NULL, 'PER', 5, NULL, NULL, NULL, NULL, NULL, 'IMMEDIATELY', 10, NULL, 5, 'IMMEDIATELY', NULL, 86400, NULL, NULL, NULL, NULL, '2015-01-13 08:31:22', 'IMMEDIATELY', 'PER', 135, 1, NULL, NULL, NULL, NULL, 'PER', 'CALENDAR', 0)
Saving a log entry on create for PreferenceSetting record 19
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'PreferenceSetting', 'create', NULL, 'rajkumar', NULL, '', 19)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 135 AND session_start_time < '2015-01-13 08:41:22' AND session_start_time >= '2015-01-13 08:31:22' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 135 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 135 and session_start_time = '1970-01-17 10:45:36' and cancelled is false) LIMIT 1[0m
  [1m[35mSubstitution Load (0.8ms)[0m  Select DISTINCT * from substitutions s join coach_sessions c on s.coach_session_id = c.id join unavailable_despite_templates u where c.type NOT IN ('ExtraSession','Appointment') and s.coach_id = 135 and c.session_start_time >= '1970-01-01 05:00:00' and c.session_start_time < '1970-02-01 04:59:59' and u.coach_session_id = c.id and (s.coach_id != s.grabber_coach_id OR s.grabber_coach_id is null) and u.unavailability_type in (1,5) order by s.created_at, u.created_at desc;
Completed 200 OK in 61ms (Views: 24.2ms | ActiveRecord: 44.3ms)
  [1m[36mSQL (48.1ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email399@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'vramanan', 'rs_email399@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:22', NULL, NULL, NULL, NULL, NULL, NULL, 'vramanan', '2015-01-13 08:31:22', '1', NULL, 'CoachManager', 0, NULL)[0m
Saving a log entry on create for Account record 136
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'Account', 'create', NULL, 'rajkumar', NULL, '', 136)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:22', '2015-01-13 08:31:22')
Saving a log entry on create for SupportLanguage record 72
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 72)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 136 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:22', 1, '5402334456', 'test', 'en-US', 24, NULL, 'rajkumar', NULL, '2015-01-13 08:31:22', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'rajkumar', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'rajkumar@rs.com')
Saving a log entry on create for Coach record 137
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'Account', 'create', NULL, 'rajkumar', NULL, '', 137)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 137
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'ARA', NULL, '2015-01-13 08:31:22', NULL, '2015-01-13 08:31:22', 30)[0m
Saving a log entry on create for Language record 106
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'Language', 'create', NULL, 'rajkumar', NULL, '', 106)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 106 AND (`qualifications`.coach_id = 137 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 106 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 137 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 137 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 137 and language_id = 106)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 137 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:22', 10, 137, NULL, 106, '2015-01-13 08:31:22')[0m
Saving a log entry on create for Qualification record 106
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'Qualification', 'create', NULL, 'rajkumar', NULL, '', 106)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `coach_sessions` (`language_identifier`, `coach_showed_up`, `created_at`, `name`, `seconds_prior_to_session`, `single_number_unit`, `cancellation_reason`, `language_id`, `recurring_schedule_id`, `cancelled`, `session_status`, `type`, `reassigned`, `updated_at`, `eschool_session_id`, `number_of_seats`, `external_village_id`, `session_end_time`, `attendance_count`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`) VALUES ('ARA', 0, '2015-01-13 08:31:22', NULL, NULL, 1, NULL, 106, NULL, 0, 1, 'ConfirmedSession', NULL, '2015-01-13 08:31:22', 345698, 0, NULL, '2015-01-13 10:30:00', NULL, NULL, NULL, 18, '2015-01-13 10:00:00')[0m
Saving a log entry on create for ConfirmedSession record 41
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'CoachSession', 'create', NULL, 'rajkumar', NULL, '', 41)
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 41) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 41 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `updated_at`, `reason`, `lang_id`, `coach_session_id`, `was_reassigned`, `grabbed`, `coach_id`, `session_type`, `grabbed_at`, `grabber_coach_id`, `created_at`) VALUES (0, '2015-01-13 08:31:22', 'Electricity Outage', NULL, 41, NULL, 0, 137, 'normal', NULL, NULL, '2015-01-13 08:31:22')[0m
Saving a log entry on create for Substitution record 52
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'Substitution', 'create', NULL, 'rajkumar', NULL, '', 52)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#fetch_available_coaches as JS
  Parameters: {"sub_id"=>52, "fetch_reason"=>true}
  [1m[35mSubstitution Load (0.3ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE `substitutions`.`id` = 52 LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 41 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 106 LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 106 OR identifier = 106) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mCoach Load (0.8ms)[0m  SELECT coach.* FROM (SELECT a.*, q.max_unit FROM accounts a inner join qualifications q on a.id = q.coach_id where a.type = 'Coach'
 and a.active = 1 and q.language_id IN (106) and q.max_unit >= 0) as coach LEFT JOIN coach_sessions cs on coach.id = cs.coach_id
 and cs.cancelled = 0 and cs.session_start_time between '2015-01-13 09:59:00' and '2015-01-13 10:29:00' and cs.session_end_time > '2015-01-13 10:00:00' where cs.id IS NULL order by trim(coach.full_name)
  [1m[36mCoachRecurringSchedule Load (0.4ms)[0m  [1mSELECT coach_id,
 (CONCAT('2015-01-11 ' , start_time) + INTERVAL day_index DAY +
 INTERVAL (fn_GetZoneOffset(CONVERT_TZ('2015-01-13 10:00:00','GMT','EST')) - fn_GetZoneOffset(CONVERT_TZ(recurring_start_date,'GMT','EST'))) HOUR +
 INTERVAL (CASE WHEN hour(start_time) < fn_GetZoneOffset(CONVERT_TZ(recurring_start_date,'GMT','EST')) AND day_index = 0 THEN 7 ELSE 0 END) day) AS schedule_time
 FROM coach_recurring_schedules
 WHERE coach_id in (137) AND (recurring_end_date IS NULL OR recurring_end_date > '2015-01-13 10:00:00') AND recurring_start_date < '2015-01-13 10:00:00'
 having schedule_time = '2015-01-13 10:00:00';[0m
Mysql2::Error: FUNCTION coachportal_test.fn_GetZoneOffset does not exist: SELECT coach_id,
                (CONCAT('2015-01-11 ' , start_time) + INTERVAL day_index DAY +
                INTERVAL (fn_GetZoneOffset(CONVERT_TZ('2015-01-13 10:00:00','GMT','EST')) - fn_GetZoneOffset(CONVERT_TZ(recurring_start_date,'GMT','EST'))) HOUR +
                INTERVAL (CASE WHEN hour(start_time) < fn_GetZoneOffset(CONVERT_TZ(recurring_start_date,'GMT','EST')) AND day_index = 0 THEN 7 ELSE 0 END) day) AS schedule_time
              FROM coach_recurring_schedules
              WHERE coach_id in (137) AND (recurring_end_date IS NULL OR recurring_end_date > '2015-01-13 10:00:00') AND recurring_start_date < '2015-01-13 10:00:00'
              having schedule_time = '2015-01-13 10:00:00';
Completed 500 Internal Server Error in 9ms
  [1m[35mSQL (43.4ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email900@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'test21', 'rs_email900@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:22', NULL, NULL, NULL, NULL, NULL, NULL, 'test21', '2015-01-13 08:31:22', '1', NULL, 'Coach', 0, NULL)
Saving a log entry on create for Account record 138
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'Account', 'create', NULL, 'vramanan', NULL, '', 138)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `accounts` SET `created_at` = '2015-01-12 08:31:22', `updated_at` = '2015-01-13 08:31:22' WHERE `accounts`.`id` = 138
Saving a log entry on update for Account record 138
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'ARA', NULL, '2015-01-13 08:31:22', NULL, '2015-01-13 08:31:22', 30)[0m
Saving a log entry on create for Language record 107
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'Language', 'create', NULL, 'vramanan', NULL, '', 107)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 138 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 138 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 138 and language_id = 107)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 138 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:22', 10, 138, NULL, 107, '2015-01-13 08:31:22')[0m
Saving a log entry on create for Qualification record 107
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 107)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:22', '2015-01-13 08:31:22')
Saving a log entry on create for SupportLanguage record 73
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 73)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 138 LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `accounts` SET `updated_at` = '2015-01-13 08:31:22', `created_at` = '2015-01-13 08:31:22' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 138[0m
Saving a log entry on update for Coach record 138
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:22', 1, '5402334456', 'test', 'en-US', 24, NULL, 'rajkumar', NULL, '2015-01-13 08:31:22', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'rajkumar', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'rajkumar@rs.com')[0m
Saving a log entry on create for Coach record 139
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'Account', 'create', NULL, 'vramanan', NULL, '', 139)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 139
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'ReflexLanguage', 'KLE', NULL, '2015-01-13 08:31:22', NULL, '2015-01-13 08:31:22', 30)
Saving a log entry on create for Language record 108
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'Language', 'create', NULL, 'vramanan', NULL, '', 108)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 108 AND (`qualifications`.coach_id = 139 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 108 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 139 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 139 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 139 and language_id = 108)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 139 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:22', 10, 139, NULL, 108, '2015-01-13 08:31:22')
Saving a log entry on create for Qualification record 108
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:22', '2015-01-13 08:31:22', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 108)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions`[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'HEB' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (28.7ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email56@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'vramanan', 'rs_email56@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:23', NULL, NULL, NULL, NULL, NULL, NULL, 'vramanan', '2015-01-13 08:31:23', '1', NULL, 'CoachManager', 0, NULL)[0m
Saving a log entry on create for Account record 140
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Account', 'create', NULL, 'vramanan', NULL, '', 140)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:23', '2015-01-13 08:31:23')
Saving a log entry on create for SupportLanguage record 74
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 74)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 140 LIMIT 1[0m
  Processing by SubstitutionController#substitutions as HTML
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 140) AND ((max_unit is NULL)))
  [1m[36mSubstitution Load (0.6ms)[0m  [1mSELECT `substitutions`.`id` AS t0_r0, `substitutions`.`coach_id` AS t0_r1, `substitutions`.`grabber_coach_id` AS t0_r2, `substitutions`.`grabbed` AS t0_r3, `substitutions`.`lang_id` AS t0_r4, `substitutions`.`coach_session_id` AS t0_r5, `substitutions`.`created_at` AS t0_r6, `substitutions`.`updated_at` AS t0_r7, `substitutions`.`grabbed_at` AS t0_r8, `substitutions`.`cancelled` AS t0_r9, `substitutions`.`was_reassigned` AS t0_r10, `substitutions`.`session_type` AS t0_r11, `substitutions`.`reason` AS t0_r12, `coach_sessions`.`id` AS t1_r0, `coach_sessions`.`eschool_session_id` AS t1_r1, `coach_sessions`.`session_start_time` AS t1_r2, `coach_sessions`.`created_at` AS t1_r3, `coach_sessions`.`updated_at` AS t1_r4, `coach_sessions`.`cancelled` AS t1_r5, `coach_sessions`.`external_village_id` AS t1_r6, `coach_sessions`.`language_identifier` AS t1_r7, `coach_sessions`.`single_number_unit` AS t1_r8, `coach_sessions`.`number_of_seats` AS t1_r9, `coach_sessions`.`attendance_count` AS t1_r10, `coach_sessions`.`coach_showed_up` AS t1_r11, `coach_sessions`.`seconds_prior_to_session` AS t1_r12, `coach_sessions`.`recurring_schedule_id` AS t1_r13, `coach_sessions`.`coach_id` AS t1_r14, `coach_sessions`.`session_status` AS t1_r15, `coach_sessions`.`type` AS t1_r16, `coach_sessions`.`name` AS t1_r17, `coach_sessions`.`session_end_time` AS t1_r18, `coach_sessions`.`language_id` AS t1_r19, `coach_sessions`.`cancellation_reason` AS t1_r20, `coach_sessions`.`topic_id` AS t1_r21, `coach_sessions`.`reassigned` AS t1_r22, `coach_sessions`.`appointment_type_id` AS t1_r23, `accounts`.`id` AS t2_r0, `accounts`.`user_name` AS t2_r1, `accounts`.`full_name` AS t2_r2, `accounts`.`preferred_name` AS t2_r3, `accounts`.`rs_email` AS t2_r4, `accounts`.`personal_email` AS t2_r5, `accounts`.`skype_id` AS t2_r6, `accounts`.`primary_phone` AS t2_r7, `accounts`.`secondary_phone` AS t2_r8, `accounts`.`birth_date` AS t2_r9, `accounts`.`hire_date` AS t2_r10, `accounts`.`bio` AS t2_r11, `accounts`.`manager_notes` AS t2_r12, `accounts`.`active` AS t2_r13, `accounts`.`manager_id` AS t2_r14, `accounts`.`created_at` AS t2_r15, `accounts`.`updated_at` AS t2_r16, `accounts`.`type` AS t2_r17, `accounts`.`region_id` AS t2_r18, `accounts`.`next_session_alert_in` AS t2_r19, `accounts`.`last_logout` AS t2_r20, `accounts`.`country` AS t2_r21, `accounts`.`native_language` AS t2_r22, `accounts`.`other_languages` AS t2_r23, `accounts`.`address` AS t2_r24, `accounts`.`lotus_qualified` AS t2_r25, `accounts`.`next_substitution_alert_in` AS t2_r26, `accounts`.`mobile_phone` AS t2_r27, `accounts`.`sessions_allowed_per_week` AS t2_r28, `accounts`.`is_supervisor` AS t2_r29, `accounts`.`mobile_country_code` AS t2_r30, `accounts`.`aim_id` AS t2_r31, `accounts`.`primary_country_code` AS t2_r32, `accounts`.`photo_file_name` AS t2_r33, `accounts`.`photo_content_type` AS t2_r34, `accounts`.`photo_file_size` AS t2_r35, `accounts`.`photo_file` AS t2_r36, `accounts`.`coach_guid` AS t2_r37, `languages`.`id` AS t3_r0, `languages`.`identifier` AS t3_r1, `languages`.`created_at` AS t3_r2, `languages`.`updated_at` AS t3_r3, `languages`.`last_pushed_week` AS t3_r4, `languages`.`type` AS t3_r5, `languages`.`duration` AS t3_r6, `languages`.`connection_type` AS t3_r7, `languages`.`external_scheduler` AS t3_r8 FROM `substitutions` LEFT OUTER JOIN `coach_sessions` ON `coach_sessions`.`id` = `substitutions`.`coach_session_id` LEFT OUTER JOIN `accounts` ON `accounts`.`id` = `substitutions`.`coach_id` AND `accounts`.`type` = 'Coach' LEFT OUTER JOIN `coach_sessions` `languages_substitutions_join` ON `substitutions`.`coach_session_id` = `languages_substitutions_join`.`id` LEFT OUTER JOIN `languages` ON `languages`.`id` = `languages_substitutions_join`.`language_id` WHERE (coach_sessions.language_identifier IN (NULL) AND coach_sessions.session_start_time >= '2015-01-13 07:31:00' AND coach_sessions.session_start_time < '2015-01-20 08:00:00' AND substitutions.cancelled = 0 AND grabbed = 0) ORDER BY coach_sessions.session_start_time[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-NED-L' OR identifier = 'TMM-NED-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-NED-P' OR identifier = 'TMM-NED-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ENG-L' OR identifier = 'TMM-ENG-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ENG-P' OR identifier = 'TMM-ENG-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-FRA-L' OR identifier = 'TMM-FRA-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-FRA-P' OR identifier = 'TMM-FRA-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-MCH-L' OR identifier = 'TMM-MCH-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-DEU-L' OR identifier = 'TMM-DEU-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-DEU-P' OR identifier = 'TMM-DEU-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ITA-L' OR identifier = 'TMM-ITA-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ITA-P' OR identifier = 'TMM-ITA-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ESP-L' OR identifier = 'TMM-ESP-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ESP-P' OR identifier = 'TMM-ESP-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mAlert Load (0.1ms)[0m  [1mSELECT `alerts`.* FROM `alerts` WHERE (active = 1) ORDER BY alerts.id DESC LIMIT 1[0m
Rendered shared/_editor_authenticate.html.erb (4.2ms)
Rendered shared/_header.html.erb (6.7ms)
Rendered shared/_default_navigation.html.erb (13.5ms)
Rendered shared/_profile_links.html.erb (1.5ms)
Rendered shared/_body_content.html.erb (17.4ms)
Completed 200 OK in 65ms (Views: 44.8ms | ActiveRecord: 145.2ms)
  [1m[35mSQL (45.4ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email16@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'test21', 'rs_email16@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:23', NULL, NULL, NULL, NULL, NULL, NULL, 'test21', '2015-01-13 08:31:23', '1', NULL, 'CoachManager', 0, NULL)
Saving a log entry on create for Account record 141
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Account', 'create', NULL, 'vramanan', NULL, '', 141)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:23', '2015-01-13 08:31:23')[0m
Saving a log entry on create for SupportLanguage record 75
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 75)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 141 LIMIT 1
  [1m[36mLanguage Load (0.4ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'KLE' OR identifier = 'KLE') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:23', 1, '5402334456', 'test', 'en-US', 24, NULL, 'rajkumar', NULL, '2015-01-13 08:31:23', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'rajkumar', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'rajkumar@rs.com')
Saving a log entry on create for Coach record 142
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Account', 'create', NULL, 'vramanan', NULL, '', 142)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 142
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'ReflexLanguage', 'KLE', NULL, '2015-01-13 08:31:23', NULL, '2015-01-13 08:31:23', 30)[0m
Saving a log entry on create for Language record 109
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Language', 'create', NULL, 'vramanan', NULL, '', 109)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 109 AND (`qualifications`.coach_id = 142 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 109 LIMIT 1
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 142 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 142 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 142 and language_id = 109)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 142 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:23', 10, 142, NULL, 109, '2015-01-13 08:31:23')[0m
Saving a log entry on create for Qualification record 109
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 109)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 142 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`language_identifier`, `coach_showed_up`, `created_at`, `name`, `seconds_prior_to_session`, `single_number_unit`, `cancellation_reason`, `language_id`, `recurring_schedule_id`, `cancelled`, `session_status`, `type`, `reassigned`, `updated_at`, `eschool_session_id`, `number_of_seats`, `external_village_id`, `session_end_time`, `attendance_count`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`) VALUES ('KLE', 0, '2015-01-13 08:31:23', NULL, NULL, 1, NULL, 109, NULL, 0, 1, 'ConfirmedSession', NULL, '2015-01-13 08:31:23', NULL, 0, NULL, '2015-01-13 10:30:00', NULL, NULL, NULL, 142, '2015-01-13 10:00:00')[0m
Saving a log entry on create for ConfirmedSession record 42
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'CoachSession', 'create', NULL, 'vramanan', NULL, '', 42)
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 42) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 142 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 142) AND ((max_unit > 0)))[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `unavailable_despite_templates` (`updated_at`, `created_at`, `end_date`, `coach_id`, `coach_session_id`, `approval_status`, `unavailability_type`, `ancestry`, `comments`, `start_date`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', '2015-01-13 10:30:00', 142, 42, 1, 1, NULL, 'Auto Approved - Coach requested Substitute', '2015-01-13 10:00:00')
Saving a log entry on create for UnavailableDespiteTemplate record 22
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'UnavailableDespiteTemplate', 'create', NULL, 'vramanan', NULL, '', 22)[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 42 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `updated_at`, `reason`, `lang_id`, `coach_session_id`, `was_reassigned`, `grabbed`, `coach_id`, `session_type`, `grabbed_at`, `grabber_coach_id`, `created_at`) VALUES (0, '2015-01-13 08:31:23', NULL, NULL, 42, 0, 0, 142, 'normal', NULL, NULL, '2015-01-13 08:31:23')[0m
Saving a log entry on create for Substitution record 53
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Substitution', 'create', NULL, 'vramanan', NULL, '', 53)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00' AND id <> 42) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `updated_at` = '2015-01-13 08:31:23', `coach_id` = NULL WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 42[0m
Saving a log entry on update for ConfirmedSession record 42
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'CoachSession', 'update', NULL, 'vramanan', 142, 'coach_id', 42)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 109 OR identifier = 109) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoach Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '109')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 109 OR identifier = 109) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoachManager Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '109')[0m
  [1m[35mTriggerEvent Load (0.2ms)[0m  SELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1
  [1m[36mNotification Load (0.0ms)[0m  [1mSELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1[0m
  Processing by SubstitutionController#substitutions as HTML
Completed 500 Internal Server Error in 1ms
  [1m[35mSQL (47.8ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email228@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'vramanan', 'rs_email228@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:23', NULL, NULL, NULL, NULL, NULL, NULL, 'vramanan', '2015-01-13 08:31:23', '1', NULL, 'CoachManager', 0, NULL)
Saving a log entry on create for Account record 143
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Account', 'create', NULL, 'test21', NULL, '', 143)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:23', '2015-01-13 08:31:23')[0m
Saving a log entry on create for SupportLanguage record 76
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 76)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 143 LIMIT 1
  Processing by SubstitutionController#reason_for_sub_request as JS
Rendered shared/_show_reasons.html.erb (0.9ms)
Rendered substitution/_reason_for_sub_request.html.erb (3.2ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 107.6ms)
  [1m[36mSQL (27.2ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email960@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'vramanan', 'rs_email960@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:23', NULL, NULL, NULL, NULL, NULL, NULL, 'vramanan', '2015-01-13 08:31:23', '1', NULL, 'CoachManager', 0, NULL)[0m
Saving a log entry on create for Account record 144
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Account', 'create', NULL, 'vramanan', NULL, '', 144)
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:23', '2015-01-13 08:31:23')
Saving a log entry on create for SupportLanguage record 77
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 77)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 144 LIMIT 1[0m
  [1m[35mAccount Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:23', 1, '5402334456', 'test', 'en-US', 24, NULL, 'TestCoach', NULL, '2015-01-13 08:31:23', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'TestCoach', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'TestCoach@rs.com')
Saving a log entry on create for Coach record 145
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Account', 'create', NULL, 'vramanan', NULL, '', 145)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 145
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'ARA', NULL, '2015-01-13 08:31:23', NULL, '2015-01-13 08:31:23', 30)[0m
Saving a log entry on create for Language record 110
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Language', 'create', NULL, 'vramanan', NULL, '', 110)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 110 AND (`qualifications`.coach_id = 145 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 110 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 145 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 145 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 145 and language_id = 110)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 145 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:23', 10, 145, NULL, 110, '2015-01-13 08:31:23')[0m
Saving a log entry on create for Qualification record 110
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 110)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'CHI', NULL, '2015-01-13 08:31:23', NULL, '2015-01-13 08:31:23', 30)[0m
Saving a log entry on create for Language record 111
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Language', 'create', NULL, 'vramanan', NULL, '', 111)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 111 AND (`qualifications`.coach_id = 145 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 111 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 145 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 145 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 145 and language_id = 111)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 145 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:23', 10, 145, NULL, 111, '2015-01-13 08:31:23')[0m
Saving a log entry on create for Qualification record 111
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 111)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'ENG', NULL, '2015-01-13 08:31:23', NULL, '2015-01-13 08:31:23', 30)[0m
Saving a log entry on create for Language record 112
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Language', 'create', NULL, 'vramanan', NULL, '', 112)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 112 AND (`qualifications`.coach_id = 145 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 112 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 145 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 145 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 145 and language_id = 112)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 145 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:23', 10, 145, NULL, 112, '2015-01-13 08:31:23')[0m
Saving a log entry on create for Qualification record 112
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 112)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#request_substitute_for_coach as JS
  Parameters: {"lang_identifier"=>"ARA", "time"=>"2010-09-06 11:00:00", "current_coach_id"=>145}
  [1m[35mCoachSession Load (0.4ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 and coach_id = 145 and session_start_time = '2010-09-06 11:00:00') ORDER BY coach_sessions.id DESC LIMIT 1
Completed 500 Internal Server Error in 3ms (Views: 0.4ms | ActiveRecord: 38.9ms)
  [1m[36mSQL (41.1ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email540@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'vramanan', 'rs_email540@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:23', NULL, NULL, NULL, NULL, NULL, NULL, 'vramanan', '2015-01-13 08:31:23', '1', NULL, 'CoachManager', 0, NULL)[0m
Saving a log entry on create for Account record 146
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Account', 'create', NULL, 'vramanan', NULL, '', 146)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:23', '2015-01-13 08:31:23')
Saving a log entry on create for SupportLanguage record 78
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 78)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 146 LIMIT 1[0m
  [1m[35mAccount Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:23', 1, '5402334456', 'test', 'en-US', 24, NULL, 'TestCoach', NULL, '2015-01-13 08:31:23', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'TestCoach', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'TestCoach@rs.com')
Saving a log entry on create for Coach record 147
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Account', 'create', NULL, 'vramanan', NULL, '', 147)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 147
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'ARA', NULL, '2015-01-13 08:31:23', NULL, '2015-01-13 08:31:23', 30)[0m
Saving a log entry on create for Language record 113
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Language', 'create', NULL, 'vramanan', NULL, '', 113)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 113 AND (`qualifications`.coach_id = 147 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 113 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 147 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 147 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 147 and language_id = 113)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 147 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:23', 10, 147, NULL, 113, '2015-01-13 08:31:23')[0m
Saving a log entry on create for Qualification record 113
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 113)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'CHI', NULL, '2015-01-13 08:31:23', NULL, '2015-01-13 08:31:23', 30)[0m
Saving a log entry on create for Language record 114
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Language', 'create', NULL, 'vramanan', NULL, '', 114)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 114 AND (`qualifications`.coach_id = 147 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 114 LIMIT 1
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 147 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 147 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 147 and language_id = 114)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 147 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:23', 10, 147, NULL, 114, '2015-01-13 08:31:23')[0m
Saving a log entry on create for Qualification record 114
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 114)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'ENG', NULL, '2015-01-13 08:31:23', NULL, '2015-01-13 08:31:23', 30)[0m
Saving a log entry on create for Language record 115
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Language', 'create', NULL, 'vramanan', NULL, '', 115)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 115 AND (`qualifications`.coach_id = 147 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 115 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 147 LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 147 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 147 and language_id = 115)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 147 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:23', 10, 147, NULL, 115, '2015-01-13 08:31:23')[0m
Saving a log entry on create for Qualification record 115
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:23', '2015-01-13 08:31:23', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 115)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#request_substitute_for_coach as JS
  Parameters: {"lang_identifier"=>"ARA", "request_from"=>"dashboard", "time"=>"2010-09-06 11:00:00", "current_coach_id"=>147}
  [1m[35mCoachSession Load (0.4ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 and coach_id = 147 and session_start_time = '2010-09-06 11:00:00') ORDER BY coach_sessions.id DESC LIMIT 1
Completed 500 Internal Server Error in 3ms (Views: 0.4ms | ActiveRecord: 52.6ms)
  [1m[36mSQL (44.8ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email272@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'vramanan', 'rs_email272@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:24', NULL, NULL, NULL, NULL, NULL, NULL, 'vramanan', '2015-01-13 08:31:24', '1', NULL, 'CoachManager', 0, NULL)[0m
Saving a log entry on create for Account record 148
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Account', 'create', NULL, 'vramanan', NULL, '', 148)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:24', '2015-01-13 08:31:24')
Saving a log entry on create for SupportLanguage record 79
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 79)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 148 LIMIT 1[0m
  [1m[35mAccount Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:24', 1, '5402334456', 'test', 'en-US', 24, NULL, 'TestCoach', NULL, '2015-01-13 08:31:24', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'TestCoach', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'TestCoach@rs.com')
Saving a log entry on create for Coach record 149
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Account', 'create', NULL, 'vramanan', NULL, '', 149)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 149
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'ARA', NULL, '2015-01-13 08:31:24', NULL, '2015-01-13 08:31:24', 30)[0m
Saving a log entry on create for Language record 116
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Language', 'create', NULL, 'vramanan', NULL, '', 116)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 116 AND (`qualifications`.coach_id = 149 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 116 LIMIT 1
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 149 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 149 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 149 and language_id = 116)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 149 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:24', 10, 149, NULL, 116, '2015-01-13 08:31:24')[0m
Saving a log entry on create for Qualification record 116
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 116)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'CHI', NULL, '2015-01-13 08:31:24', NULL, '2015-01-13 08:31:24', 30)[0m
Saving a log entry on create for Language record 117
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Language', 'create', NULL, 'vramanan', NULL, '', 117)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 117 AND (`qualifications`.coach_id = 149 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 117 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 149 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 149 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 149 and language_id = 117)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 149 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:24', 10, 149, NULL, 117, '2015-01-13 08:31:24')[0m
Saving a log entry on create for Qualification record 117
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 117)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'ENG', NULL, '2015-01-13 08:31:24', NULL, '2015-01-13 08:31:24', 30)[0m
Saving a log entry on create for Language record 118
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Language', 'create', NULL, 'vramanan', NULL, '', 118)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 118 AND (`qualifications`.coach_id = 149 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 118 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 149 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 149 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 149 and language_id = 118)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 149 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:24', 10, 149, NULL, 118, '2015-01-13 08:31:24')[0m
Saving a log entry on create for Qualification record 118
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 118)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (40.3ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email928@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'vramanan', 'rs_email928@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:24', NULL, NULL, NULL, NULL, NULL, NULL, 'vramanan', '2015-01-13 08:31:24', '1', NULL, 'CoachManager', 0, NULL)[0m
Saving a log entry on create for Account record 150
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Account', 'create', NULL, 'vramanan', NULL, '', 150)
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:24', '2015-01-13 08:31:24')
Saving a log entry on create for SupportLanguage record 80
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 80)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 150 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:24', 1, '5402334456', 'test', 'en-US', 24, NULL, 'TestCoach', NULL, '2015-01-13 08:31:24', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'TestCoach', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'TestCoach@rs.com')
Saving a log entry on create for Coach record 151
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Account', 'create', NULL, 'vramanan', NULL, '', 151)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 151
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'ARA', NULL, '2015-01-13 08:31:24', NULL, '2015-01-13 08:31:24', 30)[0m
Saving a log entry on create for Language record 119
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Language', 'create', NULL, 'vramanan', NULL, '', 119)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 119 AND (`qualifications`.coach_id = 151 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 119 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 151 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 151 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 151 and language_id = 119)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 151 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:24', 10, 151, NULL, 119, '2015-01-13 08:31:24')[0m
Saving a log entry on create for Qualification record 119
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 119)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'CHI', NULL, '2015-01-13 08:31:24', NULL, '2015-01-13 08:31:24', 30)[0m
Saving a log entry on create for Language record 120
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Language', 'create', NULL, 'vramanan', NULL, '', 120)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 120 AND (`qualifications`.coach_id = 151 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 120 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 151 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 151 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 151 and language_id = 120)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 151 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:24', 10, 151, NULL, 120, '2015-01-13 08:31:24')[0m
Saving a log entry on create for Qualification record 120
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 120)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'TotaleLanguage', 'ENG', NULL, '2015-01-13 08:31:24', NULL, '2015-01-13 08:31:24', 30)[0m
Saving a log entry on create for Language record 121
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Language', 'create', NULL, 'vramanan', NULL, '', 121)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 121 AND (`qualifications`.coach_id = 151 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 121 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 151 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 151 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 151 and language_id = 121)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 151 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:24', 10, 151, NULL, 121, '2015-01-13 08:31:24')[0m
Saving a log entry on create for Qualification record 121
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 121)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (50.2ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email435@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'vramanan', 'rs_email435@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:24', NULL, NULL, NULL, NULL, NULL, NULL, 'vramanan', '2015-01-13 08:31:24', '1', NULL, 'CoachManager', 0, NULL)[0m
Saving a log entry on create for Account record 152
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Account', 'create', NULL, 'vramanan', NULL, '', 152)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:24', '2015-01-13 08:31:24')
Saving a log entry on create for SupportLanguage record 81
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 81)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 152 LIMIT 1[0m
  [1m[35mAccount Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:24', 1, '5402334456', 'test', 'en-US', 24, NULL, 'rajkumar', NULL, '2015-01-13 08:31:24', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'rajkumar', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'rajkumar@rs.com')
Saving a log entry on create for Coach record 153
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Account', 'create', NULL, 'vramanan', NULL, '', 153)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 153
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'ReflexLanguage', 'KLE', NULL, '2015-01-13 08:31:24', NULL, '2015-01-13 08:31:24', 30)[0m
Saving a log entry on create for Language record 122
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Language', 'create', NULL, 'vramanan', NULL, '', 122)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 122 AND (`qualifications`.coach_id = 153 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 122 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 153 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 153 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 153 and language_id = 122)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 153 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:24', 10, 153, NULL, 122, '2015-01-13 08:31:24')[0m
Saving a log entry on create for Qualification record 122
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 122)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'HEB' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (47.4ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:24', 1, '5402334456', 'test', 'en-US', 24, NULL, 'rajkumar', NULL, '2015-01-13 08:31:24', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'rajkumar', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'rajkumar@rs.com')[0m
Saving a log entry on create for Coach record 154
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Account', 'create', NULL, 'vramanan', NULL, '', 154)
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 154
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:24', '2015-01-13 08:31:24')
Saving a log entry on create for SupportLanguage record 82
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 82)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'ReflexLanguage', 'KLE', NULL, '2015-01-13 08:31:24', NULL, '2015-01-13 08:31:24', 30)
Saving a log entry on create for Language record 123
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Language', 'create', NULL, 'vramanan', NULL, '', 123)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 123 AND (`qualifications`.coach_id = 154 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 123 LIMIT 1[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 154 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 154 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 154 and language_id = 123)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 154 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:24', 10, 154, NULL, 123, '2015-01-13 08:31:24')
Saving a log entry on create for Qualification record 123
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 123)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 154
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 154
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `accounts` SET `updated_at` = '2015-01-13 08:31:24', `created_at` = '2015-01-12 08:31:24' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 154[0m
Saving a log entry on update for Coach record 154
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE (`qualifications`.coach_id = 154 AND (max_unit > 0))[0m
  [1m[35mSupportLanguage Load (0.1ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 154 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 154 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`language_identifier`, `coach_showed_up`, `created_at`, `name`, `seconds_prior_to_session`, `single_number_unit`, `cancellation_reason`, `language_id`, `recurring_schedule_id`, `cancelled`, `session_status`, `type`, `reassigned`, `updated_at`, `eschool_session_id`, `number_of_seats`, `external_village_id`, `session_end_time`, `attendance_count`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`) VALUES ('KLE', 0, '2015-01-13 08:31:24', NULL, NULL, 1, NULL, 123, NULL, 0, 1, 'ConfirmedSession', NULL, '2015-01-13 08:31:24', NULL, 0, NULL, '2015-01-13 12:30:00', NULL, NULL, NULL, 154, '2015-01-13 12:00:00')[0m
Saving a log entry on create for ConfirmedSession record 43
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'CoachSession', 'create', NULL, 'vramanan', NULL, '', 43)
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 43) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 154 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 154) AND ((max_unit > 0)))[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `unavailable_despite_templates` (`updated_at`, `created_at`, `end_date`, `coach_id`, `coach_session_id`, `approval_status`, `unavailability_type`, `ancestry`, `comments`, `start_date`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', '2015-01-13 12:30:00', 154, 43, 1, 1, NULL, 'Auto Approved - Coach requested Substitute', '2015-01-13 12:00:00')
Saving a log entry on create for UnavailableDespiteTemplate record 23
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'UnavailableDespiteTemplate', 'create', NULL, 'vramanan', NULL, '', 23)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 43 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `updated_at`, `reason`, `lang_id`, `coach_session_id`, `was_reassigned`, `grabbed`, `coach_id`, `session_type`, `grabbed_at`, `grabber_coach_id`, `created_at`) VALUES (0, '2015-01-13 08:31:24', NULL, NULL, 43, 0, 0, 154, 'normal', NULL, NULL, '2015-01-13 08:31:24')[0m
Saving a log entry on create for Substitution record 54
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Substitution', 'create', NULL, 'vramanan', NULL, '', 54)
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND id <> 43) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `updated_at` = '2015-01-13 08:31:24', `coach_id` = NULL WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 43[0m
Saving a log entry on update for ConfirmedSession record 43
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'CoachSession', 'update', NULL, 'vramanan', 154, 'coach_id', 43)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 123 OR identifier = 123) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoach Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '123')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 123 OR identifier = 123) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoachManager Load (0.6ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '123')[0m
  [1m[35mTriggerEvent Load (0.0ms)[0m  SELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1
  [1m[36mNotification Load (0.0ms)[0m  [1mSELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1[0m
  Processing by SubstitutionController#substitutions_alert as HTML
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 154 AND (max_unit > 0))
  [1m[36mPreferenceSetting Load (0.2ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 154) LIMIT 1[0m
  [1m[35mPreferenceSetting Load (0.1ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 154) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `preference_settings` (`updated_at`, `no_of_home_events`, `no_of_home_notifications`, `no_of_home_announcements`, `substitution_policy_email_sending_schedule`, `calendar_notices_email_type`, `no_of_substitution_alerts_to_display`, `timeoff_request_email`, `default_language_for_master_scheduler`, `daily_cap`, `coach_not_present_alert`, `calendar_notices_display_time`, `substitution_alerts_email_sending_schedule`, `session_alerts_display_time`, `substitution_policy_email_type`, `no_of_home_substitutions`, `notifications_email_sending_schedule`, `calendar_notices_email`, `substitution_alerts_display_time`, `notifications_display_time`, `no_of_calendar_notices_to_display`, `substitution_alerts_email`, `substitution_policy_email`, `created_at`, `calendar_notices_email_sending_schedule`, `substitution_alerts_email_type`, `account_id`, `substitution_alerts_sms`, `timeoff_request_email_type`, `notifications_email`, `no_of_learner_dashboard_records`, `no_of_notifications_to_display`, `notifications_email_type`, `start_page`, `mails_sent`) VALUES ('2015-01-13 08:31:24', 5, 5, 5, NULL, 'PER', 5, NULL, NULL, NULL, NULL, NULL, 'IMMEDIATELY', 10, NULL, 5, 'IMMEDIATELY', NULL, 86400, NULL, NULL, NULL, NULL, '2015-01-13 08:31:24', 'IMMEDIATELY', 'PER', 154, 1, NULL, NULL, NULL, NULL, 'PER', 'CALENDAR', 0)
Saving a log entry on create for PreferenceSetting record 20
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'PreferenceSetting', 'create', NULL, 'rajkumar', NULL, '', 20)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 154 AND session_start_time < '2015-01-13 08:41:24' AND session_start_time >= '2015-01-13 08:31:24' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mShownSubstitutions Load (0.1ms)[0m  SELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 154 LIMIT 1
  [1m[36mSubstitution Load (0.6ms)[0m  [1mSELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions, qualifications, languages) on (coach_sessions.id = substitutions.coach_session_id and languages.identifier = coach_sessions.language_identifier and languages.id = qualifications.language_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:31:24' and coach_sessions.session_end_time > '2015-01-13 08:31:24' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL and qualifications.coach_id = 154) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 43 LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 123 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 43)) LIMIT 1
  [1m[36mConfirmedSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 154 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 154 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00')
  [1m[36mLocalSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 154 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND action != 'create')[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 154) AND ((max_unit > 0)))
  [1m[36mCoachRecurringSchedule Load (0.2ms)[0m  [1mSELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 154 and day_index = 2 and start_time = '12:00:00' and recurring_start_date <= '2015-01-13 12:00:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 12:00:00')) ORDER BY recurring_start_date DESC LIMIT 1[0m
  [1m[35mCoachRecurringSchedule Load (0.2ms)[0m  SELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 154 and day_index = 2 and start_time = '11:00:00' and recurring_start_date <= '2015-01-13 11:00:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 11:00:00')) ORDER BY recurring_start_date DESC LIMIT 1
  [1m[36mCoachRecurringSchedule Load (0.2ms)[0m  [1mSELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 154 and day_index = 2 and start_time = '12:30:00' and recurring_start_date <= '2015-01-13 12:30:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 12:30:00')) ORDER BY recurring_start_date DESC LIMIT 1[0m
  [1m[35mCoachRecurringSchedule Load (0.2ms)[0m  SELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 154 and day_index = 2 and start_time = '11:30:00' and recurring_start_date <= '2015-01-13 11:30:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 11:30:00')) ORDER BY recurring_start_date DESC LIMIT 1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 154 AND language_id = 123) ORDER BY qualifications.id DESC LIMIT 1[0m
  [1m[35mCoach Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` INNER JOIN `qualifications` ON `accounts`.id = `qualifications`.coach_id WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND ((`qualifications`.language_id = 123) AND ((max_unit > 0 and active = 1))) ORDER BY trim(full_name)
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 123 AND `qualifications`.`coach_id` = 154 LIMIT 1[0m
Rendered substitution/_substitutions_alert.html.erb (0.9ms)
Completed 200 OK in 43ms (Views: 2.2ms | ActiveRecord: 227.7ms)
  [1m[35mSQL (42.3ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email538@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'vramanan', 'rs_email538@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:24', NULL, NULL, NULL, NULL, NULL, NULL, 'vramanan', '2015-01-13 08:31:24', '1', NULL, 'CoachManager', 0, NULL)
Saving a log entry on create for Account record 155
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Account', 'create', NULL, 'rajkumar', NULL, '', 155)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:24', '2015-01-13 08:31:24')[0m
Saving a log entry on create for SupportLanguage record 83
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 83)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 155 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:24', 1, '5402334456', 'test', 'en-US', 24, NULL, 'rajkumar', NULL, '2015-01-13 08:31:24', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'rajkumar', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'rajkumar@rs.com')[0m
Saving a log entry on create for Coach record 156
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Account', 'create', NULL, 'rajkumar', NULL, '', 156)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 156
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'ReflexLanguage', 'KLE', NULL, '2015-01-13 08:31:24', NULL, '2015-01-13 08:31:24', 30)
Saving a log entry on create for Language record 124
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Language', 'create', NULL, 'rajkumar', NULL, '', 124)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 124 AND (`qualifications`.coach_id = 156 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 124 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 156 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 156 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 156 and language_id = 124)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 156 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:24', 10, 156, NULL, 124, '2015-01-13 08:31:24')
Saving a log entry on create for Qualification record 124
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Qualification', 'create', NULL, 'rajkumar', NULL, '', 124)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 156 AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`language_identifier`, `coach_showed_up`, `created_at`, `name`, `seconds_prior_to_session`, `single_number_unit`, `cancellation_reason`, `language_id`, `recurring_schedule_id`, `cancelled`, `session_status`, `type`, `reassigned`, `updated_at`, `eschool_session_id`, `number_of_seats`, `external_village_id`, `session_end_time`, `attendance_count`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`) VALUES ('KLE', 0, '2015-01-13 08:31:24', NULL, NULL, 1, NULL, 124, NULL, 0, 1, 'ConfirmedSession', NULL, '2015-01-13 08:31:24', NULL, 0, NULL, '2015-01-13 09:30:00', NULL, NULL, NULL, 156, '2015-01-13 09:00:00')
Saving a log entry on create for ConfirmedSession record 44
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'CoachSession', 'create', NULL, 'rajkumar', NULL, '', 44)[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 44) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 156 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 156) AND ((max_unit > 0)))
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`updated_at`, `created_at`, `end_date`, `coach_id`, `coach_session_id`, `approval_status`, `unavailability_type`, `ancestry`, `comments`, `start_date`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', '2015-01-13 09:30:00', 156, 44, 1, 1, NULL, 'Auto Approved - Coach requested Substitute', '2015-01-13 09:00:00')[0m
Saving a log entry on create for UnavailableDespiteTemplate record 24
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'UnavailableDespiteTemplate', 'create', NULL, 'rajkumar', NULL, '', 24)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 44 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`cancelled`, `updated_at`, `reason`, `lang_id`, `coach_session_id`, `was_reassigned`, `grabbed`, `coach_id`, `session_type`, `grabbed_at`, `grabber_coach_id`, `created_at`) VALUES (0, '2015-01-13 08:31:24', NULL, NULL, 44, 0, 0, 156, 'normal', NULL, NULL, '2015-01-13 08:31:24')
Saving a log entry on create for Substitution record 55
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'Substitution', 'create', NULL, 'rajkumar', NULL, '', 55)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 09:00:00' AND session_start_time < '2015-01-13 09:30:00' AND id <> 44) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.3ms)[0m  UPDATE `coach_sessions` SET `updated_at` = '2015-01-13 08:31:24', `coach_id` = NULL WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 44
Saving a log entry on update for ConfirmedSession record 44
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:24', '2015-01-13 08:31:24', 'CoachSession', 'update', NULL, 'rajkumar', 156, 'coach_id', 44)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 124 OR identifier = 124) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoach Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '124')[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 124 OR identifier = 124) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.1ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoachManager Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '124')
  [1m[36mTriggerEvent Load (0.0ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1[0m
  [1m[35mNotification Load (0.0ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1
  Processing by SubstitutionController#substitutions_alert as HTML
  [1m[36mPreferenceSetting Load (0.3ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 155) LIMIT 1[0m
  [1m[35mPreferenceSetting Load (0.1ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 155) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `preference_settings` (`updated_at`, `no_of_home_events`, `no_of_home_notifications`, `no_of_home_announcements`, `substitution_policy_email_sending_schedule`, `calendar_notices_email_type`, `no_of_substitution_alerts_to_display`, `timeoff_request_email`, `default_language_for_master_scheduler`, `daily_cap`, `coach_not_present_alert`, `calendar_notices_display_time`, `substitution_alerts_email_sending_schedule`, `session_alerts_display_time`, `substitution_policy_email_type`, `no_of_home_substitutions`, `notifications_email_sending_schedule`, `calendar_notices_email`, `substitution_alerts_display_time`, `notifications_display_time`, `no_of_calendar_notices_to_display`, `substitution_alerts_email`, `substitution_policy_email`, `created_at`, `calendar_notices_email_sending_schedule`, `substitution_alerts_email_type`, `account_id`, `substitution_alerts_sms`, `timeoff_request_email_type`, `notifications_email`, `no_of_learner_dashboard_records`, `no_of_notifications_to_display`, `notifications_email_type`, `start_page`, `mails_sent`) VALUES ('2015-01-13 08:31:25', 5, 5, 5, NULL, 'PER', 5, NULL, NULL, NULL, NULL, NULL, 'IMMEDIATELY', NULL, NULL, 5, 'IMMEDIATELY', NULL, 86400, NULL, NULL, NULL, NULL, '2015-01-13 08:31:25', 'IMMEDIATELY', 'PER', 155, NULL, NULL, NULL, NULL, NULL, 'PER', 'CM_MS', 0)
Saving a log entry on create for PreferenceSetting record 21
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'PreferenceSetting', 'create', NULL, 'vramanan', NULL, '', 21)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mShownSubstitutions Load (0.2ms)[0m  [1mSELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 155 LIMIT 1[0m
  [1m[35mSubstitution Load (0.6ms)[0m  SELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions) on (coach_sessions.id = substitutions.coach_session_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:31:25' and coach_sessions.session_end_time > '2015-01-13 08:31:25' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 44 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 124 LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 44)) LIMIT 1[0m
  [1m[35mCmPreference Load (0.2ms)[0m  SELECT `cm_preferences`.* FROM `cm_preferences` WHERE (`cm_preferences`.account_id = 155) LIMIT 1
Rendered shared/_substitutions_alert.html.erb (1.1ms)
Completed 200 OK in 20ms (Views: 2.5ms | ActiveRecord: 56.7ms)
  [1m[36mSQL (67.5ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email690@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'vramanan', 'rs_email690@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:25', NULL, NULL, NULL, NULL, NULL, NULL, 'vramanan', '2015-01-13 08:31:25', '1', NULL, 'CoachManager', 0, NULL)[0m
Saving a log entry on create for Account record 157
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'Account', 'create', NULL, 'vramanan', NULL, '', 157)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:25', '2015-01-13 08:31:25')
Saving a log entry on create for SupportLanguage record 84
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 84)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 157 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`manager_id`, `next_session_alert_in`, `birth_date`, `manager_notes`, `region_id`, `country`, `last_logout`, `skype_id`, `updated_at`, `active`, `primary_phone`, `preferred_name`, `native_language`, `next_substitution_alert_in`, `photo_file_name`, `user_name`, `personal_email`, `created_at`, `address`, `photo_file`, `secondary_phone`, `coach_guid`, `bio`, `photo_file_size`, `other_languages`, `lotus_qualified`, `full_name`, `hire_date`, `aim_id`, `sessions_allowed_per_week`, `type`, `is_supervisor`, `mobile_country_code`, `mobile_phone`, `photo_content_type`, `primary_country_code`, `rs_email`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:25', 1, '5402334456', 'test', 'en-US', 24, NULL, 'rajkumar', NULL, '2015-01-13 08:31:25', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1, 'rajkumar', NULL, NULL, 8, 'Coach', 0, '1', NULL, NULL, '1', 'rajkumar@rs.com')
Saving a log entry on create for Coach record 158
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'Account', 'create', NULL, 'vramanan', NULL, '', 158)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 158
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`last_pushed_week`, `type`, `identifier`, `external_scheduler`, `updated_at`, `connection_type`, `created_at`, `duration`) VALUES ('2011-10-27 23:22:54', 'ReflexLanguage', 'KLE', NULL, '2015-01-13 08:31:25', NULL, '2015-01-13 08:31:25', 30)[0m
Saving a log entry on create for Language record 125
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'Language', 'create', NULL, 'vramanan', NULL, '', 125)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 125 AND (`qualifications`.coach_id = 158 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 125 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 158 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 158 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 158 and language_id = 125)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 158 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `max_unit`, `coach_id`, `dialect_id`, `language_id`, `created_at`) VALUES ('2015-01-13 08:31:25', 10, 158, NULL, 125, '2015-01-13 08:31:25')[0m
Saving a log entry on create for Qualification record 125
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'Qualification', 'create', NULL, 'vramanan', NULL, '', 125)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.4ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 158 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`language_identifier`, `coach_showed_up`, `created_at`, `name`, `seconds_prior_to_session`, `single_number_unit`, `cancellation_reason`, `language_id`, `recurring_schedule_id`, `cancelled`, `session_status`, `type`, `reassigned`, `updated_at`, `eschool_session_id`, `number_of_seats`, `external_village_id`, `session_end_time`, `attendance_count`, `topic_id`, `appointment_type_id`, `coach_id`, `session_start_time`) VALUES ('KLE', 0, '2015-01-13 08:31:25', NULL, NULL, 1, NULL, 125, NULL, 0, 1, 'ConfirmedSession', NULL, '2015-01-13 08:31:25', NULL, 0, NULL, '2015-01-13 12:30:00', NULL, NULL, NULL, 158, '2015-01-13 12:00:00')[0m
Saving a log entry on create for ConfirmedSession record 45
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'CoachSession', 'create', NULL, 'vramanan', NULL, '', 45)
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 45) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 158 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 158) AND ((max_unit > 0)))[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `unavailable_despite_templates` (`updated_at`, `created_at`, `end_date`, `coach_id`, `coach_session_id`, `approval_status`, `unavailability_type`, `ancestry`, `comments`, `start_date`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', '2015-01-13 12:30:00', 158, 45, 1, 1, NULL, 'Auto Approved - Coach requested Substitute', '2015-01-13 12:00:00')
Saving a log entry on create for UnavailableDespiteTemplate record 25
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'UnavailableDespiteTemplate', 'create', NULL, 'vramanan', NULL, '', 25)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 45 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`cancelled`, `updated_at`, `reason`, `lang_id`, `coach_session_id`, `was_reassigned`, `grabbed`, `coach_id`, `session_type`, `grabbed_at`, `grabber_coach_id`, `created_at`) VALUES (0, '2015-01-13 08:31:25', NULL, NULL, 45, 0, 0, 158, 'normal', NULL, NULL, '2015-01-13 08:31:25')[0m
Saving a log entry on create for Substitution record 56
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'Substitution', 'create', NULL, 'vramanan', NULL, '', 56)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND id <> 45) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `updated_at` = '2015-01-13 08:31:25', `coach_id` = NULL WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 45[0m
Saving a log entry on update for ConfirmedSession record 45
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'CoachSession', 'update', NULL, 'vramanan', 158, 'coach_id', 45)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 125 OR identifier = 125) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.1ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoach Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '125')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 125 OR identifier = 125) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoachManager Load (0.6ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '125')[0m
  [1m[35mTriggerEvent Load (0.1ms)[0m  SELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1
  [1m[36mNotification Load (0.0ms)[0m  [1mSELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1[0m
  Processing by SubstitutionController#substitutions_alert as HTML
  Parameters: {"closed"=>"false"}
  [1m[35mPreferenceSetting Load (0.3ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 157) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 157) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `preference_settings` (`updated_at`, `no_of_home_events`, `no_of_home_notifications`, `no_of_home_announcements`, `substitution_policy_email_sending_schedule`, `calendar_notices_email_type`, `no_of_substitution_alerts_to_display`, `timeoff_request_email`, `default_language_for_master_scheduler`, `daily_cap`, `coach_not_present_alert`, `calendar_notices_display_time`, `substitution_alerts_email_sending_schedule`, `session_alerts_display_time`, `substitution_policy_email_type`, `no_of_home_substitutions`, `notifications_email_sending_schedule`, `calendar_notices_email`, `substitution_alerts_display_time`, `notifications_display_time`, `no_of_calendar_notices_to_display`, `substitution_alerts_email`, `substitution_policy_email`, `created_at`, `calendar_notices_email_sending_schedule`, `substitution_alerts_email_type`, `account_id`, `substitution_alerts_sms`, `timeoff_request_email_type`, `notifications_email`, `no_of_learner_dashboard_records`, `no_of_notifications_to_display`, `notifications_email_type`, `start_page`, `mails_sent`) VALUES ('2015-01-13 08:31:25', 5, 5, 5, NULL, 'PER', 5, NULL, NULL, NULL, NULL, NULL, 'IMMEDIATELY', NULL, NULL, 5, 'IMMEDIATELY', NULL, 86400, NULL, NULL, NULL, NULL, '2015-01-13 08:31:25', 'IMMEDIATELY', 'PER', 157, NULL, NULL, NULL, NULL, NULL, 'PER', 'CM_MS', 0)[0m
Saving a log entry on create for PreferenceSetting record 22
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'PreferenceSetting', 'create', NULL, 'vramanan', NULL, '', 22)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mShownSubstitutions Load (0.2ms)[0m  SELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 157 LIMIT 1
  [1m[36mSubstitution Load (0.6ms)[0m  [1mSELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions) on (coach_sessions.id = substitutions.coach_session_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 08:00:00' and coach_sessions.session_start_time <= '2015-01-14 08:31:25' and coach_sessions.session_end_time > '2015-01-13 08:31:25' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 45 LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 125 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 45)) LIMIT 1
  [1m[36mCmPreference Load (0.2ms)[0m  [1mSELECT `cm_preferences`.* FROM `cm_preferences` WHERE (`cm_preferences`.account_id = 157) LIMIT 1[0m
Rendered shared/_substitutions_alert.html.erb (0.5ms)
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 81.4ms)
  [1m[35mSQL (38.1ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email88@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'test21', 'rs_email88@rosettastone.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:25', NULL, NULL, NULL, NULL, NULL, NULL, 'test21', '2015-01-13 08:31:25', '1', NULL, 'CoachManager', 0, NULL)
Saving a log entry on create for Account record 159
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'Account', 'create', NULL, 'vramanan', NULL, '', 159)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `language_code`, `updated_at`, `created_at`) VALUES ('English', 'en-US', '2015-01-13 08:31:25', '2015-01-13 08:31:25')[0m
Saving a log entry on create for SupportLanguage record 85
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'SupportLanguage', 'create', NULL, NULL, NULL, '', 85)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 159 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test447') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'user_813@factory.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`preferred_name`, `lotus_qualified`, `photo_file_name`, `sessions_allowed_per_week`, `primary_phone`, `photo_file`, `native_language`, `full_name`, `rs_email`, `mobile_country_code`, `photo_content_type`, `next_substitution_alert_in`, `country`, `address`, `hire_date`, `birth_date`, `other_languages`, `active`, `coach_guid`, `region_id`, `skype_id`, `secondary_phone`, `mobile_phone`, `created_at`, `next_session_alert_in`, `last_logout`, `manager_notes`, `aim_id`, `bio`, `personal_email`, `user_name`, `updated_at`, `primary_country_code`, `photo_file_size`, `type`, `is_supervisor`, `manager_id`) VALUES ('test', 1, NULL, 8, '5402334456', NULL, 'en-US', 'test', 'user_813@factory.com', '1', NULL, 24, NULL, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, NULL, '2015-01-13 08:31:25', NULL, NULL, NULL, NULL, NULL, NULL, 'test447', '2015-01-13 08:31:25', '1', NULL, 'Coach', 0, NULL)[0m
Saving a log entry on create for Account record 160
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`timestamp`, `created_at`, `loggable_type`, `action`, `new_value`, `changed_by`, `previous_value`, `attribute_name`, `loggable_id`) VALUES ('2015-01-13 08:31:25', '2015-01-13 08:31:25', 'Account', 'create', NULL, 'vramanan', NULL, '', 160)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`eschool_session_id` = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ESP' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (31.4ms)[0m  ROLLBACK
[WARNING] Audit logging has been enabled for Account
[WARNING] Audit logging has been enabled for AddConsumableLog
[WARNING] Audit logging has been enabled for Announcement
[WARNING] Audit logging has been enabled for CoachSession
[WARNING] Audit logging has been enabled for Language
[WARNING] Audit logging has been enabled for CmPreference
  [1m[36mSQL (0.4ms)[0m  [1mSHOW TABLES[0m
[WARNING] Audit logging has been enabled for CoachAvailability
[WARNING] Audit logging has been enabled for CoachAvailabilityTemplate
[WARNING] Audit logging has been enabled for CoachRecurringSchedule
[WARNING] Audit logging has been enabled for DelayedJob
[WARNING] Audit logging has been enabled for Event
[WARNING] Audit logging has been enabled for ExcludedCoachesSession
[WARNING] Audit logging has been enabled for LanguageConfiguration
[WARNING] Audit logging has been enabled for LearnerSupportStatus
[WARNING] Audit logging has been enabled for Level
  [1m[35mLevel Load (0.1ms)[0m  SELECT `levels`.* FROM `levels`
[WARNING] Audit logging has been enabled for Link
[WARNING] Audit logging has been enabled for ManagementTeamMember
[WARNING] Audit logging has been enabled for MasterSchedulerBulkData
[WARNING] Audit logging has been enabled for MsDraftData
[WARNING] Audit logging has been enabled for MsErrorMessage
[WARNING] Audit logging has been enabled for Notification
[WARNING] Audit logging has been enabled for NotificationMessageDynamic
[WARNING] Audit logging has been enabled for NotificationRecipient
[WARNING] Audit logging has been enabled for PreferenceSetting
[WARNING] Audit logging has been enabled for Qualification
[WARNING] Audit logging has been enabled for RealTimeLotusData
[WARNING] Audit logging has been enabled for Region
[WARNING] Audit logging has been enabled for Resource
[WARNING] Audit logging has been enabled for RightsExtensionLog
[WARNING] Audit logging has been enabled for Role
[WARNING] Audit logging has been enabled for RolesTask
[WARNING] Audit logging has been enabled for SchedulerMetadata
[WARNING] Audit logging has been enabled for ShownSubstitutions
[WARNING] Audit logging has been enabled for Substitution
[WARNING] Audit logging has been enabled for SupportLanguage
[WARNING] Audit logging has been enabled for SupportWindow
[WARNING] Audit logging has been enabled for SystemNotification
[WARNING] Audit logging has been enabled for Task
[WARNING] Audit logging has been enabled for TaskTracer
[WARNING] Audit logging has been enabled for TempData
[WARNING] Audit logging has been enabled for TriggerEvent
[WARNING] Audit logging has been enabled for UnavailableDespiteTemplate
[WARNING] Audit logging has been enabled for UncapLearnerLog
[WARNING] Audit logging has been enabled for UserLanguage
[WARNING] Audit logging has been enabled for UserUpdateExecutionDetail
[WARNING] Audit logging has been enabled for UserVillage
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email989@rosettastone.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`type`, `skype_id`, `photo_file_size`, `full_name`, `native_language`, `sessions_allowed_per_week`, `photo_file_name`, `updated_at`, `manager_id`, `photo_content_type`, `personal_email`, `primary_phone`, `bio`, `photo_file`, `mobile_country_code`, `primary_country_code`, `country`, `hire_date`, `coach_guid`, `is_supervisor`, `next_substitution_alert_in`, `preferred_name`, `next_session_alert_in`, `user_name`, `mobile_phone`, `secondary_phone`, `lotus_qualified`, `region_id`, `birth_date`, `created_at`, `manager_notes`, `active`, `other_languages`, `rs_email`, `address`, `aim_id`, `last_logout`) VALUES ('Coach', NULL, NULL, 'test21', 'en-US', 8, NULL, '2015-01-13 08:33:41', NULL, NULL, NULL, '5402334456', NULL, NULL, '1', '1', NULL, NULL, NULL, 0, 24, 'test', NULL, 'test21', NULL, NULL, 1, NULL, NULL, '2015-01-13 08:33:41', NULL, 1, NULL, 'rs_email989@rosettastone.com', NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 161
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mSQL (0.5ms)[0m  describe `audit_log_records`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`attribute_name`, `action`, `new_value`, `loggable_id`, `previous_value`, `changed_by`, `loggable_type`, `created_at`, `timestamp`) VALUES ('', 'create', NULL, 161, NULL, '', 'Account', '2015-01-13 08:33:41', '2015-01-13 08:33:41')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `accounts` SET `updated_at` = '2015-01-13 08:33:41', `created_at` = '2015-01-12 08:33:41' WHERE `accounts`.`id` = 161
Saving a log entry on update for Account record 161
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mdescribe `languages`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`updated_at`, `duration`, `created_at`, `external_scheduler`, `type`, `last_pushed_week`, `connection_type`, `identifier`) VALUES ('2015-01-13 08:33:41', 30, '2015-01-13 08:33:41', NULL, 'TotaleLanguage', '2011-10-27 23:22:54', NULL, 'ARA')
Saving a log entry on create for Language record 126
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `audit_log_records` (`attribute_name`, `action`, `new_value`, `loggable_id`, `previous_value`, `changed_by`, `loggable_type`, `created_at`, `timestamp`) VALUES ('', 'create', NULL, 126, NULL, '', 'Language', '2015-01-13 08:33:41', '2015-01-13 08:33:41')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 161 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 161 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 161 and language_id = 126)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 161 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  describe `qualifications`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `dialect_id`, `coach_id`, `updated_at`, `language_id`, `max_unit`) VALUES ('2015-01-13 08:33:41', NULL, 161, '2015-01-13 08:33:41', 126, 10)[0m
Saving a log entry on create for Qualification record 126
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`attribute_name`, `action`, `new_value`, `loggable_id`, `previous_value`, `changed_by`, `loggable_type`, `created_at`, `timestamp`) VALUES ('', 'create', NULL, 126, NULL, '', 'Qualification', '2015-01-13 08:33:41', '2015-01-13 08:33:41')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  describe `support_languages`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`updated_at`, `language_code`, `created_at`, `name`) VALUES ('2015-01-13 08:33:41', 'en-US', '2015-01-13 08:33:41', 'English')[0m
Saving a log entry on create for SupportLanguage record 86
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`attribute_name`, `action`, `new_value`, `loggable_id`, `previous_value`, `changed_by`, `loggable_type`, `created_at`, `timestamp`) VALUES ('', 'create', NULL, 86, NULL, NULL, 'SupportLanguage', '2015-01-13 08:33:41', '2015-01-13 08:33:41')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 161 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `accounts` SET `created_at` = '2015-01-13 08:33:41', `updated_at` = '2015-01-13 08:33:41' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 161
Saving a log entry on update for Coach record 161
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`native_language`, `photo_content_type`, `skype_id`, `photo_file_size`, `manager_notes`, `is_supervisor`, `preferred_name`, `region_id`, `address`, `personal_email`, `active`, `other_languages`, `aim_id`, `last_logout`, `created_at`, `secondary_phone`, `primary_phone`, `bio`, `birth_date`, `updated_at`, `photo_file`, `mobile_country_code`, `photo_file_name`, `type`, `next_substitution_alert_in`, `user_name`, `sessions_allowed_per_week`, `country`, `lotus_qualified`, `hire_date`, `coach_guid`, `mobile_phone`, `rs_email`, `next_session_alert_in`, `primary_country_code`, `manager_id`, `full_name`) VALUES ('en-US', NULL, NULL, NULL, NULL, 0, 'test', NULL, NULL, NULL, 1, NULL, NULL, NULL, '2015-01-13 08:33:41', NULL, '5402334456', NULL, NULL, '2015-01-13 08:33:41', NULL, '1', NULL, 'Coach', 24, 'rajkumar', 8, NULL, 1, NULL, NULL, NULL, 'rajkumar@rs.com', NULL, '1', NULL, 'rajkumar')[0m
Saving a log entry on create for Coach record 162
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`attribute_name`, `action`, `new_value`, `loggable_id`, `previous_value`, `changed_by`, `loggable_type`, `created_at`, `timestamp`) VALUES ('', 'create', NULL, 162, NULL, '', 'Account', '2015-01-13 08:33:41', '2015-01-13 08:33:41')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 162
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 126 AND (`qualifications`.coach_id = 162 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 126 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 162 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 162 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 162 and language_id = 126)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 162 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`created_at`, `dialect_id`, `coach_id`, `updated_at`, `language_id`, `max_unit`) VALUES ('2015-01-13 08:33:41', NULL, 162, '2015-01-13 08:33:41', 126, 10)[0m
Saving a log entry on create for Qualification record 127
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`attribute_name`, `action`, `new_value`, `loggable_id`, `previous_value`, `changed_by`, `loggable_type`, `created_at`, `timestamp`) VALUES ('', 'create', NULL, 127, NULL, '', 'Qualification', '2015-01-13 08:33:41', '2015-01-13 08:33:41')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions`
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  describe `coach_sessions`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`cancelled`, `coach_id`, `appointment_type_id`, `eschool_session_id`, `language_id`, `session_status`, `topic_id`, `created_at`, `language_identifier`, `session_end_time`, `updated_at`, `reassigned`, `type`, `number_of_seats`, `coach_showed_up`, `name`, `session_start_time`, `cancellation_reason`, `single_number_unit`, `attendance_count`, `seconds_prior_to_session`, `recurring_schedule_id`, `external_village_id`) VALUES (0, 18, NULL, 345698, 126, 1, NULL, '2015-01-13 08:33:41', 'ARA', '2015-01-13 10:30:00', '2015-01-13 08:33:41', NULL, 'ConfirmedSession', 0, 0, NULL, '2015-01-13 10:00:00', NULL, 1, NULL, NULL, NULL, NULL)[0m
Saving a log entry on create for ConfirmedSession record 46
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`attribute_name`, `action`, `new_value`, `loggable_id`, `previous_value`, `changed_by`, `loggable_type`, `created_at`, `timestamp`) VALUES ('', 'create', NULL, 46, NULL, '', 'CoachSession', '2015-01-13 08:33:41', '2015-01-13 08:33:41')
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 46) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 46 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mdescribe `substitutions`[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`grabber_coach_id`, `coach_session_id`, `lang_id`, `was_reassigned`, `grabbed`, `updated_at`, `reason`, `session_type`, `coach_id`, `cancelled`, `grabbed_at`, `created_at`) VALUES (NULL, 46, NULL, NULL, 0, '2015-01-13 08:33:41', 'Electricity Outage', 'normal', 162, 0, NULL, '2015-01-13 08:33:41')
Saving a log entry on create for Substitution record 57
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`attribute_name`, `action`, `new_value`, `loggable_id`, `previous_value`, `changed_by`, `loggable_type`, `created_at`, `timestamp`) VALUES ('', 'create', NULL, 57, NULL, '', 'Substitution', '2015-01-13 08:33:41', '2015-01-13 08:33:41')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 161 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.4ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 161) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 161) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mdescribe `preference_settings`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `preference_settings` (`session_alerts_display_time`, `coach_not_present_alert`, `notifications_email_sending_schedule`, `daily_cap`, `substitution_alerts_email_sending_schedule`, `substitution_alerts_display_time`, `no_of_home_announcements`, `updated_at`, `no_of_substitution_alerts_to_display`, `substitution_policy_email_type`, `notifications_email`, `default_language_for_master_scheduler`, `substitution_alerts_email`, `no_of_home_notifications`, `account_id`, `calendar_notices_email_type`, `no_of_home_substitutions`, `calendar_notices_email_sending_schedule`, `calendar_notices_email`, `created_at`, `calendar_notices_display_time`, `start_page`, `substitution_policy_email_sending_schedule`, `no_of_calendar_notices_to_display`, `no_of_home_events`, `no_of_notifications_to_display`, `timeoff_request_email`, `timeoff_request_email_type`, `substitution_alerts_email_type`, `no_of_learner_dashboard_records`, `substitution_alerts_sms`, `substitution_policy_email`, `notifications_display_time`, `notifications_email_type`, `mails_sent`) VALUES (10, NULL, 'IMMEDIATELY', NULL, 'IMMEDIATELY', 86400, 5, '2015-01-13 08:33:41', 5, NULL, NULL, NULL, NULL, 5, 161, 'PER', 5, 'IMMEDIATELY', NULL, '2015-01-13 08:33:41', NULL, 'CALENDAR', NULL, NULL, 5, NULL, NULL, NULL, 'PER', NULL, 1, NULL, NULL, 'PER', 0)
Saving a log entry on create for PreferenceSetting record 23
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`attribute_name`, `action`, `new_value`, `loggable_id`, `previous_value`, `changed_by`, `loggable_type`, `created_at`, `timestamp`) VALUES ('', 'create', NULL, 23, NULL, 'test21', 'PreferenceSetting', '2015-01-13 08:33:41', '2015-01-13 08:33:41')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 161 AND session_start_time < '2015-01-13 08:43:41' AND session_start_time >= '2015-01-13 08:33:41' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 126 LIMIT 1
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mLocalSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 161 AND language_id = 126) ORDER BY qualifications.id DESC LIMIT 1[0m
Completed 200 OK in 67ms (Views: 15.7ms | ActiveRecord: 56.2ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 161 AND (max_unit > 0))
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 161 AND session_start_time < '2015-01-13 08:43:41' AND session_start_time >= '2015-01-13 08:33:41' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 161 AND language_id = 126) ORDER BY qualifications.id DESC LIMIT 1
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 1.8ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 161 AND (max_unit > 0))[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 161 AND session_start_time < '2015-01-13 08:43:41' AND session_start_time >= '2015-01-13 08:33:41' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1
  [1m[36mConfirmedSession Load (1.1ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 161 AND language_id = 126) ORDER BY qualifications.id DESC LIMIT 1[0m
Completed 200 OK in 13ms (Views: 0.4ms | ActiveRecord: 2.8ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 161 AND (max_unit > 0))
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 161 AND session_start_time < '2015-01-13 08:43:41' AND session_start_time >= '2015-01-13 08:33:41' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 161 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 161 AND language_id = 126) ORDER BY qualifications.id DESC LIMIT 1
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 1.8ms)
  [1m[36mSQL (70.2ms)[0m  [1mROLLBACK[0m
[WARNING] Audit logging has been enabled for Account
[WARNING] Audit logging has been enabled for AddConsumableLog
[WARNING] Audit logging has been enabled for Announcement
[WARNING] Audit logging has been enabled for CoachSession
[WARNING] Audit logging has been enabled for Language
[WARNING] Audit logging has been enabled for CmPreference
  [1m[36mSQL (0.4ms)[0m  [1mSHOW TABLES[0m
[WARNING] Audit logging has been enabled for CoachAvailability
[WARNING] Audit logging has been enabled for CoachAvailabilityTemplate
[WARNING] Audit logging has been enabled for CoachRecurringSchedule
[WARNING] Audit logging has been enabled for DelayedJob
[WARNING] Audit logging has been enabled for Event
[WARNING] Audit logging has been enabled for ExcludedCoachesSession
[WARNING] Audit logging has been enabled for LanguageConfiguration
[WARNING] Audit logging has been enabled for LearnerSupportStatus
[WARNING] Audit logging has been enabled for Level
  [1m[35mLevel Load (0.1ms)[0m  SELECT `levels`.* FROM `levels`
[WARNING] Audit logging has been enabled for Link
[WARNING] Audit logging has been enabled for ManagementTeamMember
[WARNING] Audit logging has been enabled for MasterSchedulerBulkData
[WARNING] Audit logging has been enabled for MsDraftData
[WARNING] Audit logging has been enabled for MsErrorMessage
[WARNING] Audit logging has been enabled for Notification
[WARNING] Audit logging has been enabled for NotificationMessageDynamic
[WARNING] Audit logging has been enabled for NotificationRecipient
[WARNING] Audit logging has been enabled for PreferenceSetting
[WARNING] Audit logging has been enabled for Qualification
[WARNING] Audit logging has been enabled for RealTimeLotusData
[WARNING] Audit logging has been enabled for Region
[WARNING] Audit logging has been enabled for Resource
[WARNING] Audit logging has been enabled for RightsExtensionLog
[WARNING] Audit logging has been enabled for Role
[WARNING] Audit logging has been enabled for RolesTask
[WARNING] Audit logging has been enabled for SchedulerMetadata
[WARNING] Audit logging has been enabled for ShownSubstitutions
[WARNING] Audit logging has been enabled for Substitution
[WARNING] Audit logging has been enabled for SupportLanguage
[WARNING] Audit logging has been enabled for SupportWindow
[WARNING] Audit logging has been enabled for SystemNotification
[WARNING] Audit logging has been enabled for Task
[WARNING] Audit logging has been enabled for TaskTracer
[WARNING] Audit logging has been enabled for TempData
[WARNING] Audit logging has been enabled for TriggerEvent
[WARNING] Audit logging has been enabled for UnavailableDespiteTemplate
[WARNING] Audit logging has been enabled for UncapLearnerLog
[WARNING] Audit logging has been enabled for UserLanguage
[WARNING] Audit logging has been enabled for UserUpdateExecutionDetail
[WARNING] Audit logging has been enabled for UserVillage
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email204@rosettastone.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`photo_content_type`, `aim_id`, `active`, `birth_date`, `region_id`, `is_supervisor`, `lotus_qualified`, `hire_date`, `bio`, `type`, `manager_notes`, `other_languages`, `updated_at`, `personal_email`, `next_session_alert_in`, `photo_file_name`, `skype_id`, `photo_file_size`, `next_substitution_alert_in`, `country`, `mobile_phone`, `photo_file`, `primary_phone`, `full_name`, `rs_email`, `native_language`, `mobile_country_code`, `primary_country_code`, `preferred_name`, `sessions_allowed_per_week`, `secondary_phone`, `created_at`, `user_name`, `coach_guid`, `last_logout`, `manager_id`, `address`) VALUES (NULL, NULL, 1, NULL, NULL, 0, 1, NULL, NULL, 'Coach', NULL, NULL, '2015-01-13 08:37:10', NULL, NULL, NULL, NULL, NULL, 24, NULL, NULL, NULL, '5402334456', 'test21', 'rs_email204@rosettastone.com', 'en-US', '1', '1', 'test', 8, NULL, '2015-01-13 08:37:10', 'test21', NULL, NULL, NULL, NULL)[0m
Saving a log entry on create for Account record 163
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mSQL (0.5ms)[0m  describe `audit_log_records`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`attribute_name`, `new_value`, `created_at`, `previous_value`, `loggable_type`, `loggable_id`, `changed_by`, `timestamp`, `action`) VALUES ('', NULL, '2015-01-13 08:37:10', NULL, 'Account', 163, '', '2015-01-13 08:37:10', 'create')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.3ms)[0m  UPDATE `accounts` SET `updated_at` = '2015-01-13 08:37:10', `created_at` = '2015-01-12 08:37:10' WHERE `accounts`.`id` = 163
Saving a log entry on update for Account record 163
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mdescribe `languages`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`last_pushed_week`, `identifier`, `created_at`, `external_scheduler`, `duration`, `updated_at`, `connection_type`, `type`) VALUES ('2011-10-27 23:22:54', 'ARA', '2015-01-13 08:37:10', NULL, 30, '2015-01-13 08:37:10', NULL, 'TotaleLanguage')
Saving a log entry on create for Language record 127
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`attribute_name`, `new_value`, `created_at`, `previous_value`, `loggable_type`, `loggable_id`, `changed_by`, `timestamp`, `action`) VALUES ('', NULL, '2015-01-13 08:37:10', NULL, 'Language', 127, '', '2015-01-13 08:37:10', 'create')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 163 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 163 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 163 and language_id = 127)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 163 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  describe `qualifications`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`dialect_id`, `created_at`, `coach_id`, `max_unit`, `updated_at`, `language_id`) VALUES (NULL, '2015-01-13 08:37:10', 163, 10, '2015-01-13 08:37:10', 127)[0m
Saving a log entry on create for Qualification record 128
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`attribute_name`, `new_value`, `created_at`, `previous_value`, `loggable_type`, `loggable_id`, `changed_by`, `timestamp`, `action`) VALUES ('', NULL, '2015-01-13 08:37:10', NULL, 'Qualification', 128, '', '2015-01-13 08:37:10', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  describe `support_languages`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`created_at`, `language_code`, `name`, `updated_at`) VALUES ('2015-01-13 08:37:10', 'en-US', 'English', '2015-01-13 08:37:10')[0m
Saving a log entry on create for SupportLanguage record 87
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`attribute_name`, `new_value`, `created_at`, `previous_value`, `loggable_type`, `loggable_id`, `changed_by`, `timestamp`, `action`) VALUES ('', NULL, '2015-01-13 08:37:10', NULL, 'SupportLanguage', 87, NULL, '2015-01-13 08:37:10', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 163 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `accounts` SET `created_at` = '2015-01-13 08:37:10', `updated_at` = '2015-01-13 08:37:10' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 163
Saving a log entry on update for Coach record 163
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `accounts` (`rs_email`, `next_substitution_alert_in`, `mobile_phone`, `hire_date`, `coach_guid`, `manager_notes`, `last_logout`, `photo_file_name`, `birth_date`, `preferred_name`, `country`, `manager_id`, `primary_phone`, `native_language`, `aim_id`, `region_id`, `photo_content_type`, `created_at`, `updated_at`, `primary_country_code`, `type`, `secondary_phone`, `other_languages`, `address`, `personal_email`, `bio`, `active`, `user_name`, `lotus_qualified`, `sessions_allowed_per_week`, `full_name`, `skype_id`, `photo_file_size`, `photo_file`, `next_session_alert_in`, `is_supervisor`, `mobile_country_code`) VALUES ('rajkumar@rs.com', 24, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'test', NULL, NULL, '5402334456', 'en-US', NULL, NULL, NULL, '2015-01-13 08:37:10', '2015-01-13 08:37:10', '1', 'Coach', NULL, NULL, NULL, NULL, NULL, 1, 'rajkumar', 1, 8, 'rajkumar', NULL, NULL, NULL, NULL, 0, '1')[0m
Saving a log entry on create for Coach record 164
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`attribute_name`, `new_value`, `created_at`, `previous_value`, `loggable_type`, `loggable_id`, `changed_by`, `timestamp`, `action`) VALUES ('', NULL, '2015-01-13 08:37:10', NULL, 'Account', 164, '', '2015-01-13 08:37:10', 'create')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 164
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.3ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 127 AND (`qualifications`.coach_id = 164 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 127 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 164 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 164 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 164 and language_id = 127)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 164 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`dialect_id`, `created_at`, `coach_id`, `max_unit`, `updated_at`, `language_id`) VALUES (NULL, '2015-01-13 08:37:10', 164, 10, '2015-01-13 08:37:10', 127)[0m
Saving a log entry on create for Qualification record 129
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`attribute_name`, `new_value`, `created_at`, `previous_value`, `loggable_type`, `loggable_id`, `changed_by`, `timestamp`, `action`) VALUES ('', NULL, '2015-01-13 08:37:10', NULL, 'Qualification', 129, '', '2015-01-13 08:37:10', 'create')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions`
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  describe `coach_sessions`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`recurring_schedule_id`, `type`, `attendance_count`, `reassigned`, `session_start_time`, `topic_id`, `created_at`, `updated_at`, `language_id`, `language_identifier`, `external_village_id`, `seconds_prior_to_session`, `session_status`, `eschool_session_id`, `name`, `session_end_time`, `number_of_seats`, `cancelled`, `coach_id`, `cancellation_reason`, `coach_showed_up`, `appointment_type_id`, `single_number_unit`) VALUES (NULL, 'ConfirmedSession', NULL, NULL, '2015-01-13 10:00:00', NULL, '2015-01-13 08:37:10', '2015-01-13 08:37:10', 127, 'ARA', NULL, NULL, 1, 345698, NULL, '2015-01-13 10:30:00', 0, 0, 18, NULL, 0, NULL, 1)[0m
Saving a log entry on create for ConfirmedSession record 47
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`attribute_name`, `new_value`, `created_at`, `previous_value`, `loggable_type`, `loggable_id`, `changed_by`, `timestamp`, `action`) VALUES ('', NULL, '2015-01-13 08:37:10', NULL, 'CoachSession', 47, '', '2015-01-13 08:37:10', 'create')
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 47) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 47 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mdescribe `substitutions`[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `substitutions` (`cancelled`, `coach_id`, `updated_at`, `grabbed_at`, `coach_session_id`, `reason`, `was_reassigned`, `created_at`, `session_type`, `grabbed`, `grabber_coach_id`, `lang_id`) VALUES (0, 164, '2015-01-13 08:37:10', NULL, 47, 'Electricity Outage', NULL, '2015-01-13 08:37:10', 'normal', 0, NULL, NULL)
Saving a log entry on create for Substitution record 58
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`attribute_name`, `new_value`, `created_at`, `previous_value`, `loggable_type`, `loggable_id`, `changed_by`, `timestamp`, `action`) VALUES ('', NULL, '2015-01-13 08:37:10', NULL, 'Substitution', 58, '', '2015-01-13 08:37:10', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 163 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.3ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 163) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 163) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mdescribe `preference_settings`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `preference_settings` (`no_of_home_announcements`, `notifications_email_sending_schedule`, `start_page`, `timeoff_request_email`, `substitution_alerts_email_sending_schedule`, `timeoff_request_email_type`, `no_of_learner_dashboard_records`, `created_at`, `no_of_calendar_notices_to_display`, `notifications_display_time`, `no_of_notifications_to_display`, `notifications_email`, `calendar_notices_email`, `substitution_alerts_sms`, `calendar_notices_email_sending_schedule`, `no_of_substitution_alerts_to_display`, `no_of_home_substitutions`, `substitution_policy_email_sending_schedule`, `substitution_alerts_email`, `coach_not_present_alert`, `substitution_alerts_display_time`, `calendar_notices_email_type`, `substitution_policy_email`, `notifications_email_type`, `calendar_notices_display_time`, `substitution_alerts_email_type`, `account_id`, `mails_sent`, `substitution_policy_email_type`, `daily_cap`, `no_of_home_events`, `session_alerts_display_time`, `updated_at`, `default_language_for_master_scheduler`, `no_of_home_notifications`) VALUES (5, 'IMMEDIATELY', 'CALENDAR', NULL, 'IMMEDIATELY', NULL, NULL, '2015-01-13 08:37:10', NULL, NULL, NULL, NULL, NULL, 1, 'IMMEDIATELY', 5, 5, NULL, NULL, NULL, 86400, 'PER', NULL, 'PER', NULL, 'PER', 163, 0, NULL, NULL, 5, 10, '2015-01-13 08:37:10', NULL, 5)
Saving a log entry on create for PreferenceSetting record 24
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`attribute_name`, `new_value`, `created_at`, `previous_value`, `loggable_type`, `loggable_id`, `changed_by`, `timestamp`, `action`) VALUES ('', NULL, '2015-01-13 08:37:10', NULL, 'PreferenceSetting', 24, 'test21', '2015-01-13 08:37:10', 'create')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 163 AND session_start_time < '2015-01-13 08:47:10' AND session_start_time >= '2015-01-13 08:37:10' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 127 LIMIT 1
  [1m[36mConfirmedSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mLocalSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 163 AND language_id = 127) ORDER BY qualifications.id DESC LIMIT 1[0m
Completed 200 OK in 66ms (Views: 15.6ms | ActiveRecord: 70.8ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 163 AND (max_unit > 0))
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 163 AND session_start_time < '2015-01-13 08:47:10' AND session_start_time >= '2015-01-13 08:37:10' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 163 AND language_id = 127) ORDER BY qualifications.id DESC LIMIT 1
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 1.9ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 163 AND (max_unit > 0))[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 163 AND session_start_time < '2015-01-13 08:47:10' AND session_start_time >= '2015-01-13 08:37:10' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 163 AND language_id = 127) ORDER BY qualifications.id DESC LIMIT 1[0m
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 1.9ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 163 AND (max_unit > 0))
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 163 AND session_start_time < '2015-01-13 08:47:10' AND session_start_time >= '2015-01-13 08:37:10' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mLocalSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 163 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 163 AND language_id = 127) ORDER BY qualifications.id DESC LIMIT 1
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 1.9ms)
  [1m[36mSQL (62.3ms)[0m  [1mROLLBACK[0m
[WARNING] Audit logging has been enabled for Account
[WARNING] Audit logging has been enabled for AddConsumableLog
[WARNING] Audit logging has been enabled for Announcement
[WARNING] Audit logging has been enabled for CoachSession
[WARNING] Audit logging has been enabled for Language
[WARNING] Audit logging has been enabled for CmPreference
  [1m[36mSQL (0.4ms)[0m  [1mSHOW TABLES[0m
[WARNING] Audit logging has been enabled for CoachAvailability
[WARNING] Audit logging has been enabled for CoachAvailabilityTemplate
[WARNING] Audit logging has been enabled for CoachRecurringSchedule
[WARNING] Audit logging has been enabled for DelayedJob
[WARNING] Audit logging has been enabled for Event
[WARNING] Audit logging has been enabled for ExcludedCoachesSession
[WARNING] Audit logging has been enabled for LanguageConfiguration
[WARNING] Audit logging has been enabled for LearnerSupportStatus
[WARNING] Audit logging has been enabled for Level
  [1m[35mLevel Load (0.1ms)[0m  SELECT `levels`.* FROM `levels`
[WARNING] Audit logging has been enabled for Link
[WARNING] Audit logging has been enabled for ManagementTeamMember
[WARNING] Audit logging has been enabled for MasterSchedulerBulkData
[WARNING] Audit logging has been enabled for MsDraftData
[WARNING] Audit logging has been enabled for MsErrorMessage
[WARNING] Audit logging has been enabled for Notification
[WARNING] Audit logging has been enabled for NotificationMessageDynamic
[WARNING] Audit logging has been enabled for NotificationRecipient
[WARNING] Audit logging has been enabled for PreferenceSetting
[WARNING] Audit logging has been enabled for Qualification
[WARNING] Audit logging has been enabled for RealTimeLotusData
[WARNING] Audit logging has been enabled for Region
[WARNING] Audit logging has been enabled for Resource
[WARNING] Audit logging has been enabled for RightsExtensionLog
[WARNING] Audit logging has been enabled for Role
[WARNING] Audit logging has been enabled for RolesTask
[WARNING] Audit logging has been enabled for SchedulerMetadata
[WARNING] Audit logging has been enabled for ShownSubstitutions
[WARNING] Audit logging has been enabled for Substitution
[WARNING] Audit logging has been enabled for SupportLanguage
[WARNING] Audit logging has been enabled for SupportWindow
[WARNING] Audit logging has been enabled for SystemNotification
[WARNING] Audit logging has been enabled for Task
[WARNING] Audit logging has been enabled for TaskTracer
[WARNING] Audit logging has been enabled for TempData
[WARNING] Audit logging has been enabled for TriggerEvent
[WARNING] Audit logging has been enabled for UnavailableDespiteTemplate
[WARNING] Audit logging has been enabled for UncapLearnerLog
[WARNING] Audit logging has been enabled for UserLanguage
[WARNING] Audit logging has been enabled for UserUpdateExecutionDetail
[WARNING] Audit logging has been enabled for UserVillage
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email541@rosettastone.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`primary_phone`, `next_substitution_alert_in`, `active`, `user_name`, `next_session_alert_in`, `sessions_allowed_per_week`, `aim_id`, `coach_guid`, `secondary_phone`, `mobile_phone`, `created_at`, `address`, `photo_content_type`, `photo_file`, `last_logout`, `type`, `full_name`, `photo_file_name`, `is_supervisor`, `skype_id`, `photo_file_size`, `manager_id`, `bio`, `personal_email`, `birth_date`, `rs_email`, `preferred_name`, `mobile_country_code`, `primary_country_code`, `lotus_qualified`, `manager_notes`, `hire_date`, `native_language`, `region_id`, `updated_at`, `other_languages`, `country`) VALUES ('5402334456', 24, 1, 'test21', NULL, 8, NULL, NULL, NULL, NULL, '2015-01-13 08:41:36', NULL, NULL, NULL, NULL, 'Coach', 'test21', NULL, 0, NULL, NULL, NULL, NULL, NULL, NULL, 'rs_email541@rosettastone.com', 'test', '1', '1', 1, NULL, NULL, 'en-US', NULL, '2015-01-13 08:41:36', NULL, NULL)[0m
Saving a log entry on create for Account record 165
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mSQL (0.4ms)[0m  describe `audit_log_records`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `changed_by`, `previous_value`, `loggable_id`, `created_at`, `timestamp`, `loggable_type`, `attribute_name`) VALUES (NULL, 'create', '', NULL, 165, '2015-01-13 08:41:36', '2015-01-13 08:41:36', 'Account', '')[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `accounts` SET `created_at` = '2015-01-12 08:41:36', `updated_at` = '2015-01-13 08:41:36' WHERE `accounts`.`id` = 165
Saving a log entry on update for Account record 165
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mdescribe `languages`[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`identifier`, `type`, `duration`, `created_at`, `connection_type`, `updated_at`, `external_scheduler`, `last_pushed_week`) VALUES ('ARA', 'TotaleLanguage', 30, '2015-01-13 08:41:36', NULL, '2015-01-13 08:41:36', NULL, '2011-10-27 23:22:54')
Saving a log entry on create for Language record 128
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `changed_by`, `previous_value`, `loggable_id`, `created_at`, `timestamp`, `loggable_type`, `attribute_name`) VALUES (NULL, 'create', '', NULL, 128, '2015-01-13 08:41:36', '2015-01-13 08:41:36', 'Language', '')[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 165 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 165 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 165 and language_id = 128)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 165 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  describe `qualifications`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`coach_id`, `created_at`, `updated_at`, `dialect_id`, `max_unit`, `language_id`) VALUES (165, '2015-01-13 08:41:36', '2015-01-13 08:41:36', NULL, 10, 128)[0m
Saving a log entry on create for Qualification record 130
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `changed_by`, `previous_value`, `loggable_id`, `created_at`, `timestamp`, `loggable_type`, `attribute_name`) VALUES (NULL, 'create', '', NULL, 130, '2015-01-13 08:41:36', '2015-01-13 08:41:36', 'Qualification', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  describe `support_languages`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`created_at`, `name`, `language_code`, `updated_at`) VALUES ('2015-01-13 08:41:36', 'English', 'en-US', '2015-01-13 08:41:36')[0m
Saving a log entry on create for SupportLanguage record 88
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `changed_by`, `previous_value`, `loggable_id`, `created_at`, `timestamp`, `loggable_type`, `attribute_name`) VALUES (NULL, 'create', NULL, NULL, 88, '2015-01-13 08:41:36', '2015-01-13 08:41:36', 'SupportLanguage', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 165 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `accounts` SET `updated_at` = '2015-01-13 08:41:36', `created_at` = '2015-01-13 08:41:36' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 165
Saving a log entry on update for Coach record 165
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `accounts` (`manager_notes`, `updated_at`, `is_supervisor`, `preferred_name`, `photo_content_type`, `rs_email`, `hire_date`, `skype_id`, `user_name`, `next_session_alert_in`, `primary_country_code`, `manager_id`, `country`, `photo_file_size`, `primary_phone`, `sessions_allowed_per_week`, `other_languages`, `active`, `photo_file_name`, `type`, `created_at`, `mobile_phone`, `region_id`, `lotus_qualified`, `native_language`, `photo_file`, `mobile_country_code`, `secondary_phone`, `birth_date`, `last_logout`, `bio`, `full_name`, `next_substitution_alert_in`, `address`, `aim_id`, `coach_guid`, `personal_email`) VALUES (NULL, '2015-01-13 08:41:36', 0, 'test', NULL, 'rajkumar@rs.com', NULL, NULL, 'rajkumar', NULL, '1', NULL, NULL, NULL, '5402334456', 8, NULL, 1, NULL, 'Coach', '2015-01-13 08:41:36', NULL, NULL, 1, 'en-US', NULL, '1', NULL, NULL, NULL, NULL, 'rajkumar', 24, NULL, NULL, NULL, NULL)[0m
Saving a log entry on create for Coach record 166
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `changed_by`, `previous_value`, `loggable_id`, `created_at`, `timestamp`, `loggable_type`, `attribute_name`) VALUES (NULL, 'create', '', NULL, 166, '2015-01-13 08:41:36', '2015-01-13 08:41:36', 'Account', '')
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 166
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 128 AND (`qualifications`.coach_id = 166 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 128 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 166 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 166 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 166 and language_id = 128)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 166 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`coach_id`, `created_at`, `updated_at`, `dialect_id`, `max_unit`, `language_id`) VALUES (166, '2015-01-13 08:41:36', '2015-01-13 08:41:36', NULL, 10, 128)[0m
Saving a log entry on create for Qualification record 131
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `changed_by`, `previous_value`, `loggable_id`, `created_at`, `timestamp`, `loggable_type`, `attribute_name`) VALUES (NULL, 'create', '', NULL, 131, '2015-01-13 08:41:36', '2015-01-13 08:41:36', 'Qualification', '')
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions`
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  describe `coach_sessions`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`reassigned`, `attendance_count`, `seconds_prior_to_session`, `updated_at`, `appointment_type_id`, `language_id`, `external_village_id`, `created_at`, `single_number_unit`, `session_end_time`, `session_start_time`, `name`, `coach_id`, `type`, `eschool_session_id`, `session_status`, `topic_id`, `coach_showed_up`, `language_identifier`, `cancelled`, `recurring_schedule_id`, `number_of_seats`, `cancellation_reason`) VALUES (NULL, NULL, NULL, '2015-01-13 08:41:36', NULL, 128, NULL, '2015-01-13 08:41:36', 1, '2015-01-13 10:30:00', '2015-01-13 10:00:00', NULL, 18, 'ConfirmedSession', 345698, 1, NULL, 0, 'ARA', 0, NULL, 0, NULL)[0m
Saving a log entry on create for ConfirmedSession record 48
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`new_value`, `action`, `changed_by`, `previous_value`, `loggable_id`, `created_at`, `timestamp`, `loggable_type`, `attribute_name`) VALUES (NULL, 'create', '', NULL, 48, '2015-01-13 08:41:36', '2015-01-13 08:41:36', 'CoachSession', '')
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 48) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 48 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mdescribe `substitutions`[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `substitutions` (`created_at`, `grabbed_at`, `updated_at`, `grabbed`, `coach_session_id`, `session_type`, `cancelled`, `grabber_coach_id`, `was_reassigned`, `reason`, `coach_id`, `lang_id`) VALUES ('2015-01-13 08:41:36', NULL, '2015-01-13 08:41:36', 0, 48, 'normal', 0, NULL, NULL, 'Electricity Outage', 166, NULL)
Saving a log entry on create for Substitution record 59
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `changed_by`, `previous_value`, `loggable_id`, `created_at`, `timestamp`, `loggable_type`, `attribute_name`) VALUES (NULL, 'create', '', NULL, 59, '2015-01-13 08:41:36', '2015-01-13 08:41:36', 'Substitution', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 165 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.3ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 165) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 165) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mdescribe `preference_settings`[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `preference_settings` (`no_of_calendar_notices_to_display`, `no_of_home_events`, `timeoff_request_email`, `substitution_alerts_email_type`, `no_of_notifications_to_display`, `notifications_email`, `mails_sent`, `substitution_policy_email`, `substitution_alerts_email`, `notifications_display_time`, `no_of_learner_dashboard_records`, `substitution_alerts_display_time`, `updated_at`, `no_of_substitution_alerts_to_display`, `calendar_notices_email_sending_schedule`, `substitution_policy_email_sending_schedule`, `notifications_email_type`, `calendar_notices_email_type`, `session_alerts_display_time`, `no_of_home_notifications`, `default_language_for_master_scheduler`, `account_id`, `no_of_home_substitutions`, `substitution_policy_email_type`, `timeoff_request_email_type`, `notifications_email_sending_schedule`, `daily_cap`, `calendar_notices_display_time`, `substitution_alerts_email_sending_schedule`, `substitution_alerts_sms`, `no_of_home_announcements`, `start_page`, `created_at`, `coach_not_present_alert`, `calendar_notices_email`) VALUES (NULL, 5, NULL, 'PER', NULL, NULL, 0, NULL, NULL, NULL, NULL, 86400, '2015-01-13 08:41:36', 5, 'IMMEDIATELY', NULL, 'PER', 'PER', 10, 5, NULL, 165, 5, NULL, NULL, 'IMMEDIATELY', NULL, NULL, 'IMMEDIATELY', 1, 5, 'CALENDAR', '2015-01-13 08:41:36', NULL, NULL)
Saving a log entry on create for PreferenceSetting record 25
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`new_value`, `action`, `changed_by`, `previous_value`, `loggable_id`, `created_at`, `timestamp`, `loggable_type`, `attribute_name`) VALUES (NULL, 'create', 'test21', NULL, 25, '2015-01-13 08:41:36', '2015-01-13 08:41:36', 'PreferenceSetting', '')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 165 AND session_start_time < '2015-01-13 08:51:36' AND session_start_time >= '2015-01-13 08:41:36' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 128 LIMIT 1
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mLocalSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 165 AND language_id = 128) ORDER BY qualifications.id DESC LIMIT 1[0m
Completed 200 OK in 67ms (Views: 15.6ms | ActiveRecord: 65.6ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 165 AND (max_unit > 0))
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 165 AND session_start_time < '2015-01-13 08:51:36' AND session_start_time >= '2015-01-13 08:41:36' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 165 AND language_id = 128) ORDER BY qualifications.id DESC LIMIT 1
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 2.0ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 165 AND (max_unit > 0))[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 165 AND session_start_time < '2015-01-13 08:51:36' AND session_start_time >= '2015-01-13 08:41:36' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 165 AND language_id = 128) ORDER BY qualifications.id DESC LIMIT 1[0m
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 1.9ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 165 AND (max_unit > 0))
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 165 AND session_start_time < '2015-01-13 08:51:36' AND session_start_time >= '2015-01-13 08:41:36' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:00:00' AND session_start_time < '2015-01-13 10:29:00' AND action != 'create')
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00')
  [1m[36mLocalSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 165 AND session_start_time >= '2015-01-13 10:30:00' AND session_start_time < '2015-01-13 10:59:00' AND action != 'create')[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 165 AND language_id = 128) ORDER BY qualifications.id DESC LIMIT 1
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 1.9ms)
  [1m[36mSQL (56.4ms)[0m  [1mROLLBACK[0m
[WARNING] Audit logging has been enabled for Account
[WARNING] Audit logging has been enabled for AddConsumableLog
[WARNING] Audit logging has been enabled for Announcement
[WARNING] Audit logging has been enabled for CoachSession
[WARNING] Audit logging has been enabled for Language
[WARNING] Audit logging has been enabled for CmPreference
  [1m[36mSQL (0.4ms)[0m  [1mSHOW TABLES[0m
[WARNING] Audit logging has been enabled for CoachAvailability
[WARNING] Audit logging has been enabled for CoachAvailabilityTemplate
[WARNING] Audit logging has been enabled for CoachRecurringSchedule
[WARNING] Audit logging has been enabled for DelayedJob
[WARNING] Audit logging has been enabled for Event
[WARNING] Audit logging has been enabled for ExcludedCoachesSession
[WARNING] Audit logging has been enabled for LanguageConfiguration
[WARNING] Audit logging has been enabled for LearnerSupportStatus
[WARNING] Audit logging has been enabled for Level
  [1m[35mLevel Load (0.1ms)[0m  SELECT `levels`.* FROM `levels`
[WARNING] Audit logging has been enabled for Link
[WARNING] Audit logging has been enabled for ManagementTeamMember
[WARNING] Audit logging has been enabled for MasterSchedulerBulkData
[WARNING] Audit logging has been enabled for MsDraftData
[WARNING] Audit logging has been enabled for MsErrorMessage
[WARNING] Audit logging has been enabled for Notification
[WARNING] Audit logging has been enabled for NotificationMessageDynamic
[WARNING] Audit logging has been enabled for NotificationRecipient
[WARNING] Audit logging has been enabled for PreferenceSetting
[WARNING] Audit logging has been enabled for Qualification
[WARNING] Audit logging has been enabled for RealTimeLotusData
[WARNING] Audit logging has been enabled for Region
[WARNING] Audit logging has been enabled for Resource
[WARNING] Audit logging has been enabled for RightsExtensionLog
[WARNING] Audit logging has been enabled for Role
[WARNING] Audit logging has been enabled for RolesTask
[WARNING] Audit logging has been enabled for SchedulerMetadata
[WARNING] Audit logging has been enabled for ShownSubstitutions
[WARNING] Audit logging has been enabled for Substitution
[WARNING] Audit logging has been enabled for SupportLanguage
[WARNING] Audit logging has been enabled for SupportWindow
[WARNING] Audit logging has been enabled for SystemNotification
[WARNING] Audit logging has been enabled for Task
[WARNING] Audit logging has been enabled for TaskTracer
[WARNING] Audit logging has been enabled for TempData
[WARNING] Audit logging has been enabled for TriggerEvent
[WARNING] Audit logging has been enabled for UnavailableDespiteTemplate
[WARNING] Audit logging has been enabled for UncapLearnerLog
[WARNING] Audit logging has been enabled for UserLanguage
[WARNING] Audit logging has been enabled for UserUpdateExecutionDetail
[WARNING] Audit logging has been enabled for UserVillage
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'rajkumar', '2015-01-13 10:30:58', 1, 'en-US', NULL, '2015-01-13 10:30:58', NULL, 'rajkumar', 24, '1', NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)[0m
Saving a log entry on create for Coach record 167
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mSQL (0.4ms)[0m  describe `audit_log_records`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:58', '', '2015-01-13 10:30:58', 'Account', NULL, 167, '', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 167
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mdescribe `support_languages`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:30:58', '2015-01-13 10:30:58', 'en-US')
Saving a log entry on create for SupportLanguage record 89
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:58', '', '2015-01-13 10:30:58', 'SupportLanguage', NULL, 89, NULL, NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  describe `languages`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:30:58', NULL, 'ARA', '2015-01-13 10:30:58')[0m
Saving a log entry on create for Language record 129
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:58', '', '2015-01-13 10:30:58', 'Language', NULL, 129, '', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 129 AND (`qualifications`.coach_id = 167 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 129 LIMIT 1
  [1m[36mCoachManager Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 167 LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 167 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 167 and language_id = 129)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 167 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mdescribe `qualifications`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:30:58', NULL, 129, 10, 167, '2015-01-13 10:30:58')
Saving a log entry on create for Qualification record 132
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:58', '', '2015-01-13 10:30:58', 'Qualification', NULL, 132, '', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions`[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 167 AND session_end_time > '2015-01-13 11:00:00' AND session_start_time < '2015-01-13 11:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mdescribe `coach_sessions`[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`appointment_type_id`, `type`, `coach_id`, `session_end_time`, `external_village_id`, `created_at`, `session_start_time`, `topic_id`, `reassigned`, `attendance_count`, `name`, `cancelled`, `seconds_prior_to_session`, `session_status`, `coach_showed_up`, `language_identifier`, `updated_at`, `recurring_schedule_id`, `number_of_seats`, `eschool_session_id`, `single_number_unit`, `cancellation_reason`, `language_id`) VALUES (NULL, 'ConfirmedSession', 167, '2015-01-13 11:30:00', NULL, '2015-01-13 10:30:59', '2015-01-13 11:00:00', NULL, NULL, NULL, NULL, 0, NULL, 1, 0, 'ARA', '2015-01-13 10:30:59', NULL, 0, 343, 1, NULL, 129)
Saving a log entry on create for ConfirmedSession record 49
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'CoachSession', NULL, 49, '', NULL)[0m
  [1m[35mSessionMetadata Load (0.3ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 49) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 49 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  describe `substitutions`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`reason`, `coach_id`, `lang_id`, `grabbed_at`, `grabbed`, `created_at`, `session_type`, `cancelled`, `was_reassigned`, `grabber_coach_id`, `updated_at`, `coach_session_id`) VALUES ('Electricity Outage', 167, NULL, NULL, 0, '2015-01-13 10:30:59', 'normal', 0, NULL, NULL, '2015-01-13 10:30:59', 49)[0m
Saving a log entry on create for Substitution record 60
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Substitution', NULL, 60, '', NULL)
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email407@rosettastone.com' and id != NULL)[0m
  [1m[35mSQL (1.2ms)[0m  describe `accounts`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:30:59', NULL, NULL, NULL, NULL, 'vramanan', 'en-US', 'CoachManager', NULL, '1', 'rs_email407@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:30:59', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 168
WARNING: 'current_changed_by_entity' is nil. Your audit logs may be inaccurate. Please see custom_audit_logger.rb
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Account', NULL, 168, '', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 168 LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'AUS' OR identifier = 'AUS') ORDER BY languages.id DESC LIMIT 1[0m
  Processing by SubstitutionController#assign_substitute_for_coach as HTML
  Parameters: {"coach_session_id"=>49, "coach_id"=>167, "assigned_coach"=>167}
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 167 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 49 LIMIT 1[0m
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 49) ORDER BY substitutions.id DESC LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 49 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `substitutions` SET `grabbed_at` = '2015-01-13 10:30:59', `grabbed` = 1, `was_reassigned` = 1, `grabber_coach_id` = 167, `updated_at` = '2015-01-13 10:30:59' WHERE `substitutions`.`id` = 60[0m
Saving a log entry on update for Substitution record 60
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:30:59', 'grabber_coach_id', '2015-01-13 10:30:59', 'Substitution', NULL, 60, 'vramanan', 167)
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:30:59', 'grabbed', '2015-01-13 10:30:59', 'Substitution', 0, 60, 'vramanan', 1)[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:30:59', 'was_reassigned', '2015-01-13 10:30:59', 'Substitution', NULL, 60, 'vramanan', 1)
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:30:59', 'grabbed_at', '2015-01-13 10:30:59', 'Substitution', NULL, 60, 'vramanan', '2015-01-13 10:30:59')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 167 AND session_end_time > '2015-01-13 11:00:00' AND session_start_time < '2015-01-13 11:30:00' AND id <> 49) ORDER BY updated_at DESC LIMIT 1[0m
Saving a log entry on update for ConfirmedSession record 49
  [1m[35mSessionMetadata Load (0.1ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 49) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 167 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mTriggerEvent Load (0.2ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'MANUALLY_REASSIGNED' LIMIT 1[0m
  [1m[35mNotification Load (0.1ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 11) LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 49 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 129 LIMIT 1
Completed 200 OK in 49ms (Views: 15.8ms | ActiveRecord: 100.2ms)
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'Check' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'Check') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'Check@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'Check', '2015-01-13 10:30:59', 1, 'en-US', NULL, '2015-01-13 10:30:59', NULL, 'Check', 24, '1', NULL, NULL, NULL, 'Check@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)[0m
Saving a log entry on create for Coach record 169
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Account', NULL, 169, 'vramanan', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 169
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'AUS' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'AUS') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('AriaLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:30:59', NULL, 'AUS', '2015-01-13 10:30:59')
Saving a log entry on create for Language record 130
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Language', NULL, 130, 'vramanan', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 130 AND (`qualifications`.coach_id = 169 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 130 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 169 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 169 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 169 and language_id = 130)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 169 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:30:59', NULL, 130, 10, 169, '2015-01-13 10:30:59')
Saving a log entry on create for Qualification record 133
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Qualification', NULL, 133, 'vramanan', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 49 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`reason`, `coach_id`, `lang_id`, `grabbed_at`, `grabbed`, `created_at`, `session_type`, `cancelled`, `was_reassigned`, `grabber_coach_id`, `updated_at`, `coach_session_id`) VALUES (NULL, 167, NULL, NULL, 1, '2015-01-13 10:30:59', 'normal', 0, NULL, 167, '2015-01-13 10:30:59', 49)[0m
Saving a log entry on create for Substitution record 61
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Substitution', NULL, 61, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#assign_substitute_for_coach as HTML
  Parameters: {"coach_session_id"=>49, "coach_id"=>167, "assigned_coach"=>167}
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 169 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 49 LIMIT 1[0m
  [1m[35mSubstitution Load (0.2ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 49) ORDER BY substitutions.id DESC LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 49 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`reason`, `coach_id`, `lang_id`, `grabbed_at`, `grabbed`, `created_at`, `session_type`, `cancelled`, `was_reassigned`, `grabber_coach_id`, `updated_at`, `coach_session_id`) VALUES (NULL, 167, NULL, NULL, 0, '2015-01-13 10:30:59', 'normal', 0, 0, NULL, '2015-01-13 10:30:59', 49)[0m
Saving a log entry on create for Substitution record 62
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Substitution', NULL, 62, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 129 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 167 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 167) AND ((max_unit > 0)))[0m
  [1m[35mSQL (0.5ms)[0m  describe `unavailable_despite_templates`
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`comments`, `start_date`, `ancestry`, `coach_id`, `end_date`, `created_at`, `approval_status`, `updated_at`, `unavailability_type`, `coach_session_id`) VALUES ('Auto Approved - Coach requested Substitute', '2015-01-13 11:00:00', NULL, 167, '2015-01-13 11:30:00', '2015-01-13 10:30:59', 1, '2015-01-13 10:30:59', 5, 49)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 26
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'UnavailableDespiteTemplate', NULL, 26, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `substitutions` SET `grabbed_at` = '2015-01-13 10:30:59', `grabbed` = 1, `was_reassigned` = 1, `grabber_coach_id` = 169, `updated_at` = '2015-01-13 10:30:59' WHERE `substitutions`.`id` = 62[0m
Saving a log entry on update for Substitution record 62
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:30:59', 'grabber_coach_id', '2015-01-13 10:30:59', 'Substitution', NULL, 62, 'vramanan', 169)
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:30:59', 'grabbed', '2015-01-13 10:30:59', 'Substitution', 0, 62, 'vramanan', 1)[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:30:59', 'was_reassigned', '2015-01-13 10:30:59', 'Substitution', 0, 62, 'vramanan', 1)
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:30:59', 'grabbed_at', '2015-01-13 10:30:59', 'Substitution', NULL, 62, 'vramanan', '2015-01-13 10:30:59')[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 169 AND session_end_time > '2015-01-13 11:00:00' AND session_start_time < '2015-01-13 11:30:00' AND id <> 49) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = 169, `updated_at` = '2015-01-13 10:30:59' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 49
Saving a log entry on update for ConfirmedSession record 49
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:30:59', 'coach_id', '2015-01-13 10:30:59', 'CoachSession', 167, 49, 'vramanan', 169)[0m
  [1m[35mSessionMetadata Load (0.1ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 49) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 169 AND session_end_time > '2015-01-13 11:00:00' AND session_start_time < '2015-01-13 11:30:00' AND id <> 49) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `reassigned` = 1, `updated_at` = '2015-01-13 10:30:59' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 49[0m
Saving a log entry on update for ConfirmedSession record 49
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:30:59', 'reassigned', '2015-01-13 10:30:59', 'CoachSession', NULL, 49, 'vramanan', 1)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 167 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  describe `system_notifications`
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `system_notifications` (`recipient_type`, `created_at`, `recipient_id`, `target_id`, `status`, `raw_message`, `notification_id`, `updated_at`) VALUES ('Account', '2015-01-13 10:30:59', 169, NULL, 0, 'You have been assigned a <b>Arabic</b> session on <b>January 13, 2015 06:00 AM</b>.', NULL, '2015-01-13 10:30:59')[0m
Saving a log entry on create for SystemNotification record 6
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'SystemNotification', NULL, 6, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 49 LIMIT 1
  [1m[36mSubstitution Load (0.1ms)[0m  [1mSELECT `substitutions`.* FROM `substitutions` WHERE (coach_id = NULL and coach_session_id = 49 ) ORDER BY id desc LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 129 LIMIT 1
Completed 200 OK in 72ms (Views: 0.5ms | ActiveRecord: 11.9ms)
  [1m[36mSQL (52.7ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email395@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:30:59', NULL, NULL, NULL, NULL, 'vramanan', 'en-US', 'CoachManager', NULL, '1', 'rs_email395@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:30:59', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 170
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Account', NULL, 170, 'vramanan', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:30:59', '2015-01-13 10:30:59', 'en-US')
Saving a log entry on create for SupportLanguage record 90
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'SupportLanguage', NULL, 90, NULL, NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 170 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'rajkumar', '2015-01-13 10:30:59', 1, 'en-US', NULL, '2015-01-13 10:30:59', NULL, 'rajkumar', 24, '1', NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)
Saving a log entry on create for Coach record 171
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Account', NULL, 171, 'vramanan', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 171
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('ReflexLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:30:59', NULL, 'KLE', '2015-01-13 10:30:59')[0m
Saving a log entry on create for Language record 131
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Language', NULL, 131, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 131 AND (`qualifications`.coach_id = 171 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 131 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 171 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 171 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 171 and language_id = 131)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 171 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:30:59', NULL, 131, 10, 171, '2015-01-13 10:30:59')[0m
Saving a log entry on create for Qualification record 134
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Qualification', NULL, 134, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`appointment_type_id`, `type`, `coach_id`, `session_end_time`, `external_village_id`, `created_at`, `session_start_time`, `topic_id`, `reassigned`, `attendance_count`, `name`, `cancelled`, `seconds_prior_to_session`, `session_status`, `coach_showed_up`, `language_identifier`, `updated_at`, `recurring_schedule_id`, `number_of_seats`, `eschool_session_id`, `single_number_unit`, `cancellation_reason`, `language_id`) VALUES (NULL, 'ConfirmedSession', 18, '2015-01-13 12:30:00', NULL, '2015-01-13 10:30:59', '2015-01-13 12:00:00', NULL, NULL, NULL, NULL, 0, NULL, 1, 0, 'KLE', '2015-01-13 10:30:59', NULL, 0, 345698, 1, NULL, 131)[0m
Saving a log entry on create for ConfirmedSession record 50
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'CoachSession', NULL, 50, 'vramanan', NULL)
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 50) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 50 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`reason`, `coach_id`, `lang_id`, `grabbed_at`, `grabbed`, `created_at`, `session_type`, `cancelled`, `was_reassigned`, `grabber_coach_id`, `updated_at`, `coach_session_id`) VALUES ('Electricity Outage', 171, NULL, NULL, 0, '2015-01-13 10:30:59', 'normal', 0, NULL, NULL, '2015-01-13 10:30:59', 50)[0m
Saving a log entry on create for Substitution record 63
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Substitution', NULL, 63, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#cancel_substitution as HTML
  Parameters: {"sub_id"=>63, "reason"=>"Electricity Outage", "notice"=>true}
  [1m[35mSubstitution Load (0.3ms)[0m  SELECT `substitutions`.* FROM `substitutions` WHERE `substitutions`.`id` = 63 LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 50 LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 131 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `substitutions` SET `cancelled` = 1, `updated_at` = '2015-01-13 10:30:59' WHERE `substitutions`.`id` = 63
Saving a log entry on update for Substitution record 63
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:30:59', 'cancelled', '2015-01-13 10:30:59', 'Substitution', 0, 63, 'vramanan', 1)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoach Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 171 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `updated_at` = '2015-01-13 10:30:59', `cancellation_reason` = 'Electricity Outage' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 50[0m
Saving a log entry on update for ConfirmedSession record 50
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:30:59', 'cancellation_reason', '2015-01-13 10:30:59', 'CoachSession', NULL, 50, 'vramanan', 'Electricity Outage')
  [1m[36mSessionMetadata Load (0.1ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 50) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 19ms (Views: 2.5ms | ActiveRecord: 63.3ms)
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'Ven' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'Ven') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'Ven@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'Ven', '2015-01-13 10:30:59', 1, 'en-US', NULL, '2015-01-13 10:30:59', NULL, 'Ven', 24, '1', NULL, NULL, NULL, 'Ven@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)[0m
Saving a log entry on create for Coach record 172
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Account', NULL, 172, 'vramanan', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 172
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:30:59', NULL, 'ARA', '2015-01-13 10:30:59')
Saving a log entry on create for Language record 132
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Language', NULL, 132, 'vramanan', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 132 AND (`qualifications`.coach_id = 172 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 132 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 172 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 172 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 172 and language_id = 132)
  [1m[36mCoachManager Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 172 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:30:59', NULL, 132, 10, 172, '2015-01-13 10:30:59')
Saving a log entry on create for Qualification record 135
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Qualification', NULL, 135, 'vramanan', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 172 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`appointment_type_id`, `type`, `coach_id`, `session_end_time`, `external_village_id`, `created_at`, `session_start_time`, `topic_id`, `reassigned`, `attendance_count`, `name`, `cancelled`, `seconds_prior_to_session`, `session_status`, `coach_showed_up`, `language_identifier`, `updated_at`, `recurring_schedule_id`, `number_of_seats`, `eschool_session_id`, `single_number_unit`, `cancellation_reason`, `language_id`) VALUES (NULL, 'ConfirmedSession', 172, '2015-01-13 12:30:00', NULL, '2015-01-13 10:30:59', '2015-01-13 12:00:00', NULL, NULL, NULL, NULL, 0, NULL, 1, 0, 'KLE', '2015-01-13 10:30:59', NULL, 0, 989648, 1, NULL, 131)
Saving a log entry on create for ConfirmedSession record 51
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'CoachSession', NULL, 51, 'vramanan', NULL)[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 51) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 51 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `substitutions` (`reason`, `coach_id`, `lang_id`, `grabbed_at`, `grabbed`, `created_at`, `session_type`, `cancelled`, `was_reassigned`, `grabber_coach_id`, `updated_at`, `coach_session_id`) VALUES ('Electricity Outage', 171, NULL, NULL, 0, '2015-01-13 10:30:59', 'normal', 1, NULL, NULL, '2015-01-13 10:30:59', 51)
Saving a log entry on create for Substitution record 64
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Substitution', NULL, 64, 'vramanan', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#cancel_substitution as HTML
  Parameters: {"sub_id"=>63, "reason"=>"Electricity Outage", "notice"=>true}
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 989648 LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`eschool_session_id` = 989648 LIMIT 1
  [1m[36mSubstitution Load (0.2ms)[0m  [1mSELECT `substitutions`.* FROM `substitutions` WHERE (coach_session_id = 51) ORDER BY substitutions.id DESC LIMIT 1[0m
  [1m[35mCoachSession Load (0.1ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 51 LIMIT 1
Completed 500 Internal Server Error in 5ms (Views: 0.4ms | ActiveRecord: 7.1ms)
  [1m[36mSQL (36.8ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'rajkumar', '2015-01-13 10:30:59', 1, 'en-US', NULL, '2015-01-13 10:30:59', NULL, 'rajkumar', 24, '1', NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)[0m
Saving a log entry on create for Coach record 173
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Account', NULL, 173, 'vramanan', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 173
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:30:59', '2015-01-13 10:30:59', 'en-US')
Saving a log entry on create for SupportLanguage record 91
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'SupportLanguage', NULL, 91, NULL, NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('ReflexLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:30:59', NULL, 'KLE', '2015-01-13 10:30:59')
Saving a log entry on create for Language record 133
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Language', NULL, 133, 'vramanan', NULL)[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 133 AND (`qualifications`.coach_id = 173 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 133 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 173 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 173 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 173 and language_id = 133)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 173 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:30:59', NULL, 133, 10, 173, '2015-01-13 10:30:59')
Saving a log entry on create for Qualification record 136
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Qualification', NULL, 136, 'vramanan', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 173
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 173
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `accounts` SET `created_at` = '2015-01-12 10:30:59', `updated_at` = '2015-01-13 10:30:59' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 173[0m
Saving a log entry on update for Coach record 173
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE (`qualifications`.coach_id = 173 AND (max_unit > 0))[0m
  [1m[35mSupportLanguage Load (0.1ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 173 LIMIT 1[0m
  [1m[35mCoachSession Load (0.1ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions`
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`appointment_type_id`, `type`, `coach_id`, `session_end_time`, `external_village_id`, `created_at`, `session_start_time`, `topic_id`, `reassigned`, `attendance_count`, `name`, `cancelled`, `seconds_prior_to_session`, `session_status`, `coach_showed_up`, `language_identifier`, `updated_at`, `recurring_schedule_id`, `number_of_seats`, `eschool_session_id`, `single_number_unit`, `cancellation_reason`, `language_id`) VALUES (NULL, 'ConfirmedSession', 18, '2015-01-13 12:30:00', NULL, '2015-01-13 10:30:59', '2015-01-13 12:00:00', NULL, NULL, NULL, NULL, 0, NULL, 1, 0, 'KLE', '2015-01-13 10:30:59', NULL, 0, 345698, 1, NULL, 133)
Saving a log entry on create for ConfirmedSession record 52
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'CoachSession', NULL, 52, 'vramanan', NULL)[0m
  [1m[35mSessionMetadata Load (0.3ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 52) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 52 LIMIT 1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `substitutions` (`reason`, `coach_id`, `lang_id`, `grabbed_at`, `grabbed`, `created_at`, `session_type`, `cancelled`, `was_reassigned`, `grabber_coach_id`, `updated_at`, `coach_session_id`) VALUES (NULL, 173, NULL, NULL, 0, '2015-01-13 10:30:59', 'normal', 0, NULL, NULL, '2015-01-13 10:30:59', 52)
Saving a log entry on create for Substitution record 65
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Substitution', NULL, 65, 'vramanan', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  Processing by SubstitutionController#check_sub_policy_violation as JS
  Parameters: {"start_time"=>Tue Jan 13 10:00:00 UTC 2015, "coach_id"=>173}
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 173 AND (max_unit > 0))[0m
  [1m[35mPreferenceSetting Load (0.3ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 173) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 173) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mdescribe `preference_settings`[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `preference_settings` (`no_of_calendar_notices_to_display`, `substitution_alerts_email_type`, `calendar_notices_display_time`, `no_of_home_substitutions`, `substitution_policy_email_sending_schedule`, `substitution_alerts_sms`, `calendar_notices_email`, `calendar_notices_email_type`, `no_of_learner_dashboard_records`, `no_of_home_events`, `no_of_notifications_to_display`, `substitution_alerts_email`, `start_page`, `no_of_home_notifications`, `created_at`, `daily_cap`, `substitution_policy_email`, `substitution_policy_email_type`, `session_alerts_display_time`, `timeoff_request_email_type`, `updated_at`, `coach_not_present_alert`, `notifications_email_type`, `calendar_notices_email_sending_schedule`, `no_of_substitution_alerts_to_display`, `notifications_email`, `notifications_email_sending_schedule`, `default_language_for_master_scheduler`, `substitution_alerts_display_time`, `timeoff_request_email`, `account_id`, `mails_sent`, `notifications_display_time`, `substitution_alerts_email_sending_schedule`, `no_of_home_announcements`) VALUES (NULL, 'PER', NULL, 5, NULL, 1, NULL, 'PER', NULL, 5, NULL, NULL, 'CALENDAR', 5, '2015-01-13 10:30:59', NULL, NULL, NULL, 10, NULL, '2015-01-13 10:30:59', NULL, 'PER', 'IMMEDIATELY', 5, NULL, 'IMMEDIATELY', NULL, 86400, NULL, 173, 0, NULL, 'IMMEDIATELY', 5)
Saving a log entry on create for PreferenceSetting record 26
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'PreferenceSetting', NULL, 26, 'rajkumar', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 173 AND session_start_time < '2015-01-13 10:40:59' AND session_start_time >= '2015-01-13 10:30:59' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 173 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 173 and session_start_time = '1970-01-17 10:45:43' and cancelled is false) LIMIT 1[0m
  [1m[35mSubstitution Load (0.8ms)[0m  Select DISTINCT * from substitutions s join coach_sessions c on s.coach_session_id = c.id join unavailable_despite_templates u where c.type NOT IN ('ExtraSession','Appointment') and s.coach_id = 173 and c.session_start_time >= '1970-01-01 05:00:00' and c.session_start_time < '1970-02-01 04:59:59' and u.coach_session_id = c.id and (s.coach_id != s.grabber_coach_id OR s.grabber_coach_id is null) and u.unavailability_type in (1,5) order by s.created_at, u.created_at desc;
Completed 200 OK in 63ms (Views: 24.4ms | ActiveRecord: 49.9ms)
  [1m[36mSQL (37.7ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email933@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:30:59', NULL, NULL, NULL, NULL, 'vramanan', 'en-US', 'CoachManager', NULL, '1', 'rs_email933@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:30:59', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 174
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Account', NULL, 174, 'rajkumar', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:30:59', '2015-01-13 10:30:59', 'en-US')
Saving a log entry on create for SupportLanguage record 92
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'SupportLanguage', NULL, 92, NULL, NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 174 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'rajkumar', '2015-01-13 10:30:59', 1, 'en-US', NULL, '2015-01-13 10:30:59', NULL, 'rajkumar', 24, '1', NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)
Saving a log entry on create for Coach record 175
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Account', NULL, 175, 'rajkumar', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 175
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('ReflexLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:30:59', NULL, 'KLE', '2015-01-13 10:30:59')[0m
Saving a log entry on create for Language record 134
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Language', NULL, 134, 'rajkumar', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 134 AND (`qualifications`.coach_id = 175 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 134 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 175 LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 175 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 175 and language_id = 134)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 175 LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:30:59', NULL, 134, 10, 175, '2015-01-13 10:30:59')[0m
Saving a log entry on create for Qualification record 137
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:30:59', '', '2015-01-13 10:30:59', 'Qualification', NULL, 137, 'rajkumar', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'HEB' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (38.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.1ms)[0m  BEGIN
  [1m[36mAccount Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email948@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.4ms)[0m  [1mINSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:00', NULL, NULL, NULL, NULL, 'test21', 'en-US', 'Coach', NULL, '1', 'rs_email948@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:00', 'test21', NULL, NULL)[0m
Saving a log entry on create for Account record 176
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:00', '', '2015-01-13 10:31:00', 'Account', NULL, 176, 'rajkumar', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.3ms)[0m  [1mUPDATE `accounts` SET `created_at` = '2015-01-12 10:31:00', `updated_at` = '2015-01-13 10:31:00' WHERE `accounts`.`id` = 176[0m
Saving a log entry on update for Account record 176
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'ARA' OR identifier = 'ARA') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:00', NULL, 'ARA', '2015-01-13 10:31:00')
Saving a log entry on create for Language record 135
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:00', '', '2015-01-13 10:31:00', 'Language', NULL, 135, 'rajkumar', NULL)[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachManager Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 176 LIMIT 1
  [1m[36mCoach Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 176 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 176 and language_id = 135)
  [1m[36mCoachManager Load (0.5ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 176 LIMIT 1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:00', NULL, 135, 10, 176, '2015-01-13 10:31:00')
Saving a log entry on create for Qualification record 138
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:00', '', '2015-01-13 10:31:00', 'Qualification', NULL, 138, 'rajkumar', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:00', '2015-01-13 10:31:00', 'en-US')[0m
Saving a log entry on create for SupportLanguage record 93
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:00', '', '2015-01-13 10:31:00', 'SupportLanguage', NULL, 93, NULL, NULL)
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 176 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.4ms)[0m  UPDATE `accounts` SET `created_at` = '2015-01-13 10:31:00', `updated_at` = '2015-01-13 10:31:00' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 176
Saving a log entry on update for Coach record 176
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'rajkumar', '2015-01-13 10:31:00', 1, 'en-US', NULL, '2015-01-13 10:31:00', NULL, 'rajkumar', 24, '1', NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)
Saving a log entry on create for Coach record 177
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:00', '', '2015-01-13 10:31:00', 'Account', NULL, 177, 'rajkumar', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 177
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 135 AND (`qualifications`.coach_id = 177 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 135 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 177 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 177 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 177 and language_id = 135)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 177 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:00', NULL, 135, 10, 177, '2015-01-13 10:31:00')
Saving a log entry on create for Qualification record 139
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:00', '', '2015-01-13 10:31:00', 'Qualification', NULL, 139, 'rajkumar', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions`[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 18 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`appointment_type_id`, `type`, `coach_id`, `session_end_time`, `external_village_id`, `created_at`, `session_start_time`, `topic_id`, `reassigned`, `attendance_count`, `name`, `cancelled`, `seconds_prior_to_session`, `session_status`, `coach_showed_up`, `language_identifier`, `updated_at`, `recurring_schedule_id`, `number_of_seats`, `eschool_session_id`, `single_number_unit`, `cancellation_reason`, `language_id`) VALUES (NULL, 'ConfirmedSession', 18, '2015-01-13 12:30:00', NULL, '2015-01-13 10:31:00', '2015-01-13 12:00:00', NULL, NULL, NULL, NULL, 0, NULL, 1, 0, 'ARA', '2015-01-13 10:31:00', NULL, 0, 345698, 1, NULL, 135)[0m
Saving a log entry on create for ConfirmedSession record 53
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:00', '', '2015-01-13 10:31:00', 'CoachSession', NULL, 53, 'rajkumar', NULL)
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 53) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 53 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `substitutions` (`reason`, `coach_id`, `lang_id`, `grabbed_at`, `grabbed`, `created_at`, `session_type`, `cancelled`, `was_reassigned`, `grabber_coach_id`, `updated_at`, `coach_session_id`) VALUES ('Electricity Outage', 177, NULL, NULL, 0, '2015-01-13 10:31:00', 'normal', 0, NULL, NULL, '2015-01-13 10:31:00', 53)[0m
Saving a log entry on create for Substitution record 66
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:00', '', '2015-01-13 10:31:00', 'Substitution', NULL, 66, 'rajkumar', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 176 AND (max_unit > 0))
  [1m[36mPreferenceSetting Load (0.2ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 176) LIMIT 1[0m
  [1m[35mPreferenceSetting Load (0.1ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 176) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `preference_settings` (`no_of_calendar_notices_to_display`, `substitution_alerts_email_type`, `calendar_notices_display_time`, `no_of_home_substitutions`, `substitution_policy_email_sending_schedule`, `substitution_alerts_sms`, `calendar_notices_email`, `calendar_notices_email_type`, `no_of_learner_dashboard_records`, `no_of_home_events`, `no_of_notifications_to_display`, `substitution_alerts_email`, `start_page`, `no_of_home_notifications`, `created_at`, `daily_cap`, `substitution_policy_email`, `substitution_policy_email_type`, `session_alerts_display_time`, `timeoff_request_email_type`, `updated_at`, `coach_not_present_alert`, `notifications_email_type`, `calendar_notices_email_sending_schedule`, `no_of_substitution_alerts_to_display`, `notifications_email`, `notifications_email_sending_schedule`, `default_language_for_master_scheduler`, `substitution_alerts_display_time`, `timeoff_request_email`, `account_id`, `mails_sent`, `notifications_display_time`, `substitution_alerts_email_sending_schedule`, `no_of_home_announcements`) VALUES (NULL, 'PER', NULL, 5, NULL, 1, NULL, 'PER', NULL, 5, NULL, NULL, 'CALENDAR', 5, '2015-01-13 10:31:00', NULL, NULL, NULL, 10, NULL, '2015-01-13 10:31:00', NULL, 'PER', 'IMMEDIATELY', 5, NULL, 'IMMEDIATELY', NULL, 86400, NULL, 176, 0, NULL, 'IMMEDIATELY', 5)
Saving a log entry on create for PreferenceSetting record 27
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:00', '', '2015-01-13 10:31:00', 'PreferenceSetting', NULL, 27, 'test21', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 176 AND session_start_time < '2015-01-13 10:41:00' AND session_start_time >= '2015-01-13 10:31:00' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 135 LIMIT 1
  [1m[36mConfirmedSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:29:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:29:00')
  [1m[36mLocalSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:29:00' AND action != 'create')[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:30:00' AND session_start_time < '2015-01-13 12:59:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:30:00' AND session_start_time < '2015-01-13 12:59:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:30:00' AND session_start_time < '2015-01-13 12:59:00' AND action != 'create')
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 176 AND language_id = 135) ORDER BY qualifications.id DESC LIMIT 1[0m
Completed 200 OK in 30ms (Views: 0.4ms | ActiveRecord: 100.2ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 176 AND (max_unit > 0))
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 176 AND session_start_time < '2015-01-13 10:41:00' AND session_start_time >= '2015-01-13 10:31:00' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:29:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:29:00')[0m
  [1m[35mLocalSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:29:00' AND action != 'create')
  [1m[36mConfirmedSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:30:00' AND session_start_time < '2015-01-13 12:59:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:30:00' AND session_start_time < '2015-01-13 12:59:00')
  [1m[36mLocalSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:30:00' AND session_start_time < '2015-01-13 12:59:00' AND action != 'create')[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 176 AND language_id = 135) ORDER BY qualifications.id DESC LIMIT 1
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 2.1ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 176 AND (max_unit > 0))[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 176 AND session_start_time < '2015-01-13 10:41:01' AND session_start_time >= '2015-01-13 10:31:01' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:29:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:29:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:29:00' AND action != 'create')[0m
  [1m[35mConfirmedSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:30:00' AND session_start_time < '2015-01-13 12:59:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:30:00' AND session_start_time < '2015-01-13 12:59:00')[0m
  [1m[35mLocalSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:30:00' AND session_start_time < '2015-01-13 12:59:00' AND action != 'create')
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 176 AND language_id = 135) ORDER BY qualifications.id DESC LIMIT 1[0m
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 1.9ms)
  Processing by SubstitutionController#grab_substitution as HTML
  [1m[35mSQL (0.4ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 176 AND (max_unit > 0))
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 176 AND session_start_time < '2015-01-13 10:41:01' AND session_start_time >= '2015-01-13 10:31:01' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mConfirmedSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:29:00')
  [1m[36mAppointment Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:29:00')[0m
  [1m[35mLocalSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:29:00' AND action != 'create')
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:30:00' AND session_start_time < '2015-01-13 12:59:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:30:00' AND session_start_time < '2015-01-13 12:59:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 176 AND session_start_time >= '2015-01-13 12:30:00' AND session_start_time < '2015-01-13 12:59:00' AND action != 'create')[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 176 AND language_id = 135) ORDER BY qualifications.id DESC LIMIT 1
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 2.1ms)
  [1m[36mSQL (46.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email168@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:01', NULL, NULL, NULL, NULL, 'vramanan', 'en-US', 'CoachManager', NULL, '1', 'rs_email168@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:01', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 178
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Account', NULL, 178, 'test21', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:01', '2015-01-13 10:31:01', 'en-US')
Saving a log entry on create for SupportLanguage record 94
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'SupportLanguage', NULL, 94, NULL, NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 178 LIMIT 1[0m
  Processing by SubstitutionController#substitutions as HTML
  [1m[35mLanguage Load (0.4ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 178) AND ((max_unit is NULL)))
  [1m[36mSubstitution Load (0.6ms)[0m  [1mSELECT `substitutions`.`id` AS t0_r0, `substitutions`.`coach_id` AS t0_r1, `substitutions`.`grabber_coach_id` AS t0_r2, `substitutions`.`grabbed` AS t0_r3, `substitutions`.`lang_id` AS t0_r4, `substitutions`.`coach_session_id` AS t0_r5, `substitutions`.`created_at` AS t0_r6, `substitutions`.`updated_at` AS t0_r7, `substitutions`.`grabbed_at` AS t0_r8, `substitutions`.`cancelled` AS t0_r9, `substitutions`.`was_reassigned` AS t0_r10, `substitutions`.`session_type` AS t0_r11, `substitutions`.`reason` AS t0_r12, `coach_sessions`.`id` AS t1_r0, `coach_sessions`.`eschool_session_id` AS t1_r1, `coach_sessions`.`session_start_time` AS t1_r2, `coach_sessions`.`created_at` AS t1_r3, `coach_sessions`.`updated_at` AS t1_r4, `coach_sessions`.`cancelled` AS t1_r5, `coach_sessions`.`external_village_id` AS t1_r6, `coach_sessions`.`language_identifier` AS t1_r7, `coach_sessions`.`single_number_unit` AS t1_r8, `coach_sessions`.`number_of_seats` AS t1_r9, `coach_sessions`.`attendance_count` AS t1_r10, `coach_sessions`.`coach_showed_up` AS t1_r11, `coach_sessions`.`seconds_prior_to_session` AS t1_r12, `coach_sessions`.`recurring_schedule_id` AS t1_r13, `coach_sessions`.`coach_id` AS t1_r14, `coach_sessions`.`session_status` AS t1_r15, `coach_sessions`.`type` AS t1_r16, `coach_sessions`.`name` AS t1_r17, `coach_sessions`.`session_end_time` AS t1_r18, `coach_sessions`.`language_id` AS t1_r19, `coach_sessions`.`cancellation_reason` AS t1_r20, `coach_sessions`.`topic_id` AS t1_r21, `coach_sessions`.`reassigned` AS t1_r22, `coach_sessions`.`appointment_type_id` AS t1_r23, `accounts`.`id` AS t2_r0, `accounts`.`user_name` AS t2_r1, `accounts`.`full_name` AS t2_r2, `accounts`.`preferred_name` AS t2_r3, `accounts`.`rs_email` AS t2_r4, `accounts`.`personal_email` AS t2_r5, `accounts`.`skype_id` AS t2_r6, `accounts`.`primary_phone` AS t2_r7, `accounts`.`secondary_phone` AS t2_r8, `accounts`.`birth_date` AS t2_r9, `accounts`.`hire_date` AS t2_r10, `accounts`.`bio` AS t2_r11, `accounts`.`manager_notes` AS t2_r12, `accounts`.`active` AS t2_r13, `accounts`.`manager_id` AS t2_r14, `accounts`.`created_at` AS t2_r15, `accounts`.`updated_at` AS t2_r16, `accounts`.`type` AS t2_r17, `accounts`.`region_id` AS t2_r18, `accounts`.`next_session_alert_in` AS t2_r19, `accounts`.`last_logout` AS t2_r20, `accounts`.`country` AS t2_r21, `accounts`.`native_language` AS t2_r22, `accounts`.`other_languages` AS t2_r23, `accounts`.`address` AS t2_r24, `accounts`.`lotus_qualified` AS t2_r25, `accounts`.`next_substitution_alert_in` AS t2_r26, `accounts`.`mobile_phone` AS t2_r27, `accounts`.`sessions_allowed_per_week` AS t2_r28, `accounts`.`is_supervisor` AS t2_r29, `accounts`.`mobile_country_code` AS t2_r30, `accounts`.`aim_id` AS t2_r31, `accounts`.`primary_country_code` AS t2_r32, `accounts`.`photo_file_name` AS t2_r33, `accounts`.`photo_content_type` AS t2_r34, `accounts`.`photo_file_size` AS t2_r35, `accounts`.`photo_file` AS t2_r36, `accounts`.`coach_guid` AS t2_r37, `languages`.`id` AS t3_r0, `languages`.`identifier` AS t3_r1, `languages`.`created_at` AS t3_r2, `languages`.`updated_at` AS t3_r3, `languages`.`last_pushed_week` AS t3_r4, `languages`.`type` AS t3_r5, `languages`.`duration` AS t3_r6, `languages`.`connection_type` AS t3_r7, `languages`.`external_scheduler` AS t3_r8 FROM `substitutions` LEFT OUTER JOIN `coach_sessions` ON `coach_sessions`.`id` = `substitutions`.`coach_session_id` LEFT OUTER JOIN `accounts` ON `accounts`.`id` = `substitutions`.`coach_id` AND `accounts`.`type` = 'Coach' LEFT OUTER JOIN `coach_sessions` `languages_substitutions_join` ON `substitutions`.`coach_session_id` = `languages_substitutions_join`.`id` LEFT OUTER JOIN `languages` ON `languages`.`id` = `languages_substitutions_join`.`language_id` WHERE (coach_sessions.language_identifier IN (NULL) AND coach_sessions.session_start_time >= '2015-01-13 09:31:00' AND coach_sessions.session_start_time < '2015-01-20 10:00:00' AND substitutions.cancelled = 0 AND grabbed = 0) ORDER BY coach_sessions.session_start_time[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-NED-L' OR identifier = 'TMM-NED-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-NED-P' OR identifier = 'TMM-NED-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ENG-L' OR identifier = 'TMM-ENG-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ENG-P' OR identifier = 'TMM-ENG-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-FRA-L' OR identifier = 'TMM-FRA-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-FRA-P' OR identifier = 'TMM-FRA-P') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-MCH-L' OR identifier = 'TMM-MCH-L') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-DEU-L' OR identifier = 'TMM-DEU-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-DEU-P' OR identifier = 'TMM-DEU-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ITA-L' OR identifier = 'TMM-ITA-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ITA-P' OR identifier = 'TMM-ITA-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ESP-L' OR identifier = 'TMM-ESP-L') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 'TMM-ESP-P' OR identifier = 'TMM-ESP-P') ORDER BY languages.id DESC LIMIT 1
  [1m[36mAlert Load (0.1ms)[0m  [1mSELECT `alerts`.* FROM `alerts` WHERE (active = 1) ORDER BY alerts.id DESC LIMIT 1[0m
Rendered shared/_editor_authenticate.html.erb (4.1ms)
Rendered shared/_header.html.erb (6.5ms)
Rendered shared/_default_navigation.html.erb (12.6ms)
Rendered shared/_profile_links.html.erb (1.4ms)
Rendered shared/_body_content.html.erb (16.4ms)
Completed 200 OK in 64ms (Views: 44.0ms | ActiveRecord: 52.4ms)
  [1m[35mSQL (41.2ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email852@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.4ms)[0m  INSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:01', NULL, NULL, NULL, NULL, 'test21', 'en-US', 'CoachManager', NULL, '1', 'rs_email852@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:01', 'test21', NULL, NULL)
Saving a log entry on create for Account record 179
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Account', NULL, 179, 'vramanan', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:01', '2015-01-13 10:31:01', 'en-US')[0m
Saving a log entry on create for SupportLanguage record 95
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'SupportLanguage', NULL, 95, NULL, NULL)
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 179 LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 'KLE' OR identifier = 'KLE') ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'rajkumar', '2015-01-13 10:31:01', 1, 'en-US', NULL, '2015-01-13 10:31:01', NULL, 'rajkumar', 24, '1', NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)
Saving a log entry on create for Coach record 180
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Account', NULL, 180, 'vramanan', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 180
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('ReflexLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:01', NULL, 'KLE', '2015-01-13 10:31:01')[0m
Saving a log entry on create for Language record 136
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Language', NULL, 136, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 136 AND (`qualifications`.coach_id = 180 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 136 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 180 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 180 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 180 and language_id = 136)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 180 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:01', NULL, 136, 10, 180, '2015-01-13 10:31:01')[0m
Saving a log entry on create for Qualification record 140
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Qualification', NULL, 140, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 180 AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`appointment_type_id`, `type`, `coach_id`, `session_end_time`, `external_village_id`, `created_at`, `session_start_time`, `topic_id`, `reassigned`, `attendance_count`, `name`, `cancelled`, `seconds_prior_to_session`, `session_status`, `coach_showed_up`, `language_identifier`, `updated_at`, `recurring_schedule_id`, `number_of_seats`, `eschool_session_id`, `single_number_unit`, `cancellation_reason`, `language_id`) VALUES (NULL, 'ConfirmedSession', 180, '2015-01-13 12:30:00', NULL, '2015-01-13 10:31:01', '2015-01-13 12:00:00', NULL, NULL, NULL, NULL, 0, NULL, 1, 0, 'KLE', '2015-01-13 10:31:01', NULL, 0, NULL, 1, NULL, 136)[0m
Saving a log entry on create for ConfirmedSession record 54
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'CoachSession', NULL, 54, 'vramanan', NULL)
  [1m[36mSessionMetadata Load (0.3ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 54) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 180 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 180) AND ((max_unit > 0)))[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `unavailable_despite_templates` (`comments`, `start_date`, `ancestry`, `coach_id`, `end_date`, `created_at`, `approval_status`, `updated_at`, `unavailability_type`, `coach_session_id`) VALUES ('Auto Approved - Coach requested Substitute', '2015-01-13 12:00:00', NULL, 180, '2015-01-13 12:30:00', '2015-01-13 10:31:01', 1, '2015-01-13 10:31:01', 1, 54)
Saving a log entry on create for UnavailableDespiteTemplate record 27
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'UnavailableDespiteTemplate', NULL, 27, 'vramanan', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 54 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`reason`, `coach_id`, `lang_id`, `grabbed_at`, `grabbed`, `created_at`, `session_type`, `cancelled`, `was_reassigned`, `grabber_coach_id`, `updated_at`, `coach_session_id`) VALUES (NULL, 180, NULL, NULL, 0, '2015-01-13 10:31:01', 'normal', 0, 0, NULL, '2015-01-13 10:31:01', 54)[0m
Saving a log entry on create for Substitution record 67
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Substitution', NULL, 67, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 12:00:00' AND session_start_time < '2015-01-13 12:30:00' AND id <> 54) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 10:31:01' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 54[0m
Saving a log entry on update for ConfirmedSession record 54
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:31:01', 'coach_id', '2015-01-13 10:31:01', 'CoachSession', 180, 54, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 136 OR identifier = 136) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.1ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoach Load (0.8ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '136')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 136 OR identifier = 136) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.1ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoachManager Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '136')[0m
  [1m[35mTriggerEvent Load (0.2ms)[0m  SELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1
  [1m[36mNotification Load (0.0ms)[0m  [1mSELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1[0m
  Processing by SubstitutionController#substitutions as HTML
Completed 500 Internal Server Error in 1ms
  [1m[35mSQL (46.5ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email102@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:01', NULL, NULL, NULL, NULL, 'vramanan', 'en-US', 'CoachManager', NULL, '1', 'rs_email102@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:01', 'vramanan', NULL, NULL)
Saving a log entry on create for Account record 181
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Account', NULL, 181, 'test21', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:01', '2015-01-13 10:31:01', 'en-US')[0m
Saving a log entry on create for SupportLanguage record 96
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'SupportLanguage', NULL, 96, NULL, NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 181 LIMIT 1
  Processing by SubstitutionController#reason_for_sub_request as JS
Rendered shared/_show_reasons.html.erb (0.9ms)
Rendered substitution/_reason_for_sub_request.html.erb (3.2ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 103.0ms)
  [1m[36mSQL (27.4ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email28@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:01', NULL, NULL, NULL, NULL, 'vramanan', 'en-US', 'CoachManager', NULL, '1', 'rs_email28@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:01', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 182
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Account', NULL, 182, 'vramanan', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:01', '2015-01-13 10:31:01', 'en-US')
Saving a log entry on create for SupportLanguage record 97
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'SupportLanguage', NULL, 97, NULL, NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 182 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'TestCoach', '2015-01-13 10:31:01', 1, 'en-US', NULL, '2015-01-13 10:31:01', NULL, 'TestCoach', 24, '1', NULL, NULL, NULL, 'TestCoach@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)
Saving a log entry on create for Coach record 183
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Account', NULL, 183, 'vramanan', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 183
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:01', NULL, 'ARA', '2015-01-13 10:31:01')[0m
Saving a log entry on create for Language record 137
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Language', NULL, 137, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 137 AND (`qualifications`.coach_id = 183 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 137 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 183 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 183 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 183 and language_id = 137)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 183 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:01', NULL, 137, 10, 183, '2015-01-13 10:31:01')[0m
Saving a log entry on create for Qualification record 141
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Qualification', NULL, 141, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:01', NULL, 'CHI', '2015-01-13 10:31:01')[0m
Saving a log entry on create for Language record 138
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Language', NULL, 138, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 138 AND (`qualifications`.coach_id = 183 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 138 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 183 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 183 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 183 and language_id = 138)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 183 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:01', NULL, 138, 10, 183, '2015-01-13 10:31:01')[0m
Saving a log entry on create for Qualification record 142
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Qualification', NULL, 142, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:01', NULL, 'ENG', '2015-01-13 10:31:01')[0m
Saving a log entry on create for Language record 139
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Language', NULL, 139, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 139 AND (`qualifications`.coach_id = 183 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 139 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 183 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 183 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 183 and language_id = 139)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 183 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:01', NULL, 139, 10, 183, '2015-01-13 10:31:01')[0m
Saving a log entry on create for Qualification record 143
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Qualification', NULL, 143, 'vramanan', NULL)
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#request_substitute_for_coach as JS
  Parameters: {"time"=>"2010-09-06 11:00:00", "current_coach_id"=>183, "lang_identifier"=>"ARA"}
  [1m[35mCoachSession Load (0.4ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 and coach_id = 183 and session_start_time = '2010-09-06 11:00:00') ORDER BY coach_sessions.id DESC LIMIT 1
Completed 500 Internal Server Error in 3ms (Views: 0.4ms | ActiveRecord: 39.2ms)
  [1m[36mSQL (33.6ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email150@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:01', NULL, NULL, NULL, NULL, 'vramanan', 'en-US', 'CoachManager', NULL, '1', 'rs_email150@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:01', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 184
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Account', NULL, 184, 'vramanan', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:01', '2015-01-13 10:31:01', 'en-US')
Saving a log entry on create for SupportLanguage record 98
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'SupportLanguage', NULL, 98, NULL, NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 184 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'TestCoach', '2015-01-13 10:31:01', 1, 'en-US', NULL, '2015-01-13 10:31:01', NULL, 'TestCoach', 24, '1', NULL, NULL, NULL, 'TestCoach@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)
Saving a log entry on create for Coach record 185
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Account', NULL, 185, 'vramanan', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 185
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:01', NULL, 'ARA', '2015-01-13 10:31:01')[0m
Saving a log entry on create for Language record 140
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Language', NULL, 140, 'vramanan', NULL)
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 140 AND (`qualifications`.coach_id = 185 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 140 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 185 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 185 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 185 and language_id = 140)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 185 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:01', NULL, 140, 10, 185, '2015-01-13 10:31:01')[0m
Saving a log entry on create for Qualification record 144
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Qualification', NULL, 144, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:01', NULL, 'CHI', '2015-01-13 10:31:01')[0m
Saving a log entry on create for Language record 141
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Language', NULL, 141, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 141 AND (`qualifications`.coach_id = 185 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 141 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 185 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 185 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 185 and language_id = 141)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 185 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:01', NULL, 141, 10, 185, '2015-01-13 10:31:01')[0m
Saving a log entry on create for Qualification record 145
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Qualification', NULL, 145, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:01', NULL, 'ENG', '2015-01-13 10:31:01')[0m
Saving a log entry on create for Language record 142
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Language', NULL, 142, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 142 AND (`qualifications`.coach_id = 185 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 142 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 185 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 185 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 185 and language_id = 142)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 185 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:01', NULL, 142, 10, 185, '2015-01-13 10:31:01')[0m
Saving a log entry on create for Qualification record 146
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Qualification', NULL, 146, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  Processing by SubstitutionController#request_substitute_for_coach as JS
  Parameters: {"time"=>"2010-09-06 11:00:00", "request_from"=>"dashboard", "current_coach_id"=>185, "lang_identifier"=>"ARA"}
  [1m[35mCoachSession Load (0.4ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 and coach_id = 185 and session_start_time = '2010-09-06 11:00:00') ORDER BY coach_sessions.id DESC LIMIT 1
Completed 500 Internal Server Error in 3ms (Views: 0.4ms | ActiveRecord: 45.6ms)
  [1m[36mSQL (34.8ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email83@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:01', NULL, NULL, NULL, NULL, 'vramanan', 'en-US', 'CoachManager', NULL, '1', 'rs_email83@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:01', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 186
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Account', NULL, 186, 'vramanan', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:01', '2015-01-13 10:31:01', 'en-US')
Saving a log entry on create for SupportLanguage record 99
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'SupportLanguage', NULL, 99, NULL, NULL)[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 186 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'TestCoach', '2015-01-13 10:31:01', 1, 'en-US', NULL, '2015-01-13 10:31:01', NULL, 'TestCoach', 24, '1', NULL, NULL, NULL, 'TestCoach@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)
Saving a log entry on create for Coach record 187
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Account', NULL, 187, 'vramanan', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 187
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:01', NULL, 'ARA', '2015-01-13 10:31:01')[0m
Saving a log entry on create for Language record 143
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Language', NULL, 143, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 143 AND (`qualifications`.coach_id = 187 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 143 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 187 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 187 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 187 and language_id = 143)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 187 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:01', NULL, 143, 10, 187, '2015-01-13 10:31:01')[0m
Saving a log entry on create for Qualification record 147
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:01', '', '2015-01-13 10:31:01', 'Qualification', NULL, 147, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (21.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:02', NULL, 'CHI', '2015-01-13 10:31:02')[0m
Saving a log entry on create for Language record 144
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Language', NULL, 144, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.3ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 144 AND (`qualifications`.coach_id = 187 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 144 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 187 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 187 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 187 and language_id = 144)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 187 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:02', NULL, 144, 10, 187, '2015-01-13 10:31:02')[0m
Saving a log entry on create for Qualification record 148
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Qualification', NULL, 148, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:02', NULL, 'ENG', '2015-01-13 10:31:02')[0m
Saving a log entry on create for Language record 145
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Language', NULL, 145, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 145 AND (`qualifications`.coach_id = 187 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 145 LIMIT 1
  [1m[36mCoachManager Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 187 LIMIT 1[0m
  [1m[35mCoach Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 187 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 187 and language_id = 145)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 187 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:02', NULL, 145, 10, 187, '2015-01-13 10:31:02')[0m
Saving a log entry on create for Qualification record 149
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Qualification', NULL, 149, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (29.4ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email442@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:02', NULL, NULL, NULL, NULL, 'vramanan', 'en-US', 'CoachManager', NULL, '1', 'rs_email442@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:02', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 188
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Account', NULL, 188, 'vramanan', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:02', '2015-01-13 10:31:02', 'en-US')
Saving a log entry on create for SupportLanguage record 100
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'SupportLanguage', NULL, 100, NULL, NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 188 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'TestCoach' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'TestCoach') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'TestCoach@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'TestCoach', '2015-01-13 10:31:02', 1, 'en-US', NULL, '2015-01-13 10:31:02', NULL, 'TestCoach', 24, '1', NULL, NULL, NULL, 'TestCoach@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)
Saving a log entry on create for Coach record 189
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Account', NULL, 189, 'vramanan', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 189
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ARA' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ARA') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:02', NULL, 'ARA', '2015-01-13 10:31:02')[0m
Saving a log entry on create for Language record 146
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Language', NULL, 146, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 146 AND (`qualifications`.coach_id = 189 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 146 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 189 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 189 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 189 and language_id = 146)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 189 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:02', NULL, 146, 10, 189, '2015-01-13 10:31:02')[0m
Saving a log entry on create for Qualification record 150
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Qualification', NULL, 150, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'CHI' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'CHI') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:02', NULL, 'CHI', '2015-01-13 10:31:02')[0m
Saving a log entry on create for Language record 147
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Language', NULL, 147, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 147 AND (`qualifications`.coach_id = 189 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 147 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 189 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 189 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 189 and language_id = 147)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 189 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:02', NULL, 147, 10, 189, '2015-01-13 10:31:02')[0m
Saving a log entry on create for Qualification record 151
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Qualification', NULL, 151, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ENG' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'ENG') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('TotaleLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:02', NULL, 'ENG', '2015-01-13 10:31:02')[0m
Saving a log entry on create for Language record 148
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Language', NULL, 148, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 148 AND (`qualifications`.coach_id = 189 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 148 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 189 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 189 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 189 and language_id = 148)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 189 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:02', NULL, 148, 10, 189, '2015-01-13 10:31:02')[0m
Saving a log entry on create for Qualification record 152
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Qualification', NULL, 152, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (33.1ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email745@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:02', NULL, NULL, NULL, NULL, 'vramanan', 'en-US', 'CoachManager', NULL, '1', 'rs_email745@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:02', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 190
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Account', NULL, 190, 'vramanan', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:02', '2015-01-13 10:31:02', 'en-US')
Saving a log entry on create for SupportLanguage record 101
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'SupportLanguage', NULL, 101, NULL, NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 190 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'rajkumar', '2015-01-13 10:31:02', 1, 'en-US', NULL, '2015-01-13 10:31:02', NULL, 'rajkumar', 24, '1', NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)
Saving a log entry on create for Coach record 191
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Account', NULL, 191, 'vramanan', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 191
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('ReflexLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:02', NULL, 'KLE', '2015-01-13 10:31:02')[0m
Saving a log entry on create for Language record 149
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Language', NULL, 149, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 149 AND (`qualifications`.coach_id = 191 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 149 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 191 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 191 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 191 and language_id = 149)[0m
  [1m[35mCoachManager Load (0.2ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 191 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:02', NULL, 149, 10, 191, '2015-01-13 10:31:02')[0m
Saving a log entry on create for Qualification record 153
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Qualification', NULL, 153, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'HEB' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mSQL (30.2ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'rajkumar', '2015-01-13 10:31:02', 1, 'en-US', NULL, '2015-01-13 10:31:02', NULL, 'rajkumar', 24, '1', NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)[0m
Saving a log entry on create for Coach record 192
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Account', NULL, 192, 'vramanan', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 192
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:02', '2015-01-13 10:31:02', 'en-US')
Saving a log entry on create for SupportLanguage record 102
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'SupportLanguage', NULL, 102, NULL, NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('ReflexLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:02', NULL, 'KLE', '2015-01-13 10:31:02')
Saving a log entry on create for Language record 150
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Language', NULL, 150, 'vramanan', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 150 AND (`qualifications`.coach_id = 192 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 150 LIMIT 1[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 192 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 192 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 192 and language_id = 150)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 192 LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:02', NULL, 150, 10, 192, '2015-01-13 10:31:02')
Saving a log entry on create for Qualification record 154
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Qualification', NULL, 154, 'vramanan', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 192
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 192
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `accounts` SET `created_at` = '2015-01-12 10:31:02', `updated_at` = '2015-01-13 10:31:02' WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 192[0m
Saving a log entry on update for Coach record 192
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE (`qualifications`.coach_id = 192 AND (max_unit > 0))[0m
  [1m[35mSupportLanguage Load (0.1ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mAccount Load (0.2ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 192 LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 192 AND session_end_time > '2015-01-13 14:00:00' AND session_start_time < '2015-01-13 14:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`appointment_type_id`, `type`, `coach_id`, `session_end_time`, `external_village_id`, `created_at`, `session_start_time`, `topic_id`, `reassigned`, `attendance_count`, `name`, `cancelled`, `seconds_prior_to_session`, `session_status`, `coach_showed_up`, `language_identifier`, `updated_at`, `recurring_schedule_id`, `number_of_seats`, `eschool_session_id`, `single_number_unit`, `cancellation_reason`, `language_id`) VALUES (NULL, 'ConfirmedSession', 192, '2015-01-13 14:30:00', NULL, '2015-01-13 10:31:02', '2015-01-13 14:00:00', NULL, NULL, NULL, NULL, 0, NULL, 1, 0, 'KLE', '2015-01-13 10:31:02', NULL, 0, NULL, 1, NULL, 150)[0m
Saving a log entry on create for ConfirmedSession record 55
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'CoachSession', NULL, 55, 'vramanan', NULL)
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 55) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 192 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 192) AND ((max_unit > 0)))[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `unavailable_despite_templates` (`comments`, `start_date`, `ancestry`, `coach_id`, `end_date`, `created_at`, `approval_status`, `updated_at`, `unavailability_type`, `coach_session_id`) VALUES ('Auto Approved - Coach requested Substitute', '2015-01-13 14:00:00', NULL, 192, '2015-01-13 14:30:00', '2015-01-13 10:31:02', 1, '2015-01-13 10:31:02', 1, 55)
Saving a log entry on create for UnavailableDespiteTemplate record 28
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'UnavailableDespiteTemplate', NULL, 28, 'vramanan', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 55 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`reason`, `coach_id`, `lang_id`, `grabbed_at`, `grabbed`, `created_at`, `session_type`, `cancelled`, `was_reassigned`, `grabber_coach_id`, `updated_at`, `coach_session_id`) VALUES (NULL, 192, NULL, NULL, 0, '2015-01-13 10:31:02', 'normal', 0, 0, NULL, '2015-01-13 10:31:02', 55)[0m
Saving a log entry on create for Substitution record 68
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Substitution', NULL, 68, 'vramanan', NULL)
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.3ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 14:00:00' AND session_start_time < '2015-01-13 14:30:00' AND id <> 55) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.3ms)[0m  [1mUPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 10:31:02' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 55[0m
Saving a log entry on update for ConfirmedSession record 55
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:31:02', 'coach_id', '2015-01-13 10:31:02', 'CoachSession', 192, 55, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 150 OR identifier = 150) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.1ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoach Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '150')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 150 OR identifier = 150) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoachManager Load (0.8ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '150')[0m
  [1m[35mTriggerEvent Load (0.1ms)[0m  SELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1
  [1m[36mNotification Load (0.0ms)[0m  [1mSELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1[0m
  Processing by SubstitutionController#substitutions_alert as HTML
  [1m[35mSQL (0.3ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (`qualifications`.coach_id = 192 AND (max_unit > 0))
  [1m[36mPreferenceSetting Load (0.2ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 192) LIMIT 1[0m
  [1m[35mPreferenceSetting Load (0.1ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 192) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `preference_settings` (`no_of_calendar_notices_to_display`, `substitution_alerts_email_type`, `calendar_notices_display_time`, `no_of_home_substitutions`, `substitution_policy_email_sending_schedule`, `substitution_alerts_sms`, `calendar_notices_email`, `calendar_notices_email_type`, `no_of_learner_dashboard_records`, `no_of_home_events`, `no_of_notifications_to_display`, `substitution_alerts_email`, `start_page`, `no_of_home_notifications`, `created_at`, `daily_cap`, `substitution_policy_email`, `substitution_policy_email_type`, `session_alerts_display_time`, `timeoff_request_email_type`, `updated_at`, `coach_not_present_alert`, `notifications_email_type`, `calendar_notices_email_sending_schedule`, `no_of_substitution_alerts_to_display`, `notifications_email`, `notifications_email_sending_schedule`, `default_language_for_master_scheduler`, `substitution_alerts_display_time`, `timeoff_request_email`, `account_id`, `mails_sent`, `notifications_display_time`, `substitution_alerts_email_sending_schedule`, `no_of_home_announcements`) VALUES (NULL, 'PER', NULL, 5, NULL, 1, NULL, 'PER', NULL, 5, NULL, NULL, 'CALENDAR', 5, '2015-01-13 10:31:02', NULL, NULL, NULL, 10, NULL, '2015-01-13 10:31:02', NULL, 'PER', 'IMMEDIATELY', 5, NULL, 'IMMEDIATELY', NULL, 86400, NULL, 192, 0, NULL, 'IMMEDIATELY', 5)
Saving a log entry on create for PreferenceSetting record 28
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'PreferenceSetting', NULL, 28, 'rajkumar', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (coach_id = 192 AND session_start_time < '2015-01-13 10:41:02' AND session_start_time >= '2015-01-13 10:31:02' AND cancelled = 0 AND session_status = 1) ORDER BY session_start_time LIMIT 1[0m
  [1m[35mShownSubstitutions Load (0.1ms)[0m  SELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 192 LIMIT 1
  [1m[36mSubstitution Load (0.6ms)[0m  [1mSELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions, qualifications, languages) on (coach_sessions.id = substitutions.coach_session_id and languages.identifier = coach_sessions.language_identifier and languages.id = qualifications.language_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 10:00:00' and coach_sessions.session_start_time <= '2015-01-14 10:31:02' and coach_sessions.session_end_time > '2015-01-13 10:31:02' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL and qualifications.coach_id = 192) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 55 LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 150 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 55)) LIMIT 1
  [1m[36mConfirmedSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND (cancelled = 0 AND coach_id = 192 AND session_start_time >= '2015-01-13 14:00:00' AND session_start_time < '2015-01-13 14:30:00')[0m
  [1m[35mAppointment Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`type` = 'Appointment' AND (cancelled = 0 AND coach_id = 192 AND session_start_time >= '2015-01-13 14:00:00' AND session_start_time < '2015-01-13 14:30:00')
  [1m[36mLocalSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` INNER JOIN `session_metadata` ON `session_metadata`.`coach_session_id` = `coach_sessions`.`id` WHERE `coach_sessions`.`type` = 'LocalSession' AND (cancelled = 0 AND coach_id = 192 AND session_start_time >= '2015-01-13 14:00:00' AND session_start_time < '2015-01-13 14:30:00' AND action != 'create')[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 192) AND ((max_unit > 0)))
  [1m[36mCoachRecurringSchedule Load (0.3ms)[0m  [1mSELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 192 and day_index = 2 and start_time = '14:00:00' and recurring_start_date <= '2015-01-13 14:00:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 14:00:00')) ORDER BY recurring_start_date DESC LIMIT 1[0m
  [1m[35mCoachRecurringSchedule Load (0.3ms)[0m  SELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 192 and day_index = 2 and start_time = '13:00:00' and recurring_start_date <= '2015-01-13 13:00:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 13:00:00')) ORDER BY recurring_start_date DESC LIMIT 1
  [1m[36mCoachRecurringSchedule Load (0.2ms)[0m  [1mSELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 192 and day_index = 2 and start_time = '14:30:00' and recurring_start_date <= '2015-01-13 14:30:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 14:30:00')) ORDER BY recurring_start_date DESC LIMIT 1[0m
  [1m[35mCoachRecurringSchedule Load (0.2ms)[0m  SELECT `coach_recurring_schedules`.* FROM `coach_recurring_schedules` WHERE (coach_id = 192 and day_index = 2 and start_time = '13:30:00' and recurring_start_date <= '2015-01-13 13:30:00' and (recurring_end_date IS NULL or recurring_end_date >= '2015-01-13 13:30:00')) ORDER BY recurring_start_date DESC LIMIT 1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT max_unit FROM `qualifications` WHERE (max_unit IS NOT NULL AND coach_id = 192 AND language_id = 150) ORDER BY qualifications.id DESC LIMIT 1[0m
  [1m[35mCoach Load (0.5ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` INNER JOIN `qualifications` ON `accounts`.id = `qualifications`.coach_id WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND ((`qualifications`.language_id = 150) AND ((max_unit > 0 and active = 1))) ORDER BY trim(full_name)
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 150 AND `qualifications`.`coach_id` = 192 LIMIT 1[0m
Rendered substitution/_substitutions_alert.html.erb (150.9ms)
Completed 200 OK in 188ms (Views: 152.3ms | ActiveRecord: 196.8ms)
  [1m[35mSQL (30.2ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email864@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:02', NULL, NULL, NULL, NULL, 'vramanan', 'en-US', 'CoachManager', NULL, '1', 'rs_email864@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:02', 'vramanan', NULL, NULL)
Saving a log entry on create for Account record 193
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Account', NULL, 193, 'rajkumar', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:02', '2015-01-13 10:31:02', 'en-US')[0m
Saving a log entry on create for SupportLanguage record 103
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'SupportLanguage', NULL, 103, NULL, NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 193 LIMIT 1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'rajkumar', '2015-01-13 10:31:02', 1, 'en-US', NULL, '2015-01-13 10:31:02', NULL, 'rajkumar', 24, '1', NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)[0m
Saving a log entry on create for Coach record 194
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Account', NULL, 194, 'rajkumar', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
Saving a log entry on update for Coach record 194
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('ReflexLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:02', NULL, 'KLE', '2015-01-13 10:31:02')
Saving a log entry on create for Language record 151
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Language', NULL, 151, 'rajkumar', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mQualification Load (0.2ms)[0m  [1mSELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 151 AND (`qualifications`.coach_id = 194 AND (max_unit > 0)) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 151 LIMIT 1[0m
  [1m[35mCoachManager Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 194 LIMIT 1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 194 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 194 and language_id = 151)
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 194 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:02', NULL, 151, 10, 194, '2015-01-13 10:31:02')
Saving a log entry on create for Qualification record 155
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Qualification', NULL, 155, 'rajkumar', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 194 AND session_end_time > '2015-01-13 11:00:00' AND session_start_time < '2015-01-13 11:30:00') ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `coach_sessions` (`appointment_type_id`, `type`, `coach_id`, `session_end_time`, `external_village_id`, `created_at`, `session_start_time`, `topic_id`, `reassigned`, `attendance_count`, `name`, `cancelled`, `seconds_prior_to_session`, `session_status`, `coach_showed_up`, `language_identifier`, `updated_at`, `recurring_schedule_id`, `number_of_seats`, `eschool_session_id`, `single_number_unit`, `cancellation_reason`, `language_id`) VALUES (NULL, 'ConfirmedSession', 194, '2015-01-13 11:30:00', NULL, '2015-01-13 10:31:02', '2015-01-13 11:00:00', NULL, NULL, NULL, NULL, 0, NULL, 1, 0, 'KLE', '2015-01-13 10:31:02', NULL, 0, NULL, 1, NULL, 151)
Saving a log entry on create for ConfirmedSession record 56
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'CoachSession', NULL, 56, 'rajkumar', NULL)[0m
  [1m[35mSessionMetadata Load (0.2ms)[0m  SELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 56) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoach Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 194 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 194) AND ((max_unit > 0)))
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `unavailable_despite_templates` (`comments`, `start_date`, `ancestry`, `coach_id`, `end_date`, `created_at`, `approval_status`, `updated_at`, `unavailability_type`, `coach_session_id`) VALUES ('Auto Approved - Coach requested Substitute', '2015-01-13 11:00:00', NULL, 194, '2015-01-13 11:30:00', '2015-01-13 10:31:02', 1, '2015-01-13 10:31:02', 1, 56)[0m
Saving a log entry on create for UnavailableDespiteTemplate record 29
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'UnavailableDespiteTemplate', NULL, 29, 'rajkumar', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 56 LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `substitutions` (`reason`, `coach_id`, `lang_id`, `grabbed_at`, `grabbed`, `created_at`, `session_type`, `cancelled`, `was_reassigned`, `grabber_coach_id`, `updated_at`, `coach_session_id`) VALUES (NULL, 194, NULL, NULL, 0, '2015-01-13 10:31:02', 'normal', 0, 0, NULL, '2015-01-13 10:31:02', 56)
Saving a log entry on create for Substitution record 69
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Substitution', NULL, 69, 'rajkumar', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mCoachSession Load (0.3ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 11:00:00' AND session_start_time < '2015-01-13 11:30:00' AND id <> 56) ORDER BY updated_at DESC LIMIT 1[0m
  [1m[35mAREL (0.2ms)[0m  UPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 10:31:02' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 56
Saving a log entry on update for ConfirmedSession record 56
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:31:02', 'coach_id', '2015-01-13 10:31:02', 'CoachSession', 194, 56, 'rajkumar', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 151 OR identifier = 151) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoach Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '151')[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 151 OR identifier = 151) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoachManager Load (0.6ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '151')
  [1m[36mTriggerEvent Load (0.1ms)[0m  [1mSELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1[0m
  [1m[35mNotification Load (0.0ms)[0m  SELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1
  Processing by SubstitutionController#substitutions_alert as HTML
  [1m[36mPreferenceSetting Load (0.3ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 193) LIMIT 1[0m
  [1m[35mPreferenceSetting Load (0.1ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 193) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `preference_settings` (`no_of_calendar_notices_to_display`, `substitution_alerts_email_type`, `calendar_notices_display_time`, `no_of_home_substitutions`, `substitution_policy_email_sending_schedule`, `substitution_alerts_sms`, `calendar_notices_email`, `calendar_notices_email_type`, `no_of_learner_dashboard_records`, `no_of_home_events`, `no_of_notifications_to_display`, `substitution_alerts_email`, `start_page`, `no_of_home_notifications`, `created_at`, `daily_cap`, `substitution_policy_email`, `substitution_policy_email_type`, `session_alerts_display_time`, `timeoff_request_email_type`, `updated_at`, `coach_not_present_alert`, `notifications_email_type`, `calendar_notices_email_sending_schedule`, `no_of_substitution_alerts_to_display`, `notifications_email`, `notifications_email_sending_schedule`, `default_language_for_master_scheduler`, `substitution_alerts_display_time`, `timeoff_request_email`, `account_id`, `mails_sent`, `notifications_display_time`, `substitution_alerts_email_sending_schedule`, `no_of_home_announcements`) VALUES (NULL, 'PER', NULL, 5, NULL, NULL, NULL, 'PER', NULL, 5, NULL, NULL, 'CM_MS', 5, '2015-01-13 10:31:02', NULL, NULL, NULL, NULL, NULL, '2015-01-13 10:31:02', NULL, 'PER', 'IMMEDIATELY', 5, NULL, 'IMMEDIATELY', NULL, 86400, NULL, 193, 0, NULL, 'IMMEDIATELY', 5)
Saving a log entry on create for PreferenceSetting record 29
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'PreferenceSetting', NULL, 29, 'vramanan', NULL)[0m
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mShownSubstitutions Load (0.2ms)[0m  [1mSELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 193 LIMIT 1[0m
  [1m[35mSubstitution Load (0.6ms)[0m  SELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions) on (coach_sessions.id = substitutions.coach_session_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 10:00:00' and coach_sessions.session_start_time <= '2015-01-14 10:31:02' and coach_sessions.session_end_time > '2015-01-13 10:31:02' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time
  [1m[36mCoachSession Load (0.2ms)[0m  [1mSELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 56 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 151 LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 56)) LIMIT 1[0m
  [1m[35mCmPreference Load (0.2ms)[0m  SELECT `cm_preferences`.* FROM `cm_preferences` WHERE (`cm_preferences`.account_id = 193) LIMIT 1
Rendered shared/_substitutions_alert.html.erb (1.1ms)
Completed 200 OK in 20ms (Views: 2.4ms | ActiveRecord: 45.7ms)
  [1m[36mSQL (40.5ms)[0m  [1mROLLBACK[0m
  [1m[35mSQL (0.0ms)[0m  BEGIN
  [1m[36mAccount Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'vramanan' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'vramanan') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email152@rosettastone.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:02', NULL, NULL, NULL, NULL, 'vramanan', 'en-US', 'CoachManager', NULL, '1', 'rs_email152@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:02', 'vramanan', NULL, NULL)[0m
Saving a log entry on create for Account record 195
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Account', NULL, 195, 'vramanan', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSupportLanguage Load (0.2ms)[0m  SELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:02', '2015-01-13 10:31:02', 'en-US')
Saving a log entry on create for SupportLanguage record 104
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'SupportLanguage', NULL, 104, NULL, NULL)[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccount Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 195 LIMIT 1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'rajkumar' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'rajkumar') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rajkumar@rs.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`active`, `type`, `full_name`, `created_at`, `lotus_qualified`, `native_language`, `personal_email`, `updated_at`, `next_session_alert_in`, `user_name`, `next_substitution_alert_in`, `mobile_country_code`, `manager_notes`, `coach_guid`, `photo_content_type`, `rs_email`, `address`, `photo_file`, `primary_country_code`, `last_logout`, `primary_phone`, `manager_id`, `hire_date`, `preferred_name`, `birth_date`, `sessions_allowed_per_week`, `bio`, `skype_id`, `mobile_phone`, `country`, `photo_file_name`, `other_languages`, `region_id`, `aim_id`, `is_supervisor`, `secondary_phone`, `photo_file_size`) VALUES (1, 'Coach', 'rajkumar', '2015-01-13 10:31:02', 1, 'en-US', NULL, '2015-01-13 10:31:02', NULL, 'rajkumar', 24, '1', NULL, NULL, NULL, 'rajkumar@rs.com', NULL, NULL, '1', NULL, '5402334456', NULL, NULL, 'test', NULL, 8, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL)
Saving a log entry on create for Coach record 196
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Account', NULL, 196, 'vramanan', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
Saving a log entry on update for Coach record 196
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT 1 FROM `languages` WHERE (`languages`.`identifier` = BINARY 'KLE') LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `languages` (`type`, `external_scheduler`, `duration`, `last_pushed_week`, `updated_at`, `connection_type`, `identifier`, `created_at`) VALUES ('ReflexLanguage', NULL, 30, '2011-10-27 23:22:54', '2015-01-13 10:31:02', NULL, 'KLE', '2015-01-13 10:31:02')[0m
Saving a log entry on create for Language record 152
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Language', NULL, 152, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mQualification Load (0.2ms)[0m  SELECT `qualifications`.* FROM `qualifications` WHERE `qualifications`.`language_id` = 152 AND (`qualifications`.coach_id = 196 AND (max_unit > 0)) LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.1ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 152 LIMIT 1
  [1m[36mCoachManager Load (0.3ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 196 LIMIT 1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 196 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT COUNT(*) FROM `qualifications` WHERE (max_unit IS NOT NULL and id != 0 and coach_id = 196 and language_id = 152)[0m
  [1m[35mCoachManager Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'CoachManager' AND `accounts`.`id` = 196 LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `qualifications` (`updated_at`, `dialect_id`, `language_id`, `max_unit`, `coach_id`, `created_at`) VALUES ('2015-01-13 10:31:02', NULL, 152, 10, 196, '2015-01-13 10:31:02')[0m
Saving a log entry on create for Qualification record 156
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:02', '', '2015-01-13 10:31:02', 'Qualification', NULL, 156, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.4ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = 196 AND session_end_time > '2015-01-13 14:00:00' AND session_start_time < '2015-01-13 14:30:00') ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `coach_sessions` (`appointment_type_id`, `type`, `coach_id`, `session_end_time`, `external_village_id`, `created_at`, `session_start_time`, `topic_id`, `reassigned`, `attendance_count`, `name`, `cancelled`, `seconds_prior_to_session`, `session_status`, `coach_showed_up`, `language_identifier`, `updated_at`, `recurring_schedule_id`, `number_of_seats`, `eschool_session_id`, `single_number_unit`, `cancellation_reason`, `language_id`) VALUES (NULL, 'ConfirmedSession', 196, '2015-01-13 14:30:00', NULL, '2015-01-13 10:31:03', '2015-01-13 14:00:00', NULL, NULL, NULL, NULL, 0, NULL, 1, 0, 'KLE', '2015-01-13 10:31:03', NULL, 0, NULL, 1, NULL, 152)[0m
Saving a log entry on create for ConfirmedSession record 57
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:03', '', '2015-01-13 10:31:03', 'CoachSession', NULL, 57, 'vramanan', NULL)
  [1m[36mSessionMetadata Load (0.2ms)[0m  [1mSELECT `session_metadata`.* FROM `session_metadata` WHERE (`session_metadata`.coach_session_id = 57) LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoach Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND `accounts`.`id` = 196 AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` INNER JOIN `qualifications` ON `languages`.id = `qualifications`.language_id WHERE ((`qualifications`.coach_id = 196) AND ((max_unit > 0)))[0m
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `unavailable_despite_templates` (`comments`, `start_date`, `ancestry`, `coach_id`, `end_date`, `created_at`, `approval_status`, `updated_at`, `unavailability_type`, `coach_session_id`) VALUES ('Auto Approved - Coach requested Substitute', '2015-01-13 14:00:00', NULL, 196, '2015-01-13 14:30:00', '2015-01-13 10:31:03', 1, '2015-01-13 10:31:03', 1, 57)
Saving a log entry on create for UnavailableDespiteTemplate record 30
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:03', '', '2015-01-13 10:31:03', 'UnavailableDespiteTemplate', NULL, 30, 'vramanan', NULL)[0m
  [1m[35mSQL (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 57 LIMIT 1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `substitutions` (`reason`, `coach_id`, `lang_id`, `grabbed_at`, `grabbed`, `created_at`, `session_type`, `cancelled`, `was_reassigned`, `grabber_coach_id`, `updated_at`, `coach_session_id`) VALUES (NULL, 196, NULL, NULL, 0, '2015-01-13 10:31:03', 'normal', 0, 0, NULL, '2015-01-13 10:31:03', 57)[0m
Saving a log entry on create for Substitution record 70
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:03', '', '2015-01-13 10:31:03', 'Substitution', NULL, 70, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'KLE' LIMIT 1[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE (cancelled = 0 AND coach_id = NULL AND session_end_time > '2015-01-13 14:00:00' AND session_start_time < '2015-01-13 14:30:00' AND id <> 57) ORDER BY updated_at DESC LIMIT 1
  [1m[36mAREL (0.2ms)[0m  [1mUPDATE `coach_sessions` SET `coach_id` = NULL, `updated_at` = '2015-01-13 10:31:03' WHERE `coach_sessions`.`type` = 'ConfirmedSession' AND `coach_sessions`.`id` = 57[0m
Saving a log entry on update for ConfirmedSession record 57
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('update', '2015-01-13 10:31:03', 'coach_id', '2015-01-13 10:31:03', 'CoachSession', 196, 57, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` WHERE (id = 152 OR identifier = 152) ORDER BY languages.id DESC LIMIT 1
  [1m[36mRegion Load (0.0ms)[0m  [1mSELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1[0m
  [1m[35mCoach Load (0.7ms)[0m  SELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit > 0 LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '152')
  [1m[36mLanguage Load (0.2ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE (id = 152 OR identifier = 152) ORDER BY languages.id DESC LIMIT 1[0m
  [1m[35mRegion Load (0.0ms)[0m  SELECT `regions`.* FROM `regions` WHERE `regions`.`id` IS NULL LIMIT 1
  [1m[36mCoachManager Load (0.7ms)[0m  [1mSELECT `accounts`.`id` AS t0_r0, `accounts`.`user_name` AS t0_r1, `accounts`.`full_name` AS t0_r2, `accounts`.`preferred_name` AS t0_r3, `accounts`.`rs_email` AS t0_r4, `accounts`.`personal_email` AS t0_r5, `accounts`.`skype_id` AS t0_r6, `accounts`.`primary_phone` AS t0_r7, `accounts`.`secondary_phone` AS t0_r8, `accounts`.`birth_date` AS t0_r9, `accounts`.`hire_date` AS t0_r10, `accounts`.`bio` AS t0_r11, `accounts`.`manager_notes` AS t0_r12, `accounts`.`active` AS t0_r13, `accounts`.`manager_id` AS t0_r14, `accounts`.`created_at` AS t0_r15, `accounts`.`updated_at` AS t0_r16, `accounts`.`type` AS t0_r17, `accounts`.`region_id` AS t0_r18, `accounts`.`next_session_alert_in` AS t0_r19, `accounts`.`last_logout` AS t0_r20, `accounts`.`country` AS t0_r21, `accounts`.`native_language` AS t0_r22, `accounts`.`other_languages` AS t0_r23, `accounts`.`address` AS t0_r24, `accounts`.`lotus_qualified` AS t0_r25, `accounts`.`next_substitution_alert_in` AS t0_r26, `accounts`.`mobile_phone` AS t0_r27, `accounts`.`sessions_allowed_per_week` AS t0_r28, `accounts`.`is_supervisor` AS t0_r29, `accounts`.`mobile_country_code` AS t0_r30, `accounts`.`aim_id` AS t0_r31, `accounts`.`primary_country_code` AS t0_r32, `accounts`.`photo_file_name` AS t0_r33, `accounts`.`photo_content_type` AS t0_r34, `accounts`.`photo_file_size` AS t0_r35, `accounts`.`photo_file` AS t0_r36, `accounts`.`coach_guid` AS t0_r37, `preference_settings`.`id` AS t1_r0, `preference_settings`.`substitution_alerts_email` AS t1_r1, `preference_settings`.`substitution_alerts_email_type` AS t1_r2, `preference_settings`.`substitution_alerts_email_sending_schedule` AS t1_r3, `preference_settings`.`substitution_alerts_sms` AS t1_r4, `preference_settings`.`no_of_substitution_alerts_to_display` AS t1_r5, `preference_settings`.`substitution_alerts_display_time` AS t1_r6, `preference_settings`.`notifications_email` AS t1_r7, `preference_settings`.`notifications_email_type` AS t1_r8, `preference_settings`.`notifications_email_sending_schedule` AS t1_r9, `preference_settings`.`calendar_notices_email` AS t1_r10, `preference_settings`.`calendar_notices_email_type` AS t1_r11, `preference_settings`.`calendar_notices_email_sending_schedule` AS t1_r12, `preference_settings`.`session_alerts_display_time` AS t1_r13, `preference_settings`.`start_page` AS t1_r14, `preference_settings`.`account_id` AS t1_r15, `preference_settings`.`default_language_for_master_scheduler` AS t1_r16, `preference_settings`.`no_of_home_announcements` AS t1_r17, `preference_settings`.`no_of_home_events` AS t1_r18, `preference_settings`.`no_of_home_notifications` AS t1_r19, `preference_settings`.`no_of_learner_dashboard_records` AS t1_r20, `preference_settings`.`no_of_notifications_to_display` AS t1_r21, `preference_settings`.`notifications_display_time` AS t1_r22, `preference_settings`.`no_of_calendar_notices_to_display` AS t1_r23, `preference_settings`.`calendar_notices_display_time` AS t1_r24, `preference_settings`.`created_at` AS t1_r25, `preference_settings`.`updated_at` AS t1_r26, `preference_settings`.`no_of_home_substitutions` AS t1_r27, `preference_settings`.`daily_cap` AS t1_r28, `preference_settings`.`mails_sent` AS t1_r29, `preference_settings`.`coach_not_present_alert` AS t1_r30, `preference_settings`.`substitution_policy_email` AS t1_r31, `preference_settings`.`substitution_policy_email_type` AS t1_r32, `preference_settings`.`substitution_policy_email_sending_schedule` AS t1_r33, `preference_settings`.`timeoff_request_email` AS t1_r34, `preference_settings`.`timeoff_request_email_type` AS t1_r35 FROM `accounts` INNER JOIN `qualifications` ON `qualifications`.`coach_id` = `accounts`.`id` AND max_unit is NULL LEFT OUTER JOIN `preference_settings` ON `preference_settings`.`account_id` = `accounts`.`id` WHERE `accounts`.`type` = 'CoachManager' AND (accounts.active = 1 AND preference_settings.substitution_alerts_email = 1 AND preference_settings.substitution_alerts_email_sending_schedule = 'IMMEDIATELY' AND (preference_settings.daily_cap IS NULL OR preference_settings.daily_cap > preference_settings.mails_sent) and qualifications.language_id = '152')[0m
  [1m[35mTriggerEvent Load (0.1ms)[0m  SELECT `trigger_events`.* FROM `trigger_events` WHERE `trigger_events`.`name` = 'SUBSTITUTE_REQUESTED_FOR_COACH' LIMIT 1
  [1m[36mNotification Load (0.0ms)[0m  [1mSELECT `notifications`.* FROM `notifications` WHERE (`notifications`.trigger_event_id = 21) LIMIT 1[0m
  Processing by SubstitutionController#substitutions_alert as HTML
  Parameters: {"closed"=>"false"}
  [1m[35mPreferenceSetting Load (0.3ms)[0m  SELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 195) LIMIT 1
  [1m[36mPreferenceSetting Load (0.1ms)[0m  [1mSELECT `preference_settings`.* FROM `preference_settings` WHERE (`preference_settings`.account_id = 195) LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `preference_settings` (`no_of_calendar_notices_to_display`, `substitution_alerts_email_type`, `calendar_notices_display_time`, `no_of_home_substitutions`, `substitution_policy_email_sending_schedule`, `substitution_alerts_sms`, `calendar_notices_email`, `calendar_notices_email_type`, `no_of_learner_dashboard_records`, `no_of_home_events`, `no_of_notifications_to_display`, `substitution_alerts_email`, `start_page`, `no_of_home_notifications`, `created_at`, `daily_cap`, `substitution_policy_email`, `substitution_policy_email_type`, `session_alerts_display_time`, `timeoff_request_email_type`, `updated_at`, `coach_not_present_alert`, `notifications_email_type`, `calendar_notices_email_sending_schedule`, `no_of_substitution_alerts_to_display`, `notifications_email`, `notifications_email_sending_schedule`, `default_language_for_master_scheduler`, `substitution_alerts_display_time`, `timeoff_request_email`, `account_id`, `mails_sent`, `notifications_display_time`, `substitution_alerts_email_sending_schedule`, `no_of_home_announcements`) VALUES (NULL, 'PER', NULL, 5, NULL, NULL, NULL, 'PER', NULL, 5, NULL, NULL, 'CM_MS', 5, '2015-01-13 10:31:03', NULL, NULL, NULL, NULL, NULL, '2015-01-13 10:31:03', NULL, 'PER', 'IMMEDIATELY', 5, NULL, 'IMMEDIATELY', NULL, 86400, NULL, 195, 0, NULL, 'IMMEDIATELY', 5)[0m
Saving a log entry on create for PreferenceSetting record 30
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:03', '', '2015-01-13 10:31:03', 'PreferenceSetting', NULL, 30, 'vramanan', NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mShownSubstitutions Load (0.2ms)[0m  SELECT `shown_substitutions`.* FROM `shown_substitutions` WHERE `shown_substitutions`.`coach_id` = 195 LIMIT 1
  [1m[36mSubstitution Load (0.6ms)[0m  [1mSELECT substitutions.* FROM `substitutions` LEFT OUTER JOIN (coach_sessions) on (coach_sessions.id = substitutions.coach_session_id) WHERE (coach_sessions.session_start_time >= '2015-01-13 10:00:00' and coach_sessions.session_start_time <= '2015-01-14 10:31:03' and coach_sessions.session_end_time > '2015-01-13 10:31:03' and substitutions.grabbed = 0 and substitutions.cancelled = 0 and substitutions.coach_id IS NOT NULL) GROUP BY substitutions.id ORDER BY coach_sessions.session_start_time[0m
  [1m[35mCoachSession Load (0.2ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`id` = 57 LIMIT 1
  [1m[36mLanguage Load (0.1ms)[0m  [1mSELECT `languages`.* FROM `languages` WHERE `languages`.`id` = 152 LIMIT 1[0m
  [1m[35mLanguage Load (0.2ms)[0m  SELECT `languages`.* FROM `languages` INNER JOIN `coach_sessions` ON `languages`.id = `coach_sessions`.language_id WHERE ((`coach_sessions`.id = 57)) LIMIT 1
  [1m[36mCmPreference Load (0.2ms)[0m  [1mSELECT `cm_preferences`.* FROM `cm_preferences` WHERE (`cm_preferences`.account_id = 195) LIMIT 1[0m
Rendered shared/_substitutions_alert.html.erb (0.5ms)
Completed 200 OK in 17ms (Views: 1.0ms | ActiveRecord: 55.6ms)
  [1m[35mSQL (41.6ms)[0m  ROLLBACK
  [1m[36mSQL (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mAccount Load (0.4ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`user_name` = 'test21' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test21') LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'rs_email604@rosettastone.com' and id != NULL)[0m
  [1m[35mAREL (0.3ms)[0m  INSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:03', NULL, NULL, NULL, NULL, 'test21', 'en-US', 'CoachManager', NULL, '1', 'rs_email604@rosettastone.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:03', 'test21', NULL, NULL)
Saving a log entry on create for Account record 197
  [1m[36mAREL (0.2ms)[0m  [1mINSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:03', '', '2015-01-13 10:31:03', 'Account', NULL, 197, 'vramanan', NULL)[0m
[paperclip] Saving attachments.
  [1m[35mSQL (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSupportLanguage Load (0.2ms)[0m  [1mSELECT `support_languages`.* FROM `support_languages` WHERE `support_languages`.`language_code` = 'en-US' LIMIT 1[0m
  [1m[35mSQL (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAREL (0.1ms)[0m  [1mINSERT INTO `support_languages` (`name`, `updated_at`, `created_at`, `language_code`) VALUES ('English', '2015-01-13 10:31:03', '2015-01-13 10:31:03', 'en-US')[0m
Saving a log entry on create for SupportLanguage record 105
  [1m[35mAREL (0.1ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:03', '', '2015-01-13 10:31:03', 'SupportLanguage', NULL, 105, NULL, NULL)
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccount Load (0.3ms)[0m  SELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`id` = 197 LIMIT 1
  [1m[36mCoach Load (0.4ms)[0m  [1mSELECT `accounts`.`id`, `accounts`.`user_name`, `accounts`.`full_name`, `accounts`.`preferred_name`, `accounts`.`rs_email`, `accounts`.`personal_email`, `accounts`.`skype_id`, `accounts`.`primary_phone`, `accounts`.`secondary_phone`, `accounts`.`birth_date`, `accounts`.`hire_date`, `accounts`.`bio`, `accounts`.`manager_notes`, `accounts`.`active`, `accounts`.`manager_id`, `accounts`.`created_at`, `accounts`.`updated_at`, `accounts`.`type`, `accounts`.`region_id`, `accounts`.`next_session_alert_in`, `accounts`.`last_logout`, `accounts`.`country`, `accounts`.`native_language`, `accounts`.`other_languages`, `accounts`.`address`, `accounts`.`lotus_qualified`, `accounts`.`next_substitution_alert_in`, `accounts`.`mobile_phone`, `accounts`.`sessions_allowed_per_week`, `accounts`.`is_supervisor`, `accounts`.`mobile_country_code`, `accounts`.`aim_id`, `accounts`.`primary_country_code`, `accounts`.`photo_file_name`, `accounts`.`photo_content_type`, `accounts`.`photo_file_size`, `accounts`.`coach_guid` FROM `accounts` WHERE `accounts`.`type` = 'Coach' AND (rs_email != 'tutor.tbd@gmail.com') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT 1 FROM `accounts` WHERE (`accounts`.`user_name` = BINARY 'test438') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT COUNT(*) FROM `accounts` WHERE (rs_email = 'user_302@factory.com' and id != NULL)
  [1m[36mAREL (0.3ms)[0m  [1mINSERT INTO `accounts` (`bio`, `is_supervisor`, `skype_id`, `mobile_phone`, `created_at`, `personal_email`, `region_id`, `photo_file`, `manager_notes`, `user_name`, `native_language`, `type`, `coach_guid`, `primary_country_code`, `rs_email`, `active`, `photo_content_type`, `photo_file_name`, `birth_date`, `last_logout`, `lotus_qualified`, `aim_id`, `address`, `preferred_name`, `sessions_allowed_per_week`, `manager_id`, `country`, `next_substitution_alert_in`, `other_languages`, `hire_date`, `mobile_country_code`, `photo_file_size`, `primary_phone`, `updated_at`, `full_name`, `next_session_alert_in`, `secondary_phone`) VALUES (NULL, 0, NULL, NULL, '2015-01-13 10:31:03', NULL, NULL, NULL, NULL, 'test438', 'en-US', 'Coach', NULL, '1', 'user_302@factory.com', 1, NULL, NULL, NULL, NULL, 1, NULL, NULL, 'test', 8, NULL, NULL, 24, NULL, NULL, '1', NULL, '5402334456', '2015-01-13 10:31:03', 'test', NULL, NULL)[0m
Saving a log entry on create for Account record 198
  [1m[35mAREL (0.2ms)[0m  INSERT INTO `audit_log_records` (`action`, `created_at`, `attribute_name`, `timestamp`, `loggable_type`, `previous_value`, `loggable_id`, `changed_by`, `new_value`) VALUES ('create', '2015-01-13 10:31:03', '', '2015-01-13 10:31:03', 'Account', NULL, 198, 'vramanan', NULL)
[paperclip] Saving attachments.
  [1m[36mSQL (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCoachSession Load (0.3ms)[0m  SELECT `coach_sessions`.* FROM `coach_sessions` WHERE `coach_sessions`.`eschool_session_id` = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLanguage Load (0.3ms)[0m  SELECT `languages`.* FROM `languages` WHERE `languages`.`identifier` = 'ESP' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mSQL (29.0ms)[0m  ROLLBACK
